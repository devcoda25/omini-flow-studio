{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/HeaderBar/header-bar.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"badge\": \"header-bar-module__3h14EW__badge\",\n  \"badgeMuted\": \"header-bar-module__3h14EW__badgeMuted\",\n  \"badges\": \"header-bar-module__3h14EW__badges\",\n  \"channels\": \"header-bar-module__3h14EW__channels\",\n  \"group\": \"header-bar-module__3h14EW__group\",\n  \"header\": \"header-bar-module__3h14EW__header\",\n  \"item\": \"header-bar-module__3h14EW__item\",\n  \"itemLabel\": \"header-bar-module__3h14EW__itemLabel\",\n  \"itemShort\": \"header-bar-module__3h14EW__itemShort\",\n  \"left\": \"header-bar-module__3h14EW__left\",\n  \"list\": \"header-bar-module__3h14EW__list\",\n  \"mini\": \"header-bar-module__3h14EW__mini\",\n  \"popActions\": \"header-bar-module__3h14EW__popActions\",\n  \"popHeader\": \"header-bar-module__3h14EW__popHeader\",\n  \"popTitle\": \"header-bar-module__3h14EW__popTitle\",\n  \"popover\": \"header-bar-module__3h14EW__popover\",\n  \"right\": \"header-bar-module__3h14EW__right\",\n  \"segment\": \"header-bar-module__3h14EW__segment\",\n  \"segmentLabel\": \"header-bar-module__3h14EW__segmentLabel\",\n  \"select\": \"header-bar-module__3h14EW__select\",\n  \"titleButton\": \"header-bar-module__3h14EW__titleButton\",\n  \"titleInput\": \"header-bar-module__3h14EW__titleInput\",\n  \"titleText\": \"header-bar-module__3h14EW__titleText\",\n  \"titleWrap\": \"header-bar-module__3h14EW__titleWrap\",\n  \"toggle\": \"header-bar-module__3h14EW__toggle\",\n  \"visuallyHidden\": \"header-bar-module__3h14EW__visuallyHidden\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/HeaderBar/channel-meta.ts"],"sourcesContent":["// Channel metadata and strong typing for the selector.\n\nexport type Channel =\n  | 'whatsapp'\n  | 'sms'\n  | 'email'\n  | 'push'\n  | 'voice'\n  | 'instagram'\n  | 'messenger'\n  | 'webchat'\n  | 'slack'\n  | 'teams'\n  | 'telegram'\n\nexport type MessageContext = 'template' | 'in-session'\n\nexport interface ChannelMeta {\n  id: Channel\n  label: string\n  short: string // 2–3 letters for compact badges\n}\n\nexport const CHANNELS: ChannelMeta[] = [\n  { id: 'whatsapp',  label: 'WhatsApp',   short: 'WA' },\n  { id: 'sms',       label: 'SMS',        short: 'SM' },\n  { id: 'email',     label: 'Email',      short: 'EM' },\n  { id: 'push',      label: 'Push',       short: 'PU' },\n  { id: 'voice',     label: 'Voice',      short: 'VO' },\n  { id: 'instagram', label: 'Instagram',  short: 'IG' },\n  { id: 'messenger', label: 'Messenger',  short: 'FB' },\n  { id: 'webchat',   label: 'WebChat',    short: 'WC' },\n  { id: 'slack',     label: 'Slack',      short: 'SL' },\n  { id: 'teams',     label: 'Teams',      short: 'MS' },\n  { id: 'telegram',  label: 'Telegram',   short: 'TG' }\n]\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;AAuBhD,MAAM,WAA0B;IACrC;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;IACpD;QAAE,IAAI;QAAa,OAAO;QAAc,OAAO;IAAK;CACrD","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/hooks/useDebouncedCallback.ts"],"sourcesContent":["import { useEffect, useRef } from 'react'\n\n/** Stable debounced callback. Executes trailing only. */\nexport function useDebouncedCallback<T extends (...args: any[]) => void>(\n  fn: T,\n  delay = 500\n) {\n  const fnRef = useRef(fn)\n  const timer = useRef<number | undefined>(undefined)\n\n  useEffect(() => {\n    fnRef.current = fn\n  }, [fn])\n\n  useEffect(() => {\n    return () => {\n      if (timer.current) window.clearTimeout(timer.current)\n    }\n  }, [])\n\n  function run(...args: Parameters<T>) {\n    if (timer.current) window.clearTimeout(timer.current)\n    timer.current = window.setTimeout(() => fnRef.current(...args), delay)\n  }\n\n  return run as T\n}\n"],"names":[],"mappings":";;;AAAA;;;AAGO,SAAS,qBACd,EAAK;QACL,QAAA,iEAAQ;;IAER,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IACrB,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAsB;IAEzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,MAAM,OAAO,GAAG;QAClB;yCAAG;QAAC;KAAG;IAEP,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR;kDAAO;oBACL,IAAI,MAAM,OAAO,EAAE,OAAO,YAAY,CAAC,MAAM,OAAO;gBACtD;;QACF;yCAAG,EAAE;IAEL,SAAS;QAAI,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,OAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;YAAG,KAAH,QAAA,SAAA,CAAA,KAAsB;;QACjC,IAAI,MAAM,OAAO,EAAE,OAAO,YAAY,CAAC,MAAM,OAAO;QACpD,MAAM,OAAO,GAAG,OAAO,UAAU,CAAC,IAAM,MAAM,OAAO,IAAI,OAAO;IAClE;IAEA,OAAO;AACT;GAvBgB","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,6JAAA,CAAA,aAAgB,MAG7B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/HeaderBar/HeaderBar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useId, useMemo, useRef, useState } from 'react';\nimport styles from './header-bar.module.css';\nimport { CHANNELS, Channel, MessageContext } from './channel-meta';\nimport { useDebouncedCallback } from '@/hooks/useDebouncedCallback';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Undo, Redo, TestTube, Save, ChevronDown } from 'lucide-react';\nimport { publishFlow } from '@/api/flows';\nimport { usePresence } from '@/presence/PresenceProvider';\n\n/** Handy class combiner without bringing in a dependency */\nfunction cn(...parts: Array<string | false | undefined>) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport type HeaderBarProps = {\n  /** Optional externally controlled title; if omitted, `initialTitle` seeds local state */\n  title?: string;\n  initialTitle?: string;\n  channels: Channel[];\n  availableChannels?: Channel[]; // default = all\n  onChannelsChange: (next: Channel[]) => void;\n\n  // WhatsApp context (for validation elsewhere). Rendered only if WhatsApp is selected.\n  waContext?: MessageContext; // 'template' | 'in-session'\n  onWaContextChange?: (ctx: MessageContext) => void;\n\n  // Editing / saving\n  onSave?: (title: string) => void; // debounced save callback\n\n  // Undo/Redo\n  onUndo: () => void;\n  onRedo: () => void;\n  canUndo?: boolean;\n  canRedo?: boolean;\n\n  // Actions\n  onTest: () => void;\n  onPublishToggle: (next: boolean) => void;\n  onSaveClick?: () => void;\n  isPublished?: boolean;\n\n  className?: string;\n};\n\nexport default function HeaderBar({\n  title,\n  initialTitle = 'Untitled Flow',\n  channels,\n  availableChannels,\n  onChannelsChange,\n  waContext,\n  onWaContextChange,\n  onSave,\n  onUndo,\n  onRedo,\n  canUndo = false,\n  canRedo = false,\n  onTest,\n  onPublishToggle,\n  onSaveClick,\n  isPublished = false,\n  className,\n}: HeaderBarProps) {\n  const controlled = typeof title === 'string';\n  const [localTitle, setLocalTitle] = useState<string>(title ?? initialTitle);\n  const currentTitle = controlled ? (title as string) : localTitle;\n  const [editing, setEditing] = useState(false);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const originalRef = useRef(currentTitle);\n\n  useEffect(() => {\n    if (controlled) return;\n    setLocalTitle((t) => (t !== currentTitle ? currentTitle : t));\n  }, [title, controlled, currentTitle]);\n\n  const debouncedSave = useDebouncedCallback((val: string) => {\n    if (val.trim().length === 0) val = 'Untitled Flow';\n    if (val !== originalRef.current) {\n      onSave?.(val);\n      originalRef.current = val;\n    }\n  }, 500);\n\n  useEffect(() => {\n    if (editing) inputRef.current?.focus();\n  }, [editing]);\n\n  const allChannels = useMemo(\n    () =>\n      availableChannels && availableChannels.length\n        ? CHANNELS.filter((c) => availableChannels.includes(c.id))\n        : CHANNELS,\n    [availableChannels]\n  );\n  const [open, setOpen] = useState(false);\n  const popRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    function onDocClick(e: MouseEvent) {\n      if (!open) return;\n      if (!popRef.current) return;\n      if (!popRef.current.contains(e.target as Node)) setOpen(false);\n    }\n    document.addEventListener('mousedown', onDocClick);\n    return () => document.removeEventListener('mousedown', onDocClick);\n  }, [open]);\n\n  function toggleChannel(ch: Channel) {\n    const set = new Set(channels);\n    set.has(ch) ? set.delete(ch) : set.add(ch);\n    onChannelsChange(Array.from(set));\n  }\n\n  const headerId = useId();\n  const selectedMeta = allChannels.filter((c) => channels.includes(c.id));\n  const MAX_BADGES = 4;\n  const overflow = Math.max(0, selectedMeta.length - MAX_BADGES);\n  const showBadges = selectedMeta.slice(0, MAX_BADGES);\n\n  function commitTitle(val: string) {\n    const trimmed = val.trim().length ? val : 'Untitled Flow';\n    if (!controlled) setLocalTitle(trimmed);\n    debouncedSave(trimmed);\n  }\n\n  function onTitleKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n    if (e.key === 'Enter') {\n      e.currentTarget.blur();\n    } else if (e.key === 'Escape') {\n      if (!controlled) setLocalTitle(originalRef.current);\n      setEditing(false);\n    }\n  }\n\n  function handlePublishToggle(next: boolean) {\n    onPublishToggle(next);\n  }\n\n\n  return (\n    <header className={cn(styles.header, className)} aria-labelledby={headerId}>\n      <h2 id={headerId} className={styles.visuallyHidden}>\n        Flow Builder Header\n      </h2>\n      <div className={styles.left}>\n        <div className={styles.channels} ref={popRef}>\n          <Button\n            variant=\"outline\"\n            onClick={() => setOpen((v) => !v)}\n            aria-haspopup=\"listbox\"\n            aria-expanded={open}\n            aria-controls=\"channel-listbox\"\n            title=\"Select channels\"\n          >\n            Channels <ChevronDown className=\"h-4 w-4\" />\n          </Button>\n          <div className={styles.badges} aria-label=\"Selected channels\">\n            {showBadges.map((c) => (\n              <span key={c.id} className={styles.badge} title={c.label}>\n                {c.short}\n              </span>\n            ))}\n            {overflow > 0 && (\n              <span className={cn(styles.badge, styles.badgeMuted)} title={`${overflow} more`}>\n                +{overflow}\n              </span>\n            )}\n          </div>\n          {open && (\n            <div className={styles.popover}>\n              <div className={styles.popHeader}>\n                <span className={styles.popTitle}>Channels</span>\n                <div className={styles.popActions}>\n                  <button className={styles.mini} onClick={() => onChannelsChange(allChannels.map((c) => c.id))}>\n                    Select all\n                  </button>\n                  <button className={styles.mini} onClick={() => onChannelsChange([])}>\n                    Clear\n                  </button>\n                </div>\n              </div>\n              <ul id=\"channel-listbox\" role=\"listbox\" aria-multiselectable className={styles.list}>\n                {allChannels.map((ch) => {\n                  const checked = channels.includes(ch.id);\n                  return (\n                    <li\n                      key={ch.id}\n                      role=\"option\"\n                      aria-selected={checked}\n                      className={styles.item}\n                      onMouseDown={(e) => e.preventDefault()}\n                      onClick={() => toggleChannel(ch.id)}\n                    >\n                      <input type=\"checkbox\" checked={checked} readOnly />\n                      <span className={styles.itemLabel}>{ch.label}</span>\n                      <span className={styles.itemShort}>{ch.short}</span>\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n          )}\n        </div>\n        {channels.includes('whatsapp') && onWaContextChange && (\n          <label className={styles.segment} aria-label=\"WhatsApp message context\">\n            <span className={styles.segmentLabel}>WA Context</span>\n            <select\n              className={styles.select}\n              value={waContext ?? 'template'}\n              onChange={(e) => onWaContextChange(e.target.value as MessageContext)}\n            >\n              <option value=\"template\">Template</option>\n              <option value=\"in-session\">In‑session</option>\n            </select>\n          </label>\n        )}\n        <div className={styles.titleWrap}>\n          {editing ? (\n            <Input\n              ref={inputRef}\n              value={currentTitle}\n              onChange={(e) => (controlled ? debouncedSave(e.target.value) : setLocalTitle(e.target.value))}\n              onBlur={() => {\n                setEditing(false);\n                commitTitle(currentTitle);\n              }}\n              onKeyDown={onTitleKeyDown}\n              className={styles.titleInput}\n              aria-label=\"Flow title\"\n              maxLength={120}\n            />\n          ) : (\n            <button\n              type=\"button\"\n              className={styles.titleButton}\n              onClick={() => setEditing(true)}\n              title=\"Click to rename\"\n              aria-label=\"Flow title. Click to rename.\"\n            >\n              <span className={styles.titleText} title={currentTitle}>\n                {currentTitle}\n              </span>\n            </button>\n          )}\n        </div>\n      </div>\n\n      <div className={styles.right}>\n        <div className={styles.group}>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onUndo} disabled={!canUndo} title=\"Undo (Ctrl/Cmd+Z)\">\n            <Undo />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onRedo} disabled={!canRedo} title=\"Redo (Ctrl/Cmd+Shift+Z)\">\n            <Redo />\n          </Button>\n        </div>\n\n        <Button variant=\"outline\" onClick={onTest}>\n          <TestTube className=\"mr-2 h-4 w-4\" /> Test Flow\n        </Button>\n\n        <div className={styles.group}>\n          {onSaveClick && (\n            <Button variant=\"secondary\" onClick={onSaveClick}>\n              <Save className=\"mr-2 h-4 w-4\" /> Save\n            </Button>\n          )}\n          <div className={styles.toggle}>\n            <Label htmlFor=\"publish-toggle\" className=\"sr-only\">\n              Publish flow\n            </Label>\n            <Switch id=\"publish-toggle\" checked={!!isPublished} onCheckedChange={handlePublishToggle} />\n            <span>{isPublished ? 'Published' : 'Draft'}</span>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/HeaderBar/index.ts"],"sourcesContent":["export { default } from './HeaderBar';\nexport type { HeaderBarProps } from './HeaderBar';\nexport type { Channel, MessageContext } from './channel-meta';\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/SidebarPalette/sections-data.ts"],"sourcesContent":["// Canonical list of sections & items.\n// - `type` equals section key for easy analytics.\n// - Optional `channels` can restrict visibility by channel (if you pass filterChannels).\nimport type { LucideIcon } from 'lucide-react';\n\nexport type NodeCategory =\n  | 'main_actions'\n  | 'operations'\n  | 'triggers'\n  | 'messaging'\n  | 'inputs'\n  | 'logic'\n  | 'timing'\n  | 'integrations'\n  | 'outreach'\n  | 'handoff'\n  | 'analytics'\n  | 'automation'\n  | 'updates'\n  | 'end'\n\nexport type Channel =\n  | 'whatsapp' | 'sms' | 'email' | 'push' | 'voice' | 'instagram'\n  | 'messenger' | 'webchat' | 'slack' | 'teams' | 'telegram'\n\nexport type PaletteItemPayload = {\n  key: string\n  label: string\n  icon: string | LucideIcon\n  type: NodeCategory\n  color?: string\n  description?: string\n}\n\nexport type ItemDefinition = PaletteItemPayload & {\n  channels?: Channel[]\n  keywords?: string[] // improves search discoverability\n}\n\nexport type SectionDefinition = {\n  key: NodeCategory\n  title: string\n  items: ItemDefinition[]\n}\n\nexport const SECTION_DATA: SectionDefinition[] = [\n    {\n      key: 'triggers',\n      title: 'Triggers',\n      items: [\n          { key: 'keyword', label: 'Keyword',  icon: 'AtSign', type: 'triggers',   color: 'hsl(262 83% 58%)', description: 'Triggered by a specific keyword' },\n          { key: 'default_action', label: 'Default Action',  icon: 'PlayCircle', type: 'triggers',   color: 'hsl(262 83% 58%)', description: 'Default flow for new conversations' },\n      ]\n    },\n    {\n      key: 'messaging',\n      title: 'Messaging',\n      items: [\n          { key: 'message', label: 'Send a Message', icon: 'Send', type: 'messaging', color: 'hsl(16 84% 62%)', description: 'Send text, media, or interactive messages' },\n          { key: 'askQuestion', label: 'Ask a Question', icon: 'HelpCircle', type: 'inputs', color: 'hsl(221 83% 53%)', description: 'Ask a question and wait for a user reply' },\n          { key: 'sendTemplate', label: 'Send a Template', icon: 'Mailbox', type: 'messaging', color: 'hsl(16 84% 62%)', description: 'Send a pre-approved template message', channels: ['whatsapp'] },\n      ]\n    },\n    {\n      key: 'logic',\n      title: 'Logic & Flow',\n      items: [\n          { key: 'condition', label: 'Set a Condition', icon: 'GitFork', type: 'logic', color: 'hsl(262 83% 58%)', description: 'Branch the flow based on conditions' },\n          { key: 'delay', label: 'Add a Delay', icon: 'Timer', type: 'logic', color: 'hsl(262 83% 58%)', description: 'Pause the flow for a specific duration' },\n          { key: 'updateAttribute', label: 'Update Attribute', icon: 'PenSquare', type: 'logic', color: 'hsl(262 83% 58%)', description: 'Update a contact or flow variable' },\n          { key: 'goto', label: 'Go to another step', icon: 'MoveRight', type: 'logic', color: 'hsl(262 83% 58%)', description: 'Jump to another node in the flow' },\n          { key: 'end', label: 'End of Flow', icon: 'FlagOff', type: 'end', color: 'hsl(262 83% 58%)', description: 'Explicitly terminate the flow' },\n      ]\n    },\n    {\n      key: 'integrations',\n      title: 'Integrations',\n      items: [\n          { key: 'apiCallout', label: 'Webhook', icon: 'Webhook', type: 'integrations', color: 'hsl(346.8 77.2% 49.8%)', description: 'Make an HTTP request to an external service' },\n          { key: 'googleSheets', label: 'Google Sheets', icon: 'Table', type: 'integrations', color: 'hsl(142.1 76.2% 36.3%)', description: 'Append a row to a Google Sheet' },\n      ]\n    }\n  ]\n  "],"names":[],"mappings":"AAAA,sCAAsC;AACtC,kDAAkD;AAClD,yFAAyF;;;;AA2ClF,MAAM,eAAoC;IAC7C;QACE,KAAK;QACL,OAAO;QACP,OAAO;YACH;gBAAE,KAAK;gBAAW,OAAO;gBAAY,MAAM;gBAAU,MAAM;gBAAc,OAAO;gBAAoB,aAAa;YAAkC;YACnJ;gBAAE,KAAK;gBAAkB,OAAO;gBAAmB,MAAM;gBAAc,MAAM;gBAAc,OAAO;gBAAoB,aAAa;YAAqC;SAC3K;IACH;IACA;QACE,KAAK;QACL,OAAO;QACP,OAAO;YACH;gBAAE,KAAK;gBAAW,OAAO;gBAAkB,MAAM;gBAAQ,MAAM;gBAAa,OAAO;gBAAmB,aAAa;YAA4C;YAC/J;gBAAE,KAAK;gBAAe,OAAO;gBAAkB,MAAM;gBAAc,MAAM;gBAAU,OAAO;gBAAoB,aAAa;YAA2C;YACtK;gBAAE,KAAK;gBAAgB,OAAO;gBAAmB,MAAM;gBAAW,MAAM;gBAAa,OAAO;gBAAmB,aAAa;gBAAwC,UAAU;oBAAC;iBAAW;YAAC;SAC9L;IACH;IACA;QACE,KAAK;QACL,OAAO;QACP,OAAO;YACH;gBAAE,KAAK;gBAAa,OAAO;gBAAmB,MAAM;gBAAW,MAAM;gBAAS,OAAO;gBAAoB,aAAa;YAAsC;YAC5J;gBAAE,KAAK;gBAAS,OAAO;gBAAe,MAAM;gBAAS,MAAM;gBAAS,OAAO;gBAAoB,aAAa;YAAyC;YACrJ;gBAAE,KAAK;gBAAmB,OAAO;gBAAoB,MAAM;gBAAa,MAAM;gBAAS,OAAO;gBAAoB,aAAa;YAAoC;YACnK;gBAAE,KAAK;gBAAQ,OAAO;gBAAsB,MAAM;gBAAa,MAAM;gBAAS,OAAO;gBAAoB,aAAa;YAAmC;YACzJ;gBAAE,KAAK;gBAAO,OAAO;gBAAe,MAAM;gBAAW,MAAM;gBAAO,OAAO;gBAAoB,aAAa;YAAgC;SAC7I;IACH;IACA;QACE,KAAK;QACL,OAAO;QACP,OAAO;YACH;gBAAE,KAAK;gBAAc,OAAO;gBAAW,MAAM;gBAAW,MAAM;gBAAgB,OAAO;gBAA0B,aAAa;YAA8C;YAC1K;gBAAE,KAAK;gBAAgB,OAAO;gBAAiB,MAAM;gBAAS,MAAM;gBAAgB,OAAO;gBAA0B,aAAa;YAAiC;SACtK;IACH;CACD","debugId":null}},
    {"offset": {"line": 913, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/SidebarPalette/SidebarPalette.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { useMemo } from 'react';\nimport { SECTION_DATA, ItemDefinition, PaletteItemPayload, Channel } from './sections-data';\nimport * as LucideIcons from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n\nexport type SidebarPaletteProps = {\n  onDragStart: (e: React.DragEvent, item: PaletteItemPayload) => void;\n  onItemClick?: (item: PaletteItemPayload) => void;\n  filterChannels?: Channel[];\n  className?: string;\n};\n\nexport default function SidebarPalette({\n  onDragStart,\n  onItemClick,\n  filterChannels,\n  className,\n}: SidebarPaletteProps) {\n  \n  const allItems = useMemo<ItemDefinition[]>(() => {\n    let items: ItemDefinition[] = SECTION_DATA.flatMap(sec => sec.items);\n    if (!filterChannels || filterChannels.length === 0) return items;\n    \n    const allowed = new Set(filterChannels);\n    return items.filter((it) => !it.channels || it.channels.some((c) => allowed.has(c)));\n  }, [filterChannels]);\n\n\n  function toPayload(it: ItemDefinition): PaletteItemPayload {\n    return { key: it.key, label: it.label, icon: it.icon as string, type: it.type, color: it.color, description: it.description };\n  }\n\n\n  function handleDragStart(e: React.DragEvent, item: ItemDefinition) {\n    const payload = toPayload(item);\n    e.dataTransfer.effectAllowed = 'copy';\n    e.dataTransfer.setData('application/x-flow-node', JSON.stringify(payload));\n    e.dataTransfer.setData('text/plain', item.label);\n\n    const ghost = document.createElement('div');\n    ghost.className = \"fixed top-0 left-0 pointer-events-none p-3 rounded-lg shadow-xl flex items-center gap-3 z-[9999]\";\n    ghost.style.background = 'white';\n    ghost.style.color = 'black';\n    ghost.style.fontWeight = '600';\n    ghost.innerHTML = `<span role=\"img\" aria-hidden=\"true\" class=\"text-2xl\">${item.icon}</span> <div><p class=\"text-base\">${item.label}</p><small class=\"text-sm opacity-80 font-normal\">${item.description || ''}</small></div>`;\n    document.body.appendChild(ghost);\n    e.dataTransfer.setDragImage(ghost, -10, -10);\n    setTimeout(() => document.body.removeChild(ghost), 0);\n    \n    onDragStart(e, payload);\n  }\n\n  function handleItemClick(item: ItemDefinition) {\n    const payload = toPayload(item);\n    onItemClick?.(payload);\n  }\n  \n  return (\n    <nav className={cn(\"h-full flex flex-col gap-6 overflow-y-auto\", className)} aria-label=\"Node palette\">\n        {SECTION_DATA.map(section => (\n            <div key={section.key}>\n                <h3 className=\"text-sm font-semibold text-muted-foreground mb-3 px-2\">{section.title}</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                    {section.items.map(item => {\n                        const Icon = typeof item.icon === 'string' ? (LucideIcons as any)[item.icon] ?? LucideIcons.HelpCircle : item.icon;\n                        const isVisible = !filterChannels || filterChannels.length === 0 || !item.channels || item.channels.some(c => filterChannels.includes(c));\n                        \n                        if (!isVisible) return null;\n\n                        return (\n                        <button\n                            key={item.key}\n                            type=\"button\"\n                            className=\"flex flex-col items-center justify-center text-center gap-2 p-3 rounded-lg bg-card text-card-foreground border border-border cursor-grab user-select-none transition-all duration-200 hover:shadow-md hover:border-black/10 active:cursor-grabbing active:scale-[0.98] shadow-sm\"\n                            style={{'--item-color': item.color} as React.CSSProperties}\n                            draggable\n                            onDragStart={(e) => handleDragStart(e, item)}\n                            onClick={() => handleItemClick(item)}\n                            aria-label={`Add ${item.label}`}\n                            title={`${item.label}${item.description ? ` - ${item.description}`:''}`}\n                        >\n                            <div className=\"w-10 h-10 rounded-full grid place-items-center bg-purple-100 flex-shrink-0\">\n                                <Icon className=\"w-5 h-5 text-purple-600\" />\n                            </div>\n                            <span className=\"text-sm font-medium leading-snug\">{item.label}</span>\n                        </button>\n                        )\n                    })}\n                </div>\n            </div>\n        ))}\n    </nav>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1068, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/SidebarPalette/index.ts"],"sourcesContent":["export { default } from './SidebarPalette'\nexport type { SidebarPaletteProps } from './SidebarPalette'\nexport type {\n  NodeCategory,\n  Channel,\n  PaletteItemPayload,\n  SectionDefinition,\n  ItemDefinition\n} from './sections-data'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 1084, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/CanvasWithLayoutWorker/canvas-layout.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"badge\": \"canvas-layout-module__QWzRrW__badge\",\n  \"baseNode\": \"canvas-layout-module__QWzRrW__baseNode\",\n  \"branchCondition\": \"canvas-layout-module__QWzRrW__branchCondition\",\n  \"branchRow\": \"canvas-layout-module__QWzRrW__branchRow\",\n  \"btn\": \"canvas-layout-module__QWzRrW__btn\",\n  \"canvas\": \"canvas-layout-module__QWzRrW__canvas\",\n  \"conditionBody\": \"canvas-layout-module__QWzRrW__conditionBody\",\n  \"conditionGroup\": \"canvas-layout-module__QWzRrW__conditionGroup\",\n  \"controls\": \"canvas-layout-module__QWzRrW__controls\",\n  \"deleteButton\": \"canvas-layout-module__QWzRrW__deleteButton\",\n  \"groupBody\": \"canvas-layout-module__QWzRrW__groupBody\",\n  \"groupBox\": \"canvas-layout-module__QWzRrW__groupBox\",\n  \"groupHeader\": \"canvas-layout-module__QWzRrW__groupHeader\",\n  \"handle\": \"canvas-layout-module__QWzRrW__handle\",\n  \"handleLabel\": \"canvas-layout-module__QWzRrW__handleLabel\",\n  \"headerLeft\": \"canvas-layout-module__QWzRrW__headerLeft\",\n  \"messageButtons\": \"canvas-layout-module__QWzRrW__messageButtons\",\n  \"messageContent\": \"canvas-layout-module__QWzRrW__messageContent\",\n  \"messageNodeBody\": \"canvas-layout-module__QWzRrW__messageNodeBody\",\n  \"messageTextarea\": \"canvas-layout-module__QWzRrW__messageTextarea\",\n  \"nodeBody\": \"canvas-layout-module__QWzRrW__nodeBody\",\n  \"nodeHeader\": \"canvas-layout-module__QWzRrW__nodeHeader\",\n  \"nodeIcon\": \"canvas-layout-module__QWzRrW__nodeIcon\",\n  \"nodeIconWrapper\": \"canvas-layout-module__QWzRrW__nodeIconWrapper\",\n  \"nodeMore\": \"canvas-layout-module__QWzRrW__nodeMore\",\n  \"nodeTitle\": \"canvas-layout-module__QWzRrW__nodeTitle\",\n  \"orDivider\": \"canvas-layout-module__QWzRrW__orDivider\",\n  \"panel\": \"canvas-layout-module__QWzRrW__panel\",\n  \"panelBtn\": \"canvas-layout-module__QWzRrW__panelBtn\",\n  \"root\": \"canvas-layout-module__QWzRrW__root\",\n  \"spinner\": \"canvas-layout-module__QWzRrW__spinner\",\n  \"subflow\": \"canvas-layout-module__QWzRrW__subflow\",\n  \"toolbar\": \"canvas-layout-module__QWzRrW__toolbar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1122, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/Presence/presence.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"av\": \"presence-module__49ZQPq__av\",\n  \"banner\": \"presence-module__49ZQPq__banner\",\n  \"cursor\": \"presence-module__49ZQPq__cursor\",\n  \"dot\": \"presence-module__49ZQPq__dot\",\n  \"more\": \"presence-module__49ZQPq__more\",\n  \"stack\": \"presence-module__49ZQPq__stack\",\n  \"tag\": \"presence-module__49ZQPq__tag\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/Presence/NodeAvatars.tsx"],"sourcesContent":["'use client'\nimport React, { useCallback, useMemo } from 'react'\nimport styles from './presence.module.css'\nimport { useAwarenessStates, usePresence } from '@/presence/PresenceProvider'\nimport type { AwarenessState } from '@/presence/types'\nimport { initials } from '@/presence/color'\n\nexport default function NodeAvatars({ nodeId, max = 3 }: { nodeId: string; max?: number }) {\n  const { self } = usePresence()\n  \n  const mapFn = useCallback((s: AwarenessState) => {\n    if (!s.user) return null\n    if (s.user.id === self.id) return null\n    if (s.selection?.nodeId !== nodeId) return null\n    return { id: s.user.id, name: s.user.name, color: s.user.color }\n  }, [self.id, nodeId]);\n\n  const users = useAwarenessStates<{ id: string; name: string; color: string }>(mapFn)\n\n  const stack = useMemo(() => users.slice(0, max), [users, max])\n  const more = Math.max(0, users.length - stack.length)\n\n  if (users.length === 0) return null\n  return (\n    <div className={styles.stack}>\n      {stack.map((u) => (\n        <div key={u.id} className={styles.av} style={{ background: u.color }} title={u.name}>\n          {initials(u.name)}\n        </div>\n      ))}\n      {more > 0 && <div className={`${styles.av} ${styles.more}`} title={`${more} more`}>+{more}</div>}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;;;AALA;;;;;AAOe,SAAS,YAAY,KAAqD;QAArD,EAAE,MAAM,EAAE,MAAM,CAAC,EAAoC,GAArD;;IAClC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,uIAAA,CAAA,cAAW,AAAD;IAE3B,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;0CAAE,CAAC;gBAGrB;YAFJ,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO;YACpB,IAAI,EAAE,IAAI,CAAC,EAAE,KAAK,KAAK,EAAE,EAAE,OAAO;YAClC,IAAI,EAAA,eAAA,EAAE,SAAS,cAAX,mCAAA,aAAa,MAAM,MAAK,QAAQ,OAAO;YAC3C,OAAO;gBAAE,IAAI,EAAE,IAAI,CAAC,EAAE;gBAAE,MAAM,EAAE,IAAI,CAAC,IAAI;gBAAE,OAAO,EAAE,IAAI,CAAC,KAAK;YAAC;QACjE;yCAAG;QAAC,KAAK,EAAE;QAAE;KAAO;IAEpB,MAAM,QAAQ,CAAA,GAAA,uIAAA,CAAA,qBAAkB,AAAD,EAA+C;IAE9E,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;sCAAE,IAAM,MAAM,KAAK,CAAC,GAAG;qCAAM;QAAC;QAAO;KAAI;IAC7D,MAAM,OAAO,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,GAAG,MAAM,MAAM;IAEpD,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;IAC/B,qBACE,6LAAC;QAAI,WAAW,wJAAA,CAAA,UAAM,CAAC,KAAK;;YACzB,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;oBAAe,WAAW,wJAAA,CAAA,UAAM,CAAC,EAAE;oBAAE,OAAO;wBAAE,YAAY,EAAE,KAAK;oBAAC;oBAAG,OAAO,EAAE,IAAI;8BAChF,CAAA,GAAA,2HAAA,CAAA,WAAQ,AAAD,EAAE,EAAE,IAAI;mBADR,EAAE,EAAE;;;;;YAIf,OAAO,mBAAK,6LAAC;gBAAI,WAAW,AAAC,GAAe,OAAb,wJAAA,CAAA,UAAM,CAAC,EAAE,EAAC,KAAe,OAAZ,wJAAA,CAAA,UAAM,CAAC,IAAI;gBAAI,OAAO,AAAC,GAAO,OAAL,MAAK;;oBAAQ;oBAAE;;;;;;;;;;;;;AAG3F;GA1BwB;;QACL,uIAAA,CAAA,cAAW;QASd,uIAAA,CAAA,qBAAkB;;;KAVV","debugId":null}},
    {"offset": {"line": 1233, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/partials/ImageAttachmentModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { ImageIcon } from 'lucide-react';\n\ntype Media = { type: 'image', url: string, name?: string };\n\ntype ImageAttachmentModalProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (media: Media) => void;\n  onDelete: () => void;\n  media?: Media;\n};\n\nexport default function ImageAttachmentModal({\n  isOpen,\n  onClose,\n  onSave,\n  onDelete,\n  media\n}: ImageAttachmentModalProps) {\n  const [url, setUrl] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (media) {\n      setUrl(media.url);\n    } else {\n      setUrl('');\n    }\n  }, [media, isOpen]);\n\n  const handleSave = () => {\n    if (!url) return;\n    onSave({ type: 'image', url });\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setUrl(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Attach Image</DialogTitle>\n          <DialogDescription>Add an image to your message. Provide a URL or upload a file.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n            <div className=\"flex items-center justify-center h-48 bg-muted rounded-md overflow-hidden\">\n                {url ? \n                    // eslint-disable-next-line @next/next/no-img-element\n                    <img src={url} alt=\"Image preview\" width={200} height={200} className=\"object-contain max-h-full\" /> : \n                    <ImageIcon className=\"w-16 h-16 text-muted-foreground\" />\n                }\n            </div>\n            <div className=\"grid gap-2\">\n                <Label htmlFor=\"image-url\">Image URL</Label>\n                <Input id=\"image-url\" value={url} onChange={e => setUrl(e.target.value)} placeholder=\"https://placehold.co/600x400.png\" />\n            </div>\n            <div className=\"text-center text-sm text-muted-foreground\">or</div>\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleFileChange}\n                className=\"hidden\"\n                accept=\"image/*\"\n            />\n            <Button variant=\"outline\" type=\"button\" onClick={handleUploadClick}>Upload from device</Button>\n        </div>\n        <DialogFooter className=\"justify-between\">\n            <div>\n              {media && <Button variant=\"destructive\" onClick={onDelete}>Delete</Button>}\n            </div>\n            <div className=\"flex gap-2\">\n              <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n              <Button onClick={handleSave} disabled={!url}>Save</Button>\n            </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAYe,SAAS,qBAAqB,KAMjB;QANiB,EAC3C,MAAM,EACN,OAAO,EACP,MAAM,EACN,QAAQ,EACR,KAAK,EACqB,GANiB;;IAO3C,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/B,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAoB;IAE9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,IAAI,OAAO;gBACT,OAAO,MAAM,GAAG;YAClB,OAAO;gBACL,OAAO;YACT;QACF;yCAAG;QAAC;QAAO;KAAO;IAElB,MAAM,aAAa;QACjB,IAAI,CAAC,KAAK;QACV,OAAO;YAAE,MAAM;YAAS;QAAI;IAC9B;IAEA,MAAM,oBAAoB;YACxB;SAAA,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,KAAK;IAC7B;IAEA,MAAM,mBAAmB,CAAC;YACX;QAAb,MAAM,QAAO,sBAAA,MAAM,MAAM,CAAC,KAAK,cAAlB,0CAAA,mBAAoB,CAAC,EAAE;QACpC,IAAI,MAAM;YACR,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;oBACR;gBAAP,QAAO,YAAA,EAAE,MAAM,cAAR,gCAAA,UAAU,MAAM;YACzB;YACA,OAAO,aAAa,CAAC;QACvB;IACF;IAGA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACrD,cAAA,6LAAC,qIAAA,CAAA,gBAAa;;8BACZ,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAErB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACV,MACG,qDAAqD;0CACrD,6LAAC;gCAAI,KAAK;gCAAK,KAAI;gCAAgB,OAAO;gCAAK,QAAQ;gCAAK,WAAU;;;;;qDACtE,6LAAC,2MAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;;;;;;sCAG7B,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,oIAAA,CAAA,QAAK;oCAAC,SAAQ;8CAAY;;;;;;8CAC3B,6LAAC,oIAAA,CAAA,QAAK;oCAAC,IAAG;oCAAY,OAAO;oCAAK,UAAU,CAAA,IAAK,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAG,aAAY;;;;;;;;;;;;sCAEzF,6LAAC;4BAAI,WAAU;sCAA4C;;;;;;sCAC3D,6LAAC;4BACG,MAAK;4BACL,KAAK;4BACL,UAAU;4BACV,WAAU;4BACV,QAAO;;;;;;sCAEX,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAS,SAAS;sCAAmB;;;;;;;;;;;;8BAExE,6LAAC,qIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACpB,6LAAC;sCACE,uBAAS,6LAAC,qIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAc,SAAS;0CAAU;;;;;;;;;;;sCAE7D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,SAAS;8CAAS;;;;;;8CAC1C,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAY,UAAU,CAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3D;GAhFwB;KAAA","debugId":null}},
    {"offset": {"line": 1484, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/partials/VideoAttachmentModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { VideoIcon } from 'lucide-react';\n\ntype Media = { type: 'video', url: string, name?: string };\n\ntype VideoAttachmentModalProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (media: Media) => void;\n  onDelete: () => void;\n  media?: Media;\n};\n\nexport default function VideoAttachmentModal({\n  isOpen,\n  onClose,\n  onSave,\n  onDelete,\n  media\n}: VideoAttachmentModalProps) {\n  const [url, setUrl] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (media) {\n      setUrl(media.url);\n    } else {\n      setUrl('');\n    }\n  }, [media, isOpen]);\n\n  const handleSave = () => {\n    if (!url) return;\n    onSave({ type: 'video', url });\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setUrl(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Attach Video</DialogTitle>\n          <DialogDescription>Add a video to your message. Provide a URL or upload a file.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n          <div className=\"flex items-center justify-center h-48 bg-muted rounded-md overflow-hidden\">\n            {url ? \n              <video src={url} controls className=\"w-full h-full object-contain\" /> : \n              <VideoIcon className=\"w-16 h-16 text-muted-foreground\" />\n            }\n          </div>\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"video-url\">Video URL</Label>\n            <Input id=\"video-url\" value={url} onChange={e => setUrl(e.target.value)} placeholder=\"https://example.com/video.mp4\" />\n          </div>\n          <div className=\"text-center text-sm text-muted-foreground\">or</div>\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\"video/*\"\n          />\n          <Button variant=\"outline\" type=\"button\" onClick={handleUploadClick}>Upload from device</Button>\n        </div>\n        <DialogFooter className=\"justify-between\">\n          <div>\n            {media && <Button variant=\"destructive\" onClick={onDelete}>Delete</Button>}\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n            <Button onClick={handleSave} disabled={!url}>Save</Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAYe,SAAS,qBAAqB,KAMjB;QANiB,EAC3C,MAAM,EACN,OAAO,EACP,MAAM,EACN,QAAQ,EACR,KAAK,EACqB,GANiB;;IAO3C,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/B,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAoB;IAE9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,IAAI,OAAO;gBACT,OAAO,MAAM,GAAG;YAClB,OAAO;gBACL,OAAO;YACT;QACF;yCAAG;QAAC;QAAO;KAAO;IAElB,MAAM,aAAa;QACjB,IAAI,CAAC,KAAK;QACV,OAAO;YAAE,MAAM;YAAS;QAAI;IAC9B;IAEA,MAAM,oBAAoB;YACxB;SAAA,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,KAAK;IAC7B;IAEA,MAAM,mBAAmB,CAAC;YACX;QAAb,MAAM,QAAO,sBAAA,MAAM,MAAM,CAAC,KAAK,cAAlB,0CAAA,mBAAoB,CAAC,EAAE;QACpC,IAAI,MAAM;YACR,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;oBACR;gBAAP,QAAO,YAAA,EAAE,MAAM,cAAR,gCAAA,UAAU,MAAM;YACzB;YACA,OAAO,aAAa,CAAC;QACvB;IACF;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACrD,cAAA,6LAAC,qIAAA,CAAA,gBAAa;;8BACZ,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAErB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACZ,oBACC,6LAAC;gCAAM,KAAK;gCAAK,QAAQ;gCAAC,WAAU;;;;;qDACpC,6LAAC,2MAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;;;;;;sCAGzB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,oIAAA,CAAA,QAAK;oCAAC,SAAQ;8CAAY;;;;;;8CAC3B,6LAAC,oIAAA,CAAA,QAAK;oCAAC,IAAG;oCAAY,OAAO;oCAAK,UAAU,CAAA,IAAK,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAG,aAAY;;;;;;;;;;;;sCAEvF,6LAAC;4BAAI,WAAU;sCAA4C;;;;;;sCAC3D,6LAAC;4BACC,MAAK;4BACL,KAAK;4BACL,UAAU;4BACV,WAAU;4BACV,QAAO;;;;;;sCAET,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAS,SAAS;sCAAmB;;;;;;;;;;;;8BAEtE,6LAAC,qIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,6LAAC;sCACE,uBAAS,6LAAC,qIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAc,SAAS;0CAAU;;;;;;;;;;;sCAE7D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,SAAS;8CAAS;;;;;;8CAC1C,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAY,UAAU,CAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzD;GA9EwB;KAAA","debugId":null}},
    {"offset": {"line": 1732, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/partials/DocumentAttachmentModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { File, FileText, FileSpreadsheet, FileJson, FileQuestion } from 'lucide-react';\n\ntype Media = { type: 'document', url: string, name?: string };\n\ntype DocumentAttachmentModalProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (media: Media) => void;\n  onDelete: () => void;\n  media?: Media;\n};\n\nconst getFileIcon = (fileName?: string) => {\n    if (!fileName) return <File className=\"w-16 h-16 text-muted-foreground\" />;\n    const ext = fileName.split('.').pop()?.toLowerCase();\n    switch (ext) {\n        case 'pdf': return <FileText className=\"w-16 h-16 text-red-500\" />;\n        case 'docx': return <FileText className=\"w-16 h-16 text-blue-500\" />;\n        case 'txt': return <FileText className=\"w-16 h-16 text-gray-500\" />;\n        case 'csv':\n        case 'xlsx': return <FileSpreadsheet className=\"w-16 h-16 text-green-500\" />;\n        case 'json': return <FileJson className=\"w-16 h-16 text-yellow-500\" />;\n        default: return <FileQuestion className=\"w-16 h-16 text-muted-foreground\" />;\n    }\n}\n\nexport default function DocumentAttachmentModal({\n  isOpen,\n  onClose,\n  onSave,\n  onDelete,\n  media\n}: DocumentAttachmentModalProps) {\n  const [url, setUrl] = useState('');\n  const [name, setName] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (media) {\n      setUrl(media.url);\n      setName(media.name || '');\n    } else {\n      setUrl('');\n      setName('');\n    }\n  }, [media, isOpen]);\n\n  const handleSave = () => {\n    if (!url) return;\n    onSave({ type: 'document', url, name });\n  };\n  \n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setUrl(e.target?.result as string);\n        setName(file.name);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Attach Document</DialogTitle>\n          <DialogDescription>Add a document to your message. Provide a URL or upload a file.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n          <div className=\"flex items-center justify-center h-40 bg-muted rounded-md\">\n            {url ? getFileIcon(name || url) : <File className=\"w-16 h-16 text-muted-foreground\" />}\n          </div>\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"doc-url\">Document URL</Label>\n            <Input id=\"doc-url\" value={url} onChange={(e) => setUrl(e.target.value)} placeholder=\"https://example.com/document.pdf\" />\n          </div>\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"doc-name\">File Name (optional)</Label>\n            <Input id=\"doc-name\" value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Annual Report.pdf\" />\n          </div>\n          <div className=\"text-center text-sm text-muted-foreground\">or</div>\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\".pdf,.doc,.docx,.txt,.csv,.xlsx,.json\"\n          />\n          <Button variant=\"outline\" type=\"button\" onClick={handleUploadClick}>Upload from device</Button>\n        </div>\n        <DialogFooter className=\"justify-between\">\n          <div>\n            {media && <Button variant=\"destructive\" onClick={onDelete}>Delete</Button>}\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n            <Button onClick={handleSave} disabled={!url}>Save</Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2070, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/partials/AudioAttachmentModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Music } from 'lucide-react';\n\ntype Media = { type: 'audio', url: string, name?: string };\n\ntype AudioAttachmentModalProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (media: Media) => void;\n  onDelete: () => void;\n  media?: Media;\n};\n\nexport default function AudioAttachmentModal({\n  isOpen,\n  onClose,\n  onSave,\n  onDelete,\n  media\n}: AudioAttachmentModalProps) {\n  const [url, setUrl] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (media) {\n      setUrl(media.url);\n    } else {\n      setUrl('');\n    }\n  }, [media, isOpen]);\n\n  const handleSave = () => {\n    if (!url) return;\n    onSave({ type: 'audio', url });\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setUrl(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Attach Audio</DialogTitle>\n          <DialogDescription>Add an audio file to your message. Provide a URL or upload a file.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n          <div className=\"flex items-center justify-center h-48 bg-muted rounded-md overflow-hidden\">\n            {url ? \n              <audio src={url} controls className=\"w-full\" /> : \n              <Music className=\"w-16 h-16 text-muted-foreground\" />\n            }\n          </div>\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"audio-url\">Audio URL</Label>\n            <Input id=\"audio-url\" value={url} onChange={e => setUrl(e.target.value)} placeholder=\"https://example.com/audio.mp3\" />\n          </div>\n          <div className=\"text-center text-sm text-muted-foreground\">or</div>\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\"audio/*\"\n          />\n          <Button variant=\"outline\" type=\"button\" onClick={handleUploadClick}>Upload from device</Button>\n        </div>\n        <DialogFooter className=\"justify-between\">\n          <div>\n            {media && <Button variant=\"destructive\" onClick={onDelete}>Delete</Button>}\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n            <Button onClick={handleSave} disabled={!url}>Save</Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAYe,SAAS,qBAAqB,KAMjB;QANiB,EAC3C,MAAM,EACN,OAAO,EACP,MAAM,EACN,QAAQ,EACR,KAAK,EACqB,GANiB;;IAO3C,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/B,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAoB;IAE9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,IAAI,OAAO;gBACT,OAAO,MAAM,GAAG;YAClB,OAAO;gBACL,OAAO;YACT;QACF;yCAAG;QAAC;QAAO;KAAO;IAElB,MAAM,aAAa;QACjB,IAAI,CAAC,KAAK;QACV,OAAO;YAAE,MAAM;YAAS;QAAI;IAC9B;IAEA,MAAM,oBAAoB;YACxB;SAAA,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,KAAK;IAC7B;IAEA,MAAM,mBAAmB,CAAC;YACX;QAAb,MAAM,QAAO,sBAAA,MAAM,MAAM,CAAC,KAAK,cAAlB,0CAAA,mBAAoB,CAAC,EAAE;QACpC,IAAI,MAAM;YACR,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;oBACR;gBAAP,QAAO,YAAA,EAAE,MAAM,cAAR,gCAAA,UAAU,MAAM;YACzB;YACA,OAAO,aAAa,CAAC;QACvB;IACF;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACrD,cAAA,6LAAC,qIAAA,CAAA,gBAAa;;8BACZ,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAErB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACZ,oBACC,6LAAC;gCAAM,KAAK;gCAAK,QAAQ;gCAAC,WAAU;;;;;qDACpC,6LAAC,uMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;;;;;;sCAGrB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,oIAAA,CAAA,QAAK;oCAAC,SAAQ;8CAAY;;;;;;8CAC3B,6LAAC,oIAAA,CAAA,QAAK;oCAAC,IAAG;oCAAY,OAAO;oCAAK,UAAU,CAAA,IAAK,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAG,aAAY;;;;;;;;;;;;sCAEvF,6LAAC;4BAAI,WAAU;sCAA4C;;;;;;sCAC3D,6LAAC;4BACC,MAAK;4BACL,KAAK;4BACL,UAAU;4BACV,WAAU;4BACV,QAAO;;;;;;sCAET,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAS,SAAS;sCAAmB;;;;;;;;;;;;8BAEtE,6LAAC,qIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,6LAAC;sCACE,uBAAS,6LAAC,qIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAc,SAAS;0CAAU;;;;;;;;;;;sCAE7D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,SAAS;8CAAS;;;;;;8CAC1C,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAY,UAAU,CAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzD;GA9EwB;KAAA","debugId":null}},
    {"offset": {"line": 2318, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2571, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/store/history.ts"],"sourcesContent":["import { create } from 'zustand'\nimport { undo as flowUndo, redo as flowRedo } from './flow';\n\ninterface HistoryState {\n  canUndo: boolean\n  canRedo: boolean\n  undo: () => void\n  redo: () => void\n  setCanUndo: (b: boolean) => void\n  setCanRedo: (b: boolean) => void\n}\n\nexport const useHistoryStore = create<HistoryState>((set) => ({\n  canUndo: false,\n  canRedo: false,\n  undo: () => {\n    flowUndo();\n  },\n  redo: () => {\n    flowRedo();\n  },\n  setCanUndo: (b) => set({ canUndo: b }),\n  setCanRedo: (b) => set({ canRedo: b }),\n}))\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAWO,MAAM,kBAAkB,CAAA,GAAA,2JAAA,CAAA,SAAM,AAAD,EAAgB,CAAC,MAAQ,CAAC;QAC5D,SAAS;QACT,SAAS;QACT,MAAM;YACJ,CAAA,GAAA,uHAAA,CAAA,OAAQ,AAAD;QACT;QACA,MAAM;YACJ,CAAA,GAAA,uHAAA,CAAA,OAAQ,AAAD;QACT;QACA,YAAY,CAAC,IAAM,IAAI;gBAAE,SAAS;YAAE;QACpC,YAAY,CAAC,IAAM,IAAI;gBAAE,SAAS;YAAE;IACtC,CAAC","debugId":null}},
    {"offset": {"line": 2603, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/store/flow.ts"],"sourcesContent":["import { create } from 'zustand';\nimport type { Node, Edge, NodeChange, EdgeChange, Connection } from 'reactflow';\nimport { applyNodeChanges, applyEdgeChanges, addEdge } from 'reactflow';\nimport { nanoid } from 'nanoid';\nimport { temporal } from 'zundo';\nimport { useHistoryStore } from './history';\nimport { MarkerType } from 'reactflow';\n\nexport type Channel =\n  | 'whatsapp'\n  | 'sms'\n  | 'email'\n  | 'push'\n  | 'voice'\n  | 'instagram'\n  | 'messenger'\n  | 'webchat'\n  | 'slack'\n  | 'teams'\n  | 'telegram';\nexport type MessageContext = 'template' | 'in-session';\n\nexport interface FlowMeta {\n  id: string;\n  title: string;\n  channels: Channel[];\n  published: boolean;\n  waMessageContext: MessageContext;\n}\n\n// Separate the state structure that needs to be tracked by history\nconst flowSlice = (set: any, get: any) => ({\n  nodes: [] as Node[],\n  edges: [] as Edge[],\n  startNodeId: null as string | null,\n  onNodesChange: (changes: NodeChange[]) => {\n    set({\n      nodes: applyNodeChanges(changes, get().nodes),\n    });\n  },\n  onEdgesChange: (changes: EdgeChange[]) => {\n    set({\n      edges: applyEdgeChanges(changes, get().edges),\n    });\n  },\n  onConnect: (connection: Connection) => {\n    const { edges } = get();\n\n    // Allow multiple connections from the same source handle for condition nodes\n    const sourceNode = get().nodes.find((n: Node) => n.id === connection.source);\n    if (sourceNode?.data.type !== 'logic') {\n        const sourceHandleHasConnection = edges.some(\n          (edge: Edge) => edge.source === connection.source && edge.sourceHandle === connection.sourceHandle\n        );\n\n        if (sourceHandleHasConnection) {\n          console.warn(`Connection from source ${connection.source} (handle: ${connection.sourceHandle}) already exists.`);\n          return; // Abort connection\n        }\n    }\n\n\n    set({\n      edges: addEdge({ ...connection, type: 'bezier', markerEnd: { type: MarkerType.ArrowClosed, width: 20, height: 20 } }, get().edges),\n    });\n  },\n  addNode: (node: Node) => {\n    set({\n      nodes: get().nodes.concat(node),\n    });\n  },\n  deleteNode: (nodeId: string) => {\n    set((state: any) => ({\n      nodes: state.nodes.filter((n: any) => n.id !== nodeId),\n      edges: state.edges.filter((e: any) => e.source !== nodeId && e.target !== nodeId),\n    }));\n  },\n  duplicateNode: (nodeId: string) => {\n    const { nodes } = get();\n    const nodeToDuplicate = nodes.find((n: any) => n.id === nodeId);\n    if (!nodeToDuplicate) return;\n\n    const newNode = {\n      ...nodeToDuplicate,\n      id: nanoid(),\n      position: {\n        x: nodeToDuplicate.position.x + 30,\n        y: nodeToDuplicate.position.y + 30,\n      },\n      selected: false,\n    };\n\n    set({ nodes: [...nodes, newNode] });\n  },\n  setNodes: (nodes: Node[]) => set({ nodes }),\n  setEdges: (edges: Edge[]) => set({ edges }),\n  setStartNode: (nodeId: string | null) => set({ startNodeId: nodeId }),\n});\n\n\n// Create the main store, with a temporal middleware for history\nexport const useFlowStore = create(\n  temporal(flowSlice, {\n    onSave: (_, state) => {\n        const { temporal } = state as any;\n        if (temporal) {\n            const { pastStates, futureStates } = temporal;\n            useHistoryStore.getState().setCanUndo(pastStates.length > 0);\n            useHistoryStore.getState().setCanRedo(futureStates.length > 0);\n        }\n    }\n  })\n);\n\n// --- Non-history state and actions ---\n// These are kept in a separate store to avoid polluting the history.\n\ninterface FlowMetaState {\n    meta: FlowMeta;\n    setTitle: (title: string) => void;\n    setChannels: (channels: Channel[]) => void;\n    setPublished: (published: boolean) => void;\n    setWaContext: (ctx: MessageContext) => void;\n}\n\nexport const useFlowMetaStore = create<FlowMetaState>((set) => ({\n    meta: {\n        id: 'draft-1',\n        title: 'Untitled Flow',\n        channels: ['whatsapp'],\n        published: false,\n        waMessageContext: 'template',\n    },\n    setTitle: (title) => set((s) => ({ meta: { ...s.meta, title: title.trim() || 'Untitled Flow' } })),\n    setChannels: (channels) => set((s) => ({ meta: { ...s.meta, channels } })),\n    setPublished: (published) => set((s) => ({ meta: { ...s.meta, published } })),\n    setWaContext: (waMessageContext) => set((s) => ({ meta: { ...s.meta, waMessageContext } })),\n}));\n\n// Expose undo/redo actions\nexport const undo = () => useFlowStore.temporal.undo();\nexport const redo = () => useFlowStore.temporal.redo();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2755, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,KAA4C;QAA5C,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB,GAA5C;IACb,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 2804, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = \"ScrollArea\"\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Scrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Scrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.Scrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Thumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.Scrollbar>\n))\nScrollBar.displayName = \"ScrollBar\"\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,6JAAA,CAAA,aAAgB,MAGjC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC,6KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,6KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,6KAAA,CAAA,SAA0B;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,6JAAA,CAAA,aAAgB,CAGhC,QAAoD;QAAnD,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO;yBAClD,6LAAC,6KAAA,CAAA,YAA6B;QAC5B,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,6KAAA,CAAA,QAAyB;YAAC,WAAU;;;;;;;;;;;;MAjBnC;AAoBN,UAAU,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2887, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/CanvasWithLayoutWorker/nodes/BaseNode.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { Handle, Position } from 'reactflow'\nimport styles from '../canvas-layout.module.css'\nimport NodeAvatars from '@/components/Presence/NodeAvatars';\nimport { MoreHorizontal, Trash2, Copy, PlayCircle, XCircle } from 'lucide-react';\nimport * as LucideIcons from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport ImageAttachmentModal from '@/components/PropertiesPanel/partials/ImageAttachmentModal';\nimport VideoAttachmentModal from '@/components/PropertiesPanel/partials/VideoAttachmentModal';\nimport DocumentAttachmentModal from '@/components/PropertiesPanel/partials/DocumentAttachmentModal';\nimport AudioAttachmentModal from '@/components/PropertiesPanel/partials/AudioAttachmentModal';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n} from \"@/components/ui/dropdown-menu\"\nimport { useFlowStore } from '@/store/flow';\nimport { Badge } from '@/components/ui/badge';\nimport { ScrollArea } from '@/components/ui/scroll-area';\n\n\nexport type BaseNodeData = {\n  label: string\n  icon?: string\n  description?: string\n  color?: string;\n  type?: string;\n  content?: string;\n  media?: { type: 'image' | 'video' | 'document' | 'audio', url: string, name?: string };\n  branches?: { id: string; label: string; conditions: any[] }[];\n  groups?: { type: 'and' | 'or', conditions: { variable: string, operator: string, value: string }[] }[];\n}\n\nexport default function BaseNode({ id, data, selected }: { id: string; data: BaseNodeData; selected: boolean }) {\n  const [message, setMessage] = useState(data.content || 'Got it! I just need some information from you to look up your order.');\n  const [modal, setModal] = useState<'image' | 'video' | 'document' | 'audio' | null>(null);\n  const { deleteNode, duplicateNode, setStartNode, startNodeId } = useFlowStore();\n  \n  const customStyle = {\n    '--node-color': data.color || 'hsl(var(--primary))'\n  } as React.CSSProperties;\n\n  const Icon = data.icon ? (LucideIcons as any)[data.icon] ?? LucideIcons.HelpCircle : LucideIcons.MessageSquare;\n  \n  const isMessageNode = data.type === 'messaging';\n  const isInputNode = data.type === 'inputs';\n  const isConditionNode = data.type === 'logic';\n  const isStartNode = startNodeId === id;\n\n\n  const onSaveMedia = (media: BaseNodeData['media']) => {\n    // In a real app you'd call a store action here\n    console.log('Saving media for node', id, media);\n    data.media = media;\n    setModal(null);\n  }\n\n  const onDeleteMedia = () => {\n    console.log('Deleting media for node', id);\n    data.media = undefined;\n    setModal(null);\n  }\n\n  const getConditionString = (condition: { variable?: string, operator?: string, value?: string }): string => {\n    if (!condition) return '';\n    return `${condition.variable || ''} ${condition.operator || ''} ${condition.value || ''}`;\n  }\n\n  const hasConditions = data.groups && data.groups.some(g => g.conditions && g.conditions.length > 0);\n\n  return (\n    <div className={styles.baseNode} style={customStyle} aria-selected={selected}>\n       <NodeAvatars nodeId={id} />\n      <div className={styles.nodeHeader}>\n        <div className={styles.headerLeft}>\n            <span className={styles.nodeIconWrapper}>\n                <Icon className={styles.nodeIcon} aria-hidden=\"true\" />\n            </span>\n            <span className={styles.nodeTitle} title={data.label}>{data.label}</span>\n            {isStartNode && <Badge variant=\"secondary\" className=\"ml-2\">Start</Badge>}\n        </div>\n        <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n                <button className={styles.nodeMore}><MoreHorizontal size={18}/></button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n                {isStartNode ? (\n                    <DropdownMenuItem onClick={() => setStartNode(null)}>\n                        <XCircle className=\"mr-2 h-4 w-4\" />\n                        <span>Reset start node</span>\n                    </DropdownMenuItem>\n                ) : (\n                    <DropdownMenuItem onClick={() => setStartNode(id)}>\n                        <PlayCircle className=\"mr-2 h-4 w-4\" />\n                        <span>Set as start node</span>\n                    </DropdownMenuItem>\n                )}\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={() => duplicateNode(id)}>\n                    <Copy className=\"mr-2 h-4 w-4\" />\n                    <span>Copy</span>\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => deleteNode(id)} className=\"text-red-600\">\n                    <Trash2 className=\"mr-2 h-4 w-4\" />\n                    <span>Delete</span>\n                </DropdownMenuItem>\n            </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n      <ScrollArea className=\"max-h-60\">\n        <div className={styles.nodeBody}>\n          {isMessageNode || isInputNode ? (\n            <div className={styles.messageNodeBody}>\n              <div className={styles.messageContent}>\n                <textarea \n                  className={styles.messageTextarea} \n                  value={message} \n                  onChange={(e) => setMessage(e.target.value)}\n                  rows={3}\n                />\n                <button className={styles.deleteButton}><Trash2 size={16} /></button>\n              </div>\n              <div className={styles.messageButtons}>\n                <Button variant=\"outline\" size=\"sm\">Message</Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setModal('image')}>Image</Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setModal('video')}>Video</Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setModal('audio')}>Audio</Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setModal('document')}>Document</Button>\n              </div>\n            </div>\n          ) : isConditionNode ? (\n            <div className={styles.conditionBody}>\n              {hasConditions ? (\n                data.groups?.map((group, groupIndex) => (\n                  <React.Fragment key={groupIndex}>\n                    {groupIndex > 0 && <div className={styles.orDivider}>OR</div>}\n                    <div className={styles.conditionGroup}>\n                      {group.conditions.map((cond, condIndex) => (\n                        <div key={condIndex} className={styles.branchRow}>\n                          <code className={styles.branchCondition} title={getConditionString(cond)}>\n                            {getConditionString(cond)}\n                          </code>\n                        </div>\n                      ))}\n                    </div>\n                  </React.Fragment>\n                ))\n              ) : (\n                 <p>{data.description || 'Define branches in the properties panel.'}</p>\n              )}\n            </div>\n          ) : (\n            <p>{data.description || 'Node description goes here.'}</p>\n          )}\n        </div>\n      </ScrollArea>\n\n      <ImageAttachmentModal \n        isOpen={modal === 'image'}\n        onClose={() => setModal(null)}\n        onSave={onSaveMedia}\n        onDelete={onDeleteMedia}\n        media={data.media?.type === 'image' ? data.media : undefined}\n      />\n      <VideoAttachmentModal \n        isOpen={modal === 'video'}\n        onClose={() => setModal(null)}\n        onSave={onSaveMedia}\n        onDelete={onDeleteMedia}\n        media={data.media?.type === 'video' ? data.media : undefined}\n      />\n      <AudioAttachmentModal\n        isOpen={modal === 'audio'}\n        onClose={() => setModal(null)}\n        onSave={onSaveMedia}\n        onDelete={onDeleteMedia}\n        media={data.media?.type === 'audio' ? data.media : undefined}\n      />\n      <DocumentAttachmentModal\n        isOpen={modal === 'document'}\n        onClose={() => setModal(null)}\n        onSave={onSaveMedia}\n        onDelete={onDeleteMedia}\n        media={data.media?.type === 'document' ? data.media : undefined}\n      />\n\n      <Handle type=\"target\" position={Position.Left} className={styles.handle} />\n      \n      {isConditionNode ? (\n        <>\n           <Handle type=\"source\" position={Position.Right} id=\"true\" className={styles.handle} style={{ top: '33.3%' }} />\n           <div className={styles.handleLabel} style={{ top: '33.3%' }}>True</div>\n           <Handle type=\"source\" position={Position.Right} id=\"false\" className={styles.handle} style={{ top: '66.6%' }} />\n           <div className={styles.handleLabel} style={{ top: '66.6%' }}>False</div>\n        </>\n      ) : isInputNode ? (\n        <>\n            <Handle type=\"source\" position={Position.Right} id=\"reply\" className={styles.handle} style={{ top: '50%' }} />\n             <div className={styles.handleLabel} style={{ top: '50%' }}>Reply</div>\n        </>\n      ) : (\n        <Handle type=\"source\" position={Position.Right} className={styles.handle} />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3492, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/CanvasWithLayoutWorker/nodes/GroupBoxNode.tsx"],"sourcesContent":["import React from 'react'\nimport { NodeResizer } from 'reactflow'\nimport styles from '../canvas-layout.module.css'\n\nexport default function GroupBoxNode({ selected }: { selected: boolean }) {\n  return (\n    <div className={styles.groupBox}>\n      <NodeResizer isVisible={selected} minWidth={240} minHeight={120} />\n      <div className={styles.groupHeader}>Group</div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEe,SAAS,aAAa,KAAmC;QAAnC,EAAE,QAAQ,EAAyB,GAAnC;IACnC,qBACE,6LAAC;QAAI,WAAW,8KAAA,CAAA,UAAM,CAAC,QAAQ;;0BAC7B,6LAAC,0KAAA,CAAA,cAAW;gBAAC,WAAW;gBAAU,UAAU;gBAAK,WAAW;;;;;;0BAC5D,6LAAC;gBAAI,WAAW,8KAAA,CAAA,UAAM,CAAC,WAAW;0BAAE;;;;;;;;;;;;AAG1C;KAPwB","debugId":null}},
    {"offset": {"line": 3542, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/CanvasWithLayoutWorker/nodes/SubflowNode.tsx"],"sourcesContent":["import React from 'react'\nimport { Handle, Position } from 'reactflow'\nimport styles from '../canvas-layout.module.css'\nimport NodeAvatars from '@/components/Presence/NodeAvatars'\n\nexport default function SubflowNode({ id, selected }: { id: string, selected: boolean }) {\n  return (\n    <div className={styles.subflow} aria-selected={selected}>\n      <NodeAvatars nodeId={id} />\n      <div className={styles.nodeHeader}>\n        <span className={styles.nodeIcon} aria-hidden>🗂️</span>\n        <span className={styles.nodeTitle}>Sub‑flow</span>\n      </div>\n      <div className={styles.nodeBody}>Double‑click to drill‑down</div>\n      <Handle type=\"target\" position={Position.Left} className={styles.handle} />\n      <Handle type=\"source\" position={Position.Right} className={styles.handle} />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;AAEe,SAAS,YAAY,KAAmD;QAAnD,EAAE,EAAE,EAAE,QAAQ,EAAqC,GAAnD;IAClC,qBACE,6LAAC;QAAI,WAAW,8KAAA,CAAA,UAAM,CAAC,OAAO;QAAE,iBAAe;;0BAC7C,6LAAC,gJAAA,CAAA,UAAW;gBAAC,QAAQ;;;;;;0BACrB,6LAAC;gBAAI,WAAW,8KAAA,CAAA,UAAM,CAAC,UAAU;;kCAC/B,6LAAC;wBAAK,WAAW,8KAAA,CAAA,UAAM,CAAC,QAAQ;wBAAE,aAAW;kCAAC;;;;;;kCAC9C,6LAAC;wBAAK,WAAW,8KAAA,CAAA,UAAM,CAAC,SAAS;kCAAE;;;;;;;;;;;;0BAErC,6LAAC;gBAAI,WAAW,8KAAA,CAAA,UAAM,CAAC,QAAQ;0BAAE;;;;;;0BACjC,6LAAC,+JAAA,CAAA,SAAM;gBAAC,MAAK;gBAAS,UAAU,+JAAA,CAAA,WAAQ,CAAC,IAAI;gBAAE,WAAW,8KAAA,CAAA,UAAM,CAAC,MAAM;;;;;;0BACvE,6LAAC,+JAAA,CAAA,SAAM;gBAAC,MAAK;gBAAS,UAAU,+JAAA,CAAA,WAAQ,CAAC,KAAK;gBAAE,WAAW,8KAAA,CAAA,UAAM,CAAC,MAAM;;;;;;;;;;;;AAG9E;KAbwB","debugId":null}},
    {"offset": {"line": 3637, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/Presence/LiveCursors.tsx"],"sourcesContent":["'use client'\nimport React, { useCallback, useMemo } from 'react'\nimport { usePresence, useAwarenessStates } from '@/presence/PresenceProvider'\nimport styles from './presence.module.css'\nimport { useStore } from 'reactflow'\nimport type { AwarenessState } from '@/presence/types'\n\nexport default function LiveCursors({ staleMs = 15000 }: { staleMs?: number }) {\n  const { self } = usePresence()\n  const viewport = useStore((s) => s.viewport)\n\n  const mapFn = useCallback((s: AwarenessState) => (s.user && s.user.id !== self.id ? s : null), [self.id]);\n  const others = useAwarenessStates<AwarenessState>(mapFn)\n\n  const fresh = useMemo(() => {\n    const now = Date.now()\n    return others.filter((s) => !!s.cursor && now - (s.cursor!.ts || 0) <= staleMs)\n  }, [others, staleMs])\n\n  if (!viewport) return null;\n\n  return (\n    <>\n      {fresh.map((s) => {\n        if(!s.cursor || !s.user) return null;\n        const { x, y } = s.cursor!\n        const sx = viewport.x + x * viewport.zoom\n        const sy = viewport.y + y * viewport.zoom\n        const color = s.user!.color\n        return (\n          <div key={s.user!.id} className={styles.cursor} style={{ transform: `translate(${sx}px, ${sy}px)` }}>\n            <div className={styles.dot} style={{ background: color }} />\n            <span className={styles.tag} style={{ background: color, color: '#fff' }}>\n              {s.user!.name}\n            </span>\n          </div>\n        )\n      })}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAOe,SAAS,YAAY,KAAyC;QAAzC,EAAE,UAAU,KAAK,EAAwB,GAAzC;;IAClC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,uIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,WAAW,CAAA,GAAA,+JAAA,CAAA,WAAQ,AAAD;0CAAE,CAAC,IAAM,EAAE,QAAQ;;IAE3C,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;0CAAE,CAAC,IAAuB,EAAE,IAAI,IAAI,EAAE,IAAI,CAAC,EAAE,KAAK,KAAK,EAAE,GAAG,IAAI;yCAAO;QAAC,KAAK,EAAE;KAAC;IACxG,MAAM,SAAS,CAAA,GAAA,uIAAA,CAAA,qBAAkB,AAAD,EAAkB;IAElD,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;sCAAE;YACpB,MAAM,MAAM,KAAK,GAAG;YACpB,OAAO,OAAO,MAAM;8CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,MAAM,IAAI,MAAM,CAAC,EAAE,MAAM,CAAE,EAAE,IAAI,CAAC,KAAK;;QACzE;qCAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE;kBACG,MAAM,GAAG,CAAC,CAAC;YACV,IAAG,CAAC,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO;YAChC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,MAAM;YACzB,MAAM,KAAK,SAAS,CAAC,GAAG,IAAI,SAAS,IAAI;YACzC,MAAM,KAAK,SAAS,CAAC,GAAG,IAAI,SAAS,IAAI;YACzC,MAAM,QAAQ,EAAE,IAAI,CAAE,KAAK;YAC3B,qBACE,6LAAC;gBAAqB,WAAW,wJAAA,CAAA,UAAM,CAAC,MAAM;gBAAE,OAAO;oBAAE,WAAW,AAAC,aAAqB,OAAT,IAAG,QAAS,OAAH,IAAG;gBAAK;;kCAChG,6LAAC;wBAAI,WAAW,wJAAA,CAAA,UAAM,CAAC,GAAG;wBAAE,OAAO;4BAAE,YAAY;wBAAM;;;;;;kCACvD,6LAAC;wBAAK,WAAW,wJAAA,CAAA,UAAM,CAAC,GAAG;wBAAE,OAAO;4BAAE,YAAY;4BAAO,OAAO;wBAAO;kCACpE,EAAE,IAAI,CAAE,IAAI;;;;;;;eAHP,EAAE,IAAI,CAAE,EAAE;;;;;QAOxB;;AAGN;GAjCwB;;QACL,uIAAA,CAAA,cAAW;QACX,+JAAA,CAAA,WAAQ;QAGV,uIAAA,CAAA,qBAAkB;;;KALX","debugId":null}},
    {"offset": {"line": 3740, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/CanvasWithLayoutWorker/CanvasWithLayoutWorker.tsx"],"sourcesContent":["'use client';\n\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport ReactFlow, {\n  ReactFlowProvider,\n  addEdge,\n  Background,\n  Connection,\n  Controls,\n  MiniMap,\n  useReactFlow,\n  Node,\n  Edge,\n  ConnectionMode,\n  NodeChange,\n  EdgeChange,\n  Panel,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { nanoid } from 'nanoid';\nimport styles from './canvas-layout.module.css';\nimport BaseNode from './nodes/BaseNode';\nimport GroupBoxNode from './nodes/GroupBoxNode';\nimport SubflowNode from './nodes/SubflowNode';\nimport LiveCursors from '@/components/Presence/LiveCursors';\nimport { usePresence } from '@/presence/PresenceProvider';\nimport { useFlowStore } from '@/store/flow';\nimport type { PaletteItemPayload } from '../SidebarPalette';\n\nconst GRID_SIZE = 20;\n\nconst defaultNodeTypes = {\n  base: BaseNode,\n  group: GroupBoxNode,\n  subflow: SubflowNode,\n};\n\nexport type CanvasWithLayoutWorkerProps = {\n  nodes: Node[];\n  edges: Edge[];\n  onNodesChange: (changes: NodeChange[]) => void;\n  onEdgesChange: (changes: EdgeChange[]) => void;\n  onConnect: (connection: Connection) => void;\n  setNodes: (nodes: Node[]) => void;\n  onNodeDoubleClick?: (event: React.MouseEvent, node: Node) => void;\n  viewportKey?: string;\n};\n\nfunction InnerCanvas({\n  nodes,\n  edges,\n  setNodes,\n  onNodesChange,\n  onEdgesChange,\n  onConnect,\n  onNodeDoubleClick,\n}: CanvasWithLayoutWorkerProps) {\n  const rfRef = useRef<import('reactflow').ReactFlowInstance | null>(null);\n  const { project } = useReactFlow();\n  const { awareness } = usePresence();\n  const { addNode } = useFlowStore();\n\n\n  const onDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'copy';\n  }, []);\n\n  const onDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n      const reactFlowBounds = rfRef.current?.screenToFlowPosition({ x: event.clientX, y: event.clientY });\n      if (!reactFlowBounds) return;\n\n      const data = event.dataTransfer.getData('application/x-flow-node');\n\n      if (typeof data === 'undefined' || !data) {\n        return;\n      }\n\n      const item: PaletteItemPayload = JSON.parse(data);\n\n      const newNode: Node = {\n        id: nanoid(),\n        type: 'base',\n        position: {\n          x: Math.round(reactFlowBounds.x / GRID_SIZE) * GRID_SIZE,\n          y: Math.round(reactFlowBounds.y / GRID_SIZE) * GRID_SIZE,\n        },\n        data: { \n            label: item.label, \n            icon: item.icon,\n            color: item.color,\n            description: item.description,\n            type: item.type,\n        },\n      };\n\n      addNode(newNode);\n    },\n    [project, addNode]\n  );\n\n  const onSelectionChange = useCallback(\n    ({ nodes: selNodes }: { nodes: Node[]; edges: Edge[] }) => {\n      const st = (awareness.getLocalState() as any) || {};\n      const nodeId = selNodes?.[0]?.id;\n      awareness.setLocalState({ ...st, selection: { nodeId, ts: Date.now() } });\n    },\n    [awareness]\n  );\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.canvas} onDrop={onDrop} onDragOver={onDragOver}>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          onInit={(inst) => (rfRef.current = inst)}\n          onSelectionChange={onSelectionChange}\n          onNodeDoubleClick={onNodeDoubleClick}\n          nodeTypes={defaultNodeTypes}\n          connectionMode={ConnectionMode.Loose}\n          snapToGrid\n          snapGrid={[GRID_SIZE, GRID_SIZE]}\n          fitView\n          proOptions={{ hideAttribution: true }}\n        >\n          <Background gap={GRID_SIZE} />\n          <Controls className={styles.controls} />\n          <MiniMap pannable zoomable />\n          <div style={{ position: 'absolute', inset: 0, pointerEvents: 'none', zIndex: 10 }}>\n            <LiveCursors />\n          </div>\n        </ReactFlow>\n      </div>\n    </div>\n  );\n}\n\nexport default function CanvasWithLayoutWorker(props: CanvasWithLayoutWorkerProps) {\n  return (\n    <ReactFlowProvider>\n      <InnerCanvas {...props} />\n    </ReactFlowProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3962, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/CanvasWithLayoutWorker/index.ts"],"sourcesContent":["export { default } from './CanvasWithLayoutWorker';\nexport type { CanvasWithLayoutWorkerProps } from './CanvasWithLayoutWorker';\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 3978, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/PropertiesPanel/properties-panel.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"addBtn\": \"properties-panel-module__zCiPDq__addBtn\",\n  \"badge\": \"properties-panel-module__zCiPDq__badge\",\n  \"body\": \"properties-panel-module__zCiPDq__body\",\n  \"err\": \"properties-panel-module__zCiPDq__err\",\n  \"field\": \"properties-panel-module__zCiPDq__field\",\n  \"footer\": \"properties-panel-module__zCiPDq__footer\",\n  \"hr\": \"properties-panel-module__zCiPDq__hr\",\n  \"infoRow\": \"properties-panel-module__zCiPDq__infoRow\",\n  \"label\": \"properties-panel-module__zCiPDq__label\",\n  \"list\": \"properties-panel-module__zCiPDq__list\",\n  \"listItem\": \"properties-panel-module__zCiPDq__listItem\",\n  \"muted\": \"properties-panel-module__zCiPDq__muted\",\n  \"ok\": \"properties-panel-module__zCiPDq__ok\",\n  \"problemItem\": \"properties-panel-module__zCiPDq__problemItem\",\n  \"problems\": \"properties-panel-module__zCiPDq__problems\",\n  \"removeBtn\": \"properties-panel-module__zCiPDq__removeBtn\",\n  \"root\": \"properties-panel-module__zCiPDq__root\",\n  \"rowHeader\": \"properties-panel-module__zCiPDq__rowHeader\",\n  \"subhead\": \"properties-panel-module__zCiPDq__subhead\",\n  \"tabBody\": \"properties-panel-module__zCiPDq__tabBody\",\n  \"tabContent\": \"properties-panel-module__zCiPDq__tabContent\",\n  \"warn\": \"properties-panel-module__zCiPDq__warn\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 4008, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/types.ts"],"sourcesContent":["import type { Node } from 'reactflow';\nimport type { Channel } from '@/components/HeaderBar';\nimport type { NodeCategory } from '../SidebarPalette';\n\nexport type TabKey =\n  | 'general'\n  | 'message'\n  | 'api'\n  | 'logic'\n  | 'schedule'\n  | 'campaign'\n  | 'ai'\n  | 'handoff'\n  | 'analytics'\n  | 'subflow';\n\nexport const TAB_KEYS: TabKey[] = [\n  'general','message','api','logic', 'ai', 'schedule','campaign','handoff','analytics','subflow'\n];\n\nexport const TABS_FOR_NODE_TYPE: Record<NodeCategory, TabKey[]> = {\n    main_actions: ['message'],\n    operations: ['api'],\n    triggers: [],\n    messaging: ['message'],\n    inputs: ['message'],\n    logic: ['logic'],\n    timing: ['schedule'],\n    integrations: ['api'],\n    outreach: ['campaign'],\n    handoff: ['handoff'],\n    analytics: ['analytics'],\n    automation: ['api'],\n    updates: ['api'],\n    end: [],\n};\n\nexport type MessageContext = 'template' | 'in-session';\n\nexport type PropertiesPanelProps = {\n  /** Selected node (null hides panel). */\n  node: Node | null;\n  /** Called on any form change (debounced). Merge into your node data. */\n  onSave: (nodeId: string, values: Record<string, any>) => void;\n  onClose: () => void;\n  /** WhatsApp message context affects validation; defaults to 'template'. */\n  waContext?: MessageContext;\n  /** Active channels (for conditional UI in Message tab). */\n  channels?: Channel[];\n};\n"],"names":[],"mappings":";;;;AAgBO,MAAM,WAAqB;IAChC;IAAU;IAAU;IAAM;IAAS;IAAM;IAAW;IAAW;IAAU;IAAY;CACtF;AAEM,MAAM,qBAAqD;IAC9D,cAAc;QAAC;KAAU;IACzB,YAAY;QAAC;KAAM;IACnB,UAAU,EAAE;IACZ,WAAW;QAAC;KAAU;IACtB,QAAQ;QAAC;KAAU;IACnB,OAAO;QAAC;KAAQ;IAChB,QAAQ;QAAC;KAAW;IACpB,cAAc;QAAC;KAAM;IACrB,UAAU;QAAC;KAAW;IACtB,SAAS;QAAC;KAAU;IACpB,WAAW;QAAC;KAAY;IACxB,YAAY;QAAC;KAAM;IACnB,SAAS;QAAC;KAAM;IAChB,KAAK,EAAE;AACX","debugId":null}},
    {"offset": {"line": 4073, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/config/whatsapp-rules.ts"],"sourcesContent":["/**\n * WhatsApp rules pulled from partner docs and Meta guidance.\n * We separate Template vs In-Session contexts.\n *\n * Template: up to 10 quick replies and 10 total buttons (incl. CTAs).  (Infobip, Genesys, Twilio)\n * In-session interactive reply-buttons: up to 3.                      (Meta interactive docs)\n *\n * Keep configurable so we can hot-update without redeploy.\n */\nexport const WhatsAppRules = {\n  sessionWindowHours: 24,\n  interactive: {\n    // in-session \"reply buttons\" message type\n    replyButtonsInSessionMax: 3 // Meta interactive reply buttons messages\n  },\n  template: {\n    quickReplyMax: 10,          // partners indicate up to 10 quick replies per template\n    totalButtonsMax: 10,        // total buttons (QR + CTAs) per template\n    ctaLimits: { urlMax: 2, phoneMax: 1, promoMax: 1 }, // typical partner guidance\n    quickReplyLabelMaxChars: 25 // partner guidance ranges 20-25; configurable\n  },\n  listMessage: {\n    optionsMax: 10              // list menu options per message\n  }\n}\n\nexport type WaMessageContext = 'template' | 'in-session'\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;AACM,MAAM,gBAAgB;IAC3B,oBAAoB;IACpB,aAAa;QACX,0CAA0C;QAC1C,0BAA0B,EAAE,0CAA0C;IACxE;IACA,UAAU;QACR,eAAe;QACf,iBAAiB;QACjB,WAAW;YAAE,QAAQ;YAAG,UAAU;YAAG,UAAU;QAAE;QACjD,yBAAyB,GAAG,8CAA8C;IAC5E;IACA,aAAa;QACX,YAAY,GAAgB,gCAAgC;IAC9D;AACF","debugId":null}},
    {"offset": {"line": 4113, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/schemas.ts"],"sourcesContent":["import { z } from 'zod';\nimport { WhatsAppRules } from '@/config/whatsapp-rules';\nimport type { MessageContext } from './types';\n\n// ---- General\nexport const generalSchema = z.object({\n  label: z.string().min(1, 'Label required'),\n  icon: z.string().optional(),\n});\n\n// ---- Message\nexport function messageSchema(waCtx: MessageContext) {\n  const qrCap = waCtx === 'template' ? WhatsAppRules.template.quickReplyMax : WhatsAppRules.interactive.replyButtonsInSessionMax;\n\n  return z.object({\n    text: z.string().min(1, 'Message text required').max(4096),\n    quickReplies: z.array(\n      z.object({\n        id: z.string().min(1),\n        label: z.string()\n          .min(1, 'Label required')\n          .max(WhatsAppRules.template.quickReplyLabelMaxChars, `Max ${WhatsAppRules.template.quickReplyLabelMaxChars} chars`),\n      })\n    ).max(qrCap, `Too many quick replies for ${waCtx}. Max ${qrCap}.`).optional(),\n  });\n}\n\n// ---- API\nexport const apiSchema = z.object({\n    method: z.enum(['GET','POST','PUT','PATCH','DELETE']).default('POST'),\n    url: z.string().url('Valid URL required'),\n    headers: z.array(z.object({ key: z.string().min(1), value: z.string() })).optional(),\n    body: z.string().optional().refine((val) => {\n      if (!val || val.trim() === '') return true;\n      try { JSON.parse(val) } catch { return false }\n      return true;\n    }, 'Body must be valid JSON')\n});\n\n// ---- Logic\nconst conditionSchema = z.object({\n  variable: z.string().min(1, 'Variable is required.'),\n  operator: z.string().min(1, 'Operator is required.'),\n  value: z.string().min(1, 'Value is required.'),\n});\n\nconst conditionGroupSchema = z.object({\n  type: z.enum(['and', 'or']),\n  conditions: z.array(conditionSchema),\n});\n\nexport const logicSchema = z.object({\n    groups: z.array(conditionGroupSchema).min(1, 'At least one condition group is required.'),\n});\n\n\n// ---- Schedule\nexport const hhmm = z.string().regex(/^([01]\\d|2[0-3]):[0-5]\\d$/, 'Use 24h HH:MM');\nexport const dayEnum = z.enum(['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']);\nexport const scheduleSchema = z.object({\n  delay: z.string().optional(),\n  timezone: z.string().default('UTC'),\n  days: z.array(dayEnum).min(1, 'Pick at least one day'),\n  windowStart: hhmm,\n  windowEnd: hhmm,\n  respectQuietHours: z.boolean().default(true),\n});\n\n// ---- Campaign\nexport const channelEnum = z.enum([\n  'whatsapp','sms','email','push','voice','instagram','messenger','webchat','slack','teams','telegram'\n]);\nexport const campaignSchema = z.object({\n  audienceTags: z.array(z.string().min(1)).default([]),\n  channels: z.array(channelEnum).min(1, 'Pick at least one channel'),\n  frequencyCap: z.object({\n    count: z.number().int().min(1).max(100),\n    per: z.enum(['day','week','month']),\n  }),\n});\n\n// ---- AI Assist\nexport const aiSchema = z.object({\n  provider: z.enum(['openai','azure_openai','anthropic','custom']),\n  model: z.string().min(1, 'Model required'),\n  credentialId: z.string().optional(),\n  temperature: z.number().min(0).max(2).default(0.7),\n  prompt: z.string().min(1, 'Prompt required'),\n});\n\n// ---- Handoff\nexport const handoffSchema = z.object({\n  queueId: z.string().optional(),\n  teamId: z.string().optional(),\n  priority: z.enum(['low','normal','high','urgent']).default('normal'),\n});\n\n// ---- Analytics\nexport const kvRow = z.object({ key: z.string().min(1), value: z.string() });\nexport const analyticsSchema = z.object({\n  eventName: z.string().min(1, 'Event name required'),\n  properties: z.array(kvRow).default([]),\n});\n\n// ---- Subflow\nexport const mappingRow = z.object({ var: z.string().min(1), value: z.string().min(1) });\nexport const subflowSchema = z.object({\n  subflowId: z.string().min(1, 'Pick a subflow'),\n  mode: z.enum(['synchronous','fire_and_forget']).default('synchronous'),\n  inputMapping: z.array(mappingRow).default([]),\n  returnMapping: z.array(mappingRow).default([]),\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4282, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4507, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/GeneralTab.tsx"],"sourcesContent":["import React from 'react'\nimport { useFormContext } from 'react-hook-form'\nimport styles from '../properties-panel.module.css'\nimport { Label } from '@/components/ui/label'\nimport { Input } from '@/components/ui/input'\nimport { FormField, FormItem, FormControl, FormMessage } from '@/components/ui/form'\n\nexport default function GeneralTab() {\n  const { control } = useFormContext()\n\n  return (\n    <div className={styles.tabBody}>\n      <FormField\n        control={control}\n        name=\"label\"\n        render={({ field }) => (\n          <FormItem className={styles.field}>\n            <Label>Label</Label>\n            <FormControl>\n              <Input {...field} />\n            </FormControl>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n      <FormField\n        control={control}\n        name=\"icon\"\n        render={({ field }) => (\n          <FormItem className={styles.field}>\n            <Label>Icon (emoji)</Label>\n            <FormControl>\n              <Input {...field} />\n            </FormControl>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEe,SAAS;;IACtB,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,iBAAc,AAAD;IAEjC,qBACE,6LAAC;QAAI,WAAW,0KAAA,CAAA,UAAM,CAAC,OAAO;;0BAC5B,6LAAC,mIAAA,CAAA,YAAS;gBACR,SAAS;gBACT,MAAK;gBACL,QAAQ;wBAAC,EAAE,KAAK,EAAE;yCAChB,6LAAC,mIAAA,CAAA,WAAQ;wBAAC,WAAW,0KAAA,CAAA,UAAM,CAAC,KAAK;;0CAC/B,6LAAC,oIAAA,CAAA,QAAK;0CAAC;;;;;;0CACP,6LAAC,mIAAA,CAAA,cAAW;0CACV,cAAA,6LAAC,oIAAA,CAAA,QAAK;oCAAE,GAAG,KAAK;;;;;;;;;;;0CAElB,6LAAC,mIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;0BAIlB,6LAAC,mIAAA,CAAA,YAAS;gBACR,SAAS;gBACT,MAAK;gBACL,QAAQ;wBAAC,EAAE,KAAK,EAAE;yCAChB,6LAAC,mIAAA,CAAA,WAAQ;wBAAC,WAAW,0KAAA,CAAA,UAAM,CAAC,KAAK;;0CAC/B,6LAAC,oIAAA,CAAA,QAAK;0CAAC;;;;;;0CACP,6LAAC,mIAAA,CAAA,cAAW;0CACV,cAAA,6LAAC,oIAAA,CAAA,QAAK;oCAAE,GAAG,KAAK;;;;;;;;;;;0CAElB,6LAAC,mIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;;;;;;;AAMxB;GAjCwB;;QACF,iKAAA,CAAA,iBAAc;;;KADZ","debugId":null}},
    {"offset": {"line": 4643, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/MessageTab.tsx"],"sourcesContent":["import React from 'react'\nimport { useFieldArray, useFormContext } from 'react-hook-form'\nimport styles from '../properties-panel.module.css'\nimport { WhatsAppRules } from '@/config/whatsapp-rules'\nimport type { MessageContext } from '../types'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Input } from '@/components/ui/input'\nimport { Button } from '@/components/ui/button'\nimport { Trash2 } from 'lucide-react'\nimport { FormField, FormItem, FormControl, FormMessage } from '@/components/ui/form'\n\nexport default function MessageTab({ waContext = 'template' }: { waContext?: MessageContext; channels?: string[] }) {\n  const { register, control, formState: { errors }, watch } = useFormContext()\n  const { fields, append, remove } = useFieldArray({ control, name: 'quickReplies' })\n  const qrCap = waContext === 'template'\n    ? WhatsAppRules.template.quickReplyMax\n    : WhatsAppRules.interactive.replyButtonsInSessionMax\n\n  const currentQr = watch('quickReplies') ?? []\n  const over = currentQr.length > qrCap\n\n  return (\n    <div className={styles.tabBody}>\n      <div className={styles.infoRow}>\n        <span className={styles.badge}>WA {waContext}</span>\n        <span className={styles.muted}>Quick replies limit: {qrCap}</span>\n      </div>\n\n      <FormField\n        control={control}\n        name=\"text\"\n        render={({ field }) => (\n          <FormItem className={styles.field}>\n            <Label>Message Text</Label>\n            <FormControl>\n              <Textarea {...field} rows={4} placeholder=\"Type the message…\" />\n            </FormControl>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n\n      <div className={styles.field}>\n        <div className={styles.rowHeader}>\n            <h4 className={styles.subhead}>Quick Reply Buttons</h4>\n            <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                className={styles.addBtn}\n                onClick={() => append({ id: crypto.randomUUID(), label: '' })}\n                disabled={currentQr.length >= qrCap}\n            >+ Add</Button>\n        </div>\n\n        <ul className={styles.list}>\n            {fields.map((f, i) => (\n            <li key={f.id} className={styles.listItem}>\n                <Input\n                placeholder=\"Button label\"\n                {...register(`quickReplies.${i}.label` as const)}\n                maxLength={WhatsAppRules.template.quickReplyLabelMaxChars}\n                />\n                <Button type=\"button\" variant=\"ghost\" size=\"icon\" className={styles.removeBtn} onClick={() => remove(i)} aria-label=\"Remove\">\n                    <Trash2 className=\"h-4 w-4\" />\n                </Button>\n            </li>\n            ))}\n        </ul>\n        {errors.quickReplies && typeof errors.quickReplies.message === 'string' && <p className={styles.err}>{errors.quickReplies.message}</p>}\n\n        {over && <div className={styles.warn}>Too many quick replies for {waContext}. Remove {currentQr.length - qrCap}.</div>}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4893, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/api/mockServer.ts"],"sourcesContent":["export async function sendTestRequest(cfg: {\n  url: string;\n  method: string;\n  headers: { key: string; value: string }[];\n  body?: string;\n}) {\n  // Simulated latency\n  await new Promise((r) => setTimeout(r, 380));\n\n  // Example echo, with naive JSON parsing\n  let parsed: unknown = undefined;\n  try {\n    parsed = cfg.body ? JSON.parse(cfg.body) : undefined;\n  } catch {\n    parsed = { __raw: cfg.body };\n  }\n\n  return {\n    status: 'success',\n    statusCode: 200,\n    request: {\n      url: cfg.url,\n      method: cfg.method,\n      headers: cfg.headers,\n      body: parsed,\n    },\n    body: {\n      ok: true,\n      echoed: parsed ?? null,\n      example: { id: 'abc123', ts: Date.now() },\n    },\n    responseHeaders: { 'content-type': 'application/json', 'x-mock': 'true' },\n    latencyMs: 380,\n  };\n}\n"],"names":[],"mappings":";;;AAAO,eAAe,gBAAgB,GAKrC;IACC,oBAAoB;IACpB,MAAM,IAAI,QAAQ,CAAC,IAAM,WAAW,GAAG;IAEvC,wCAAwC;IACxC,IAAI,SAAkB;IACtB,IAAI;QACF,SAAS,IAAI,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI;IAC7C,EAAE,UAAM;QACN,SAAS;YAAE,OAAO,IAAI,IAAI;QAAC;IAC7B;IAEA,OAAO;QACL,QAAQ;QACR,YAAY;QACZ,SAAS;YACP,KAAK,IAAI,GAAG;YACZ,QAAQ,IAAI,MAAM;YAClB,SAAS,IAAI,OAAO;YACpB,MAAM;QACR;QACA,MAAM;YACJ,IAAI;YACJ,QAAQ,mBAAA,oBAAA,SAAU;YAClB,SAAS;gBAAE,IAAI;gBAAU,IAAI,KAAK,GAAG;YAAG;QAC1C;QACA,iBAAiB;YAAE,gBAAgB;YAAoB,UAAU;QAAO;QACxE,WAAW;IACb;AACF","debugId":null}},
    {"offset": {"line": 4938, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/KeyValueEditor/keyValueEditor.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"label\": \"keyValueEditor-module__bmetya__label\",\n  \"root\": \"keyValueEditor-module__bmetya__root\",\n  \"row\": \"keyValueEditor-module__bmetya__row\",\n  \"rows\": \"keyValueEditor-module__bmetya__rows\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 4950, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/KeyValueEditor/KeyValueEditor.tsx"],"sourcesContent":["import React from 'react';\nimport styles from './keyValueEditor.module.css';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Trash2 } from 'lucide-react';\n\nexport type KV = { key: string; value: string };\n\nexport default function KeyValueEditor({\n  label, items, onChange, placeholderKey = 'key', placeholderValue = 'value'\n}: {\n  label?: string;\n  items: KV[];\n  onChange: (next: KV[]) => void;\n  placeholderKey?: string;\n  placeholderValue?: string;\n}) {\n  const update = (idx: number, patch: Partial<KV>) => {\n    const next = items.map((r, i) => (i === idx ? { ...r, ...patch } : r));\n    onChange(next);\n  };\n  const add = () => onChange([...(items || []), { key: '', value: '' }]);\n  const remove = (idx: number) => onChange(items.filter((_, i) => i !== idx));\n\n  return (\n    <div className={styles.root}>\n      {label && <div className={styles.label}>{label}</div>}\n      <div className={styles.rows}>\n        {items.map((r, i) => (\n          <div key={i} className={styles.row}>\n            <Input\n              placeholder={placeholderKey}\n              value={r.key}\n              onChange={(e) => update(i, { key: e.target.value })}\n            />\n            <Input\n              placeholder={placeholderValue}\n              value={r.value}\n              onChange={(e) => update(i, { value: e.target.value })}\n            />\n            <Button variant=\"ghost\" size=\"icon\" onClick={() => remove(i)} aria-label=\"Remove\">\n                <Trash2 className=\"h-4 w-4\"/>\n            </Button>\n          </div>\n        ))}\n      </div>\n      <Button variant=\"outline\" size=\"sm\" onClick={add} type=\"button\" className=\"mt-2 w-fit\">\n        + Add\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;;AAIe,SAAS,eAAe,KAQtC;QARsC,EACrC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,iBAAiB,KAAK,EAAE,mBAAmB,OAAO,EAO3E,GARsC;IASrC,MAAM,SAAS,CAAC,KAAa;QAC3B,MAAM,OAAO,MAAM,GAAG,CAAC,CAAC,GAAG,IAAO,MAAM,MAAM;gBAAE,GAAG,CAAC;gBAAE,GAAG,KAAK;YAAC,IAAI;QACnE,SAAS;IACX;IACA,MAAM,MAAM,IAAM,SAAS;eAAK,SAAS,EAAE;YAAG;gBAAE,KAAK;gBAAI,OAAO;YAAG;SAAE;IACrE,MAAM,SAAS,CAAC,MAAgB,SAAS,MAAM,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAEtE,qBACE,6LAAC;QAAI,WAAW,oKAAA,CAAA,UAAM,CAAC,IAAI;;YACxB,uBAAS,6LAAC;gBAAI,WAAW,oKAAA,CAAA,UAAM,CAAC,KAAK;0BAAG;;;;;;0BACzC,6LAAC;gBAAI,WAAW,oKAAA,CAAA,UAAM,CAAC,IAAI;0BACxB,MAAM,GAAG,CAAC,CAAC,GAAG,kBACb,6LAAC;wBAAY,WAAW,oKAAA,CAAA,UAAM,CAAC,GAAG;;0CAChC,6LAAC,oIAAA,CAAA,QAAK;gCACJ,aAAa;gCACb,OAAO,EAAE,GAAG;gCACZ,UAAU,CAAC,IAAM,OAAO,GAAG;wCAAE,KAAK,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;0CAEnD,6LAAC,oIAAA,CAAA,QAAK;gCACJ,aAAa;gCACb,OAAO,EAAE,KAAK;gCACd,UAAU,CAAC,IAAM,OAAO,GAAG;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;0CAErD,6LAAC,qIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAO,SAAS,IAAM,OAAO;gCAAI,cAAW;0CACrE,cAAA,6LAAC,6MAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;;;;;;;uBAZd;;;;;;;;;;0BAiBd,6LAAC,qIAAA,CAAA,SAAM;gBAAC,SAAQ;gBAAU,MAAK;gBAAK,SAAS;gBAAK,MAAK;gBAAS,WAAU;0BAAa;;;;;;;;;;;;AAK7F;KA3CwB","debugId":null}},
    {"offset": {"line": 5077, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;AAIA,MAAM,cAAc,0KAAA,CAAA,OAAyB;AAE7C,MAAM,qBAAqB,0KAAA,CAAA,qBAAuC;AAElE,MAAM,qBAAqB,0KAAA,CAAA,qBAAuC","debugId":null}},
    {"offset": {"line": 5098, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/APITab.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react'\nimport { useFormContext } from 'react-hook-form'\nimport CodeMirror from '@uiw/react-codemirror'\nimport { json as cmJson } from '@codemirror/lang-json'\nimport { oneDark } from '@codemirror/theme-one-dark'\nimport styles from '../properties-panel.module.css'\nimport { sendTestRequest } from '@/api/mockServer'\nimport KeyValueEditor from '@/components/KeyValueEditor/KeyValueEditor'\nimport { Button } from '@/components/ui/button'\nimport { Label } from '@/components/ui/label'\nimport { Input } from '@/components/ui/input'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Loader2 } from 'lucide-react'\nimport { Switch } from '@/components/ui/switch'\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible'\n\ntype Method = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'\n\nexport default function APITab() {\n  const { register, watch, setValue } = useFormContext()\n\n  const [busy, setBusy] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [resp, setResp] = useState<any>(null)\n  const [showHeaders, setShowHeaders] = useState(false);\n  const [showBody, setShowBody] = useState(false);\n  const [showTest, setShowTest] = useState(false);\n\n\n  const url = watch('url')\n  const method = watch('method', 'POST')\n  const headers = watch('headers', [])\n  const body = watch('body', '')\n\n  const jsonError = useMemo(() => {\n    if (!body || body.trim() === '') return null\n    try { JSON.parse(body) } catch (e: any) { return e?.message || 'Invalid JSON' }\n    return null\n  }, [body])\n\n  async function runTest() {\n    setBusy(true); setError(null); setResp(null)\n    try {\n      if (jsonError) { setError(`Body JSON: ${jsonError}`); setBusy(false); return }\n\n      const result = await sendTestRequest({ url, method, headers, body })\n      setResp(result)\n    } catch (e: any) {\n      setError(e?.message || 'Test failed')\n    } finally {\n      setBusy(false)\n    }\n  }\n\n  return (\n    <div className={styles.tabBody}>\n        <div className=\"space-y-1\">\n            <Label>URL & Method</Label>\n            <div className=\"flex gap-2\">\n                <Select value={method} onValueChange={(v) => setValue('method', v)}>\n                    <SelectTrigger className=\"w-[100px]\"><SelectValue/></SelectTrigger>\n                    <SelectContent>\n                        {(['GET','POST','PUT','PATCH','DELETE'] as Method[]).map(m => <SelectItem key={m} value={m}>{m}</SelectItem>)}\n                    </SelectContent>\n                </Select>\n                <Input id=\"url\" {...register('url')} placeholder=\"https://...\" />\n                <Button className=\"bg-green-600 hover:bg-green-700 text-white\">Variables</Button>\n            </div>\n        </div>\n\n        <hr className={styles.hr} />\n        \n        <Collapsible open={showHeaders} onOpenChange={setShowHeaders}>\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h4 className=\"font-semibold\">Customize Headers</h4>\n                    <p className=\"text-xs text-muted-foreground\">Add headers to your request (example: Content-Type: application/json)</p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-muted-foreground\">Optional</span>\n                    <CollapsibleTrigger asChild>\n                        <Switch id=\"show-headers\" checked={showHeaders} onCheckedChange={setShowHeaders} />\n                    </CollapsibleTrigger>\n                </div>\n            </div>\n             <p className=\"text-xs text-orange-500 mt-1\">(User-Agent is not sent as a header by default. make sure you include it if necessary.)</p>\n            <CollapsibleContent className=\"mt-4\">\n                 <KeyValueEditor items={headers} onChange={(v) => setValue('headers', v)} />\n            </CollapsibleContent>\n        </Collapsible>\n\n        <hr className={styles.hr} />\n\n        <Collapsible open={showBody} onOpenChange={setShowBody}>\n            <div className=\"flex items-center justify-between\">\n                <h4 className=\"font-semibold\">Customize Body</h4>\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-muted-foreground\">Optional</span>\n                    <CollapsibleTrigger asChild>\n                         <Switch id=\"show-body\" checked={showBody} onCheckedChange={setShowBody} />\n                    </CollapsibleTrigger>\n                </div>\n            </div>\n            <CollapsibleContent className=\"mt-4\">\n                <div className=\"space-y-2\">\n                    <div className=\"flex justify-between items-center\">\n                        <Label>Body (JSON)</Label>\n                        {jsonError ? <span className={styles.warn}>Invalid JSON</span> : <span className={styles.ok}>Valid</span>}\n                    </div>\n                    <CodeMirror\n                        value={body}\n                        onChange={(v) => setValue('body', v)}\n                        extensions={[cmJson()]}\n                        height=\"150px\"\n                        theme={oneDark}\n                    />\n                </div>\n            </CollapsibleContent>\n        </Collapsible>\n\n        <hr className={styles.hr} />\n\n        <Collapsible open={showTest} onOpenChange={setShowTest}>\n            <div className=\"flex items-center justify-between\">\n                 <div>\n                    <h4 className=\"font-semibold\">Test Your Request</h4>\n                    <p className=\"text-xs text-muted-foreground\">Manually set values for test variables</p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-muted-foreground\">Optional</span>\n                    <CollapsibleTrigger asChild>\n                        <Switch id=\"show-test\" checked={showTest} onCheckedChange={setShowTest} />\n                    </CollapsibleTrigger>\n                </div>\n            </div>\n            <p className=\"text-xs text-orange-500 mt-1\">(If your request contains variables, you can manually set their values for testing purposes.)</p>\n            <CollapsibleContent className=\"mt-4\">\n                {error && <div className={styles.warn}>⚠ {error}</div>}\n                <Button disabled={busy || !url || (showBody && !!jsonError)} onClick={runTest} className=\"bg-green-600 hover:bg-green-700 text-white\">\n                    {busy && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\"/>}\n                    Test the request\n                </Button>\n                {resp && (\n                    <div className=\"border rounded-lg p-4 mt-4 space-y-2\">\n                        <div className=\"flex justify-between items-center\">\n                            <div className=\"flex gap-2\">\n                                <span className={resp.statusCode >= 200 && resp.statusCode < 300 ? \"text-green-500\" : \"text-red-500\"}>HTTP {resp.statusCode}</span>\n                                <span>{resp.latencyMs} ms</span>\n                            </div>\n                        </div>\n                         <pre className=\"bg-muted p-2 rounded-md overflow-auto text-xs\">{JSON.stringify(resp.body, null, 2)}</pre>\n                    </div>\n                )}\n            </CollapsibleContent>\n        </Collapsible>\n\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5709, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/PropertiesPanel/tabs/LogicTab.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"conditionGroup\": \"LogicTab-module__ZE87da__conditionGroup\",\n  \"conditionRow\": \"LogicTab-module__ZE87da__conditionRow\",\n  \"orDivider\": \"LogicTab-module__ZE87da__orDivider\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 5720, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,6JAAA,CAAA,aAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,6JAAA,CAAA,aAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,6JAAA,CAAA,aAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,6JAAA,CAAA,aAAgB,OAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,6JAAA,CAAA,aAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,6JAAA,CAAA,aAAgB,QAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 5841, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/LogicTab.tsx"],"sourcesContent":["import React from 'react';\nimport { useFieldArray, useFormContext, Controller } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport localStyles from './LogicTab.module.css';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Trash2, PlusCircle, Copy } from 'lucide-react';\nimport { nanoid } from 'nanoid';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { cn } from '@/lib/utils';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\n\nfunction ConditionRow({ groupIndex, conditionIndex, onRemove }: { groupIndex: number, conditionIndex: number, onRemove: () => void }) {\n  const { control, register } = useFormContext();\n  return (\n    <div className={localStyles.conditionRow}>\n      <Controller\n        control={control}\n        name={`groups.${groupIndex}.conditions.${conditionIndex}.variable`}\n        render={({ field }) => <Input {...field} placeholder=\"Variable e.g. {{name}}\" />}\n      />\n      <Controller\n        control={control}\n        name={`groups.${groupIndex}.conditions.${conditionIndex}.operator`}\n        render={({ field }) => (\n          <Select onValueChange={field.onChange} defaultValue={field.value}>\n            <SelectTrigger><SelectValue placeholder=\"Operator\" /></SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"equal_to\">Is equal to</SelectItem>\n              <SelectItem value=\"not_equal_to\">Is not equal to</SelectItem>\n              <SelectItem value=\"greater_than\">Is greater than</SelectItem>\n              <SelectItem value=\"less_than\">Is less than</SelectItem>\n              <SelectItem value=\"contains\">Contains</SelectItem>\n              <SelectItem value=\"starts_with\">Starts with</SelectItem>\n              <SelectItem value=\"ends_with\">Ends with</SelectItem>\n              <SelectItem value=\"is_defined\">Is defined</SelectItem>\n              <SelectItem value=\"is_not_defined\">Is not defined</SelectItem>\n            </SelectContent>\n          </Select>\n        )}\n      />\n      <Controller\n        control={control}\n        name={`groups.${groupIndex}.conditions.${conditionIndex}.value`}\n        render={({ field }) => <Input {...field} placeholder=\"Value\" />}\n      />\n      <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={onRemove}><Trash2 className=\"h-4 w-4\" /></Button>\n    </div>\n  );\n}\n\nfunction ConditionGroup({ groupIndex, onRemoveGroup, onCopyGroup }: { groupIndex: number, onRemoveGroup: () => void, onCopyGroup: () => void }) {\n  const { control, watch } = useFormContext();\n  const { fields, append, remove } = useFieldArray({\n    control,\n    name: `groups.${groupIndex}.conditions`\n  });\n  const groupType = watch(`groups.${groupIndex}.type`);\n\n  return (\n    <Card className={localStyles.conditionGroup}>\n      <CardHeader className=\"flex-row items-center justify-between p-4\">\n        <div className=\"space-y-1\">\n          <CardTitle className=\"text-base\">Condition Group</CardTitle>\n          <CardDescription className=\"text-xs\">All conditions in this group must be met.</CardDescription>\n        </div>\n        <div className=\"flex items-center gap-1\">\n            <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={onCopyGroup}><Copy className=\"h-4 w-4\" /></Button>\n            <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={onRemoveGroup}><Trash2 className=\"h-4 w-4 text-destructive\" /></Button>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-4 pt-0 space-y-3\">\n        {fields.map((field, conditionIndex) => (\n          <ConditionRow\n            key={field.id}\n            groupIndex={groupIndex}\n            conditionIndex={conditionIndex}\n            onRemove={() => remove(conditionIndex)}\n          />\n        ))}\n        <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => append({ variable: '', operator: 'equal_to', value: '' })} className=\"gap-2\">\n          <PlusCircle className=\"h-4 w-4\" /> AND\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function LogicTab() {\n  const { control, setValue } = useFormContext();\n  const { fields, append, remove, insert } = useFieldArray({\n    control,\n    name: 'groups'\n  });\n\n  const addGroup = () => append({ type: 'and', conditions: [{ variable: '', operator: 'equal_to', value: '' }] });\n  const copyGroup = (index: number) => {\n    const groupToCopy = (control as any)._getWatch('groups')[index];\n    insert(index + 1, { ...groupToCopy, id: nanoid() });\n  }\n\n  return (\n    <div className={styles.tabBody}>\n      <div className=\"space-y-4\">\n        {fields.map((field, index) => (\n          <React.Fragment key={field.id}>\n            {index > 0 && <div className={localStyles.orDivider}>OR</div>}\n            <ConditionGroup\n              groupIndex={index}\n              onRemoveGroup={() => remove(index)}\n              onCopyGroup={() => copyGroup(index)}\n            />\n          </React.Fragment>\n        ))}\n      </div>\n      <Button\n        type=\"button\"\n        variant=\"outline\"\n        size=\"sm\"\n        className=\"mt-4 gap-2\"\n        onClick={addGroup}\n      >\n        <PlusCircle className=\"h-4 w-4\" /> Add OR Condition Group\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;;;;;;;;;;;;;AAEA,SAAS,aAAa,KAA8G;QAA9G,EAAE,UAAU,EAAE,cAAc,EAAE,QAAQ,EAAwE,GAA9G;;IACpB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,iBAAc,AAAD;IAC3C,qBACE,6LAAC;QAAI,WAAW,uKAAA,CAAA,UAAW,CAAC,YAAY;;0BACtC,6LAAC,iKAAA,CAAA,aAAU;gBACT,SAAS;gBACT,MAAM,AAAC,UAAkC,OAAzB,YAAW,gBAA6B,OAAf,gBAAe;gBACxD,QAAQ;wBAAC,EAAE,KAAK,EAAE;yCAAK,6LAAC,oIAAA,CAAA,QAAK;wBAAE,GAAG,KAAK;wBAAE,aAAY;;;;;;;;;;;;0BAEvD,6LAAC,iKAAA,CAAA,aAAU;gBACT,SAAS;gBACT,MAAM,AAAC,UAAkC,OAAzB,YAAW,gBAA6B,OAAf,gBAAe;gBACxD,QAAQ;wBAAC,EAAE,KAAK,EAAE;yCAChB,6LAAC,qIAAA,CAAA,SAAM;wBAAC,eAAe,MAAM,QAAQ;wBAAE,cAAc,MAAM,KAAK;;0CAC9D,6LAAC,qIAAA,CAAA,gBAAa;0CAAC,cAAA,6LAAC,qIAAA,CAAA,cAAW;oCAAC,aAAY;;;;;;;;;;;0CACxC,6LAAC,qIAAA,CAAA,gBAAa;;kDACZ,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAW;;;;;;kDAC7B,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAe;;;;;;kDACjC,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAe;;;;;;kDACjC,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAY;;;;;;kDAC9B,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAW;;;;;;kDAC7B,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAc;;;;;;kDAChC,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAY;;;;;;kDAC9B,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAa;;;;;;kDAC/B,6LAAC,qIAAA,CAAA,aAAU;wCAAC,OAAM;kDAAiB;;;;;;;;;;;;;;;;;;;;;;;;0BAK3C,6LAAC,iKAAA,CAAA,aAAU;gBACT,SAAS;gBACT,MAAM,AAAC,UAAkC,OAAzB,YAAW,gBAA6B,OAAf,gBAAe;gBACxD,QAAQ;wBAAC,EAAE,KAAK,EAAE;yCAAK,6LAAC,oIAAA,CAAA,QAAK;wBAAE,GAAG,KAAK;wBAAE,aAAY;;;;;;;;;;;;0BAEvD,6LAAC,qIAAA,CAAA,SAAM;gBAAC,MAAK;gBAAS,SAAQ;gBAAQ,MAAK;gBAAO,SAAS;0BAAU,cAAA,6LAAC,6MAAA,CAAA,SAAM;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAG7F;GArCS;;QACuB,iKAAA,CAAA,iBAAc;;;KADrC;AAuCT,SAAS,eAAe,KAAsH;QAAtH,EAAE,UAAU,EAAE,aAAa,EAAE,WAAW,EAA8E,GAAtH;;IACtB,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,iBAAc,AAAD;IACxC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,gBAAa,AAAD,EAAE;QAC/C;QACA,MAAM,AAAC,UAAoB,OAAX,YAAW;IAC7B;IACA,MAAM,YAAY,MAAM,AAAC,UAAoB,OAAX,YAAW;IAE7C,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAW,uKAAA,CAAA,UAAW,CAAC,cAAc;;0BACzC,6LAAC,mIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mIAAA,CAAA,YAAS;gCAAC,WAAU;0CAAY;;;;;;0CACjC,6LAAC,mIAAA,CAAA,kBAAe;gCAAC,WAAU;0CAAU;;;;;;;;;;;;kCAEvC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,qIAAA,CAAA,SAAM;gCAAC,MAAK;gCAAS,SAAQ;gCAAQ,MAAK;gCAAO,SAAS;0CAAa,cAAA,6LAAC,qMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;;;;;;0CACxF,6LAAC,qIAAA,CAAA,SAAM;gCAAC,MAAK;gCAAS,SAAQ;gCAAQ,MAAK;gCAAO,SAAS;0CAAe,cAAA,6LAAC,6MAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAGlG,6LAAC,mIAAA,CAAA,cAAW;gBAAC,WAAU;;oBACpB,OAAO,GAAG,CAAC,CAAC,OAAO,+BAClB,6LAAC;4BAEC,YAAY;4BACZ,gBAAgB;4BAChB,UAAU,IAAM,OAAO;2BAHlB,MAAM,EAAE;;;;;kCAMjB,6LAAC,qIAAA,CAAA,SAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAU,MAAK;wBAAK,SAAS,IAAM,OAAO;gCAAE,UAAU;gCAAI,UAAU;gCAAY,OAAO;4BAAG;wBAAI,WAAU;;0CACpI,6LAAC,qNAAA,CAAA,aAAU;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;;;;;;;AAK5C;IAnCS;;QACoB,iKAAA,CAAA,iBAAc;QACN,iKAAA,CAAA,gBAAa;;;MAFzC;AAqCM,SAAS;;IACtB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,iBAAc,AAAD;IAC3C,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,gBAAa,AAAD,EAAE;QACvD;QACA,MAAM;IACR;IAEA,MAAM,WAAW,IAAM,OAAO;YAAE,MAAM;YAAO,YAAY;gBAAC;oBAAE,UAAU;oBAAI,UAAU;oBAAY,OAAO;gBAAG;aAAE;QAAC;IAC7G,MAAM,YAAY,CAAC;QACjB,MAAM,cAAc,AAAC,QAAgB,SAAS,CAAC,SAAS,CAAC,MAAM;QAC/D,OAAO,QAAQ,GAAG;YAAE,GAAG,WAAW;YAAE,IAAI,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD;QAAI;IACnD;IAEA,qBACE,6LAAC;QAAI,WAAW,0KAAA,CAAA,UAAM,CAAC,OAAO;;0BAC5B,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,6LAAC,6JAAA,CAAA,UAAK,CAAC,QAAQ;;4BACZ,QAAQ,mBAAK,6LAAC;gCAAI,WAAW,uKAAA,CAAA,UAAW,CAAC,SAAS;0CAAE;;;;;;0CACrD,6LAAC;gCACC,YAAY;gCACZ,eAAe,IAAM,OAAO;gCAC5B,aAAa,IAAM,UAAU;;;;;;;uBALZ,MAAM,EAAE;;;;;;;;;;0BAUjC,6LAAC,qIAAA,CAAA,SAAM;gBACL,MAAK;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS;;kCAET,6LAAC,qNAAA,CAAA,aAAU;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;AAI1C;IAtCwB;;QACQ,iKAAA,CAAA,iBAAc;QACD,iKAAA,CAAA,gBAAa;;;MAFlC","debugId":null}},
    {"offset": {"line": 6311, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,6JAAA,CAAA,aAAgB,MAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,6LAAC,uMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 6366, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/ScheduleTab.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst TZ = ['UTC','Europe/London','America/New_York','America/Los_Angeles','Africa/Nairobi','Asia/Kolkata','Asia/Singapore'];\nconst DAYS = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'] as const;\n\nexport default function ScheduleTab() {\n  const { register, watch, setValue, formState: { errors } } = useFormContext();\n  const selectedDays = new Set((watch('schedule.days') as string[]) || []);\n\n  const toggleDay = (day: string) => {\n    const currentDays = new Set(watch('schedule.days') || []);\n    if (currentDays.has(day)) {\n        currentDays.delete(day);\n    } else {\n        currentDays.add(day);\n    }\n    setValue('schedule.days', Array.from(currentDays), { shouldValidate: true });\n  }\n\n  return (\n    <div className={styles.tabBody}>\n      <div className=\"space-y-2\">\n        <Label>Delay before next</Label>\n        <Input placeholder=\"e.g. 30m, 5s, 1h\" {...register('schedule.delay')} />\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label>Timezone</Label>\n        <Select defaultValue=\"UTC\" onValueChange={(v) => setValue('schedule.timezone', v)}>\n          <SelectTrigger>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {TZ.map(t => <SelectItem key={t} value={t}>{t}</SelectItem>)}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <Card>\n        <CardHeader><CardTitle>Send Window</CardTitle></CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label>Days</Label>\n            <div className=\"flex flex-wrap gap-2 pt-2\">\n              {DAYS.map(d => (\n                <div key={d} className=\"flex items-center space-x-2\">\n                  <Checkbox\n                    id={`day-${d}`}\n                    checked={selectedDays.has(d)}\n                    onCheckedChange={() => toggleDay(d)}\n                  />\n                  <label htmlFor={`day-${d}`} className=\"text-sm font-medium leading-none\">{d}</label>\n                </div>\n              ))}\n            </div>\n            {errors?.schedule?.days && <p className={styles.err}>Please select at least one day.</p>}\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Start (HH:MM)</Label>\n              <Input placeholder=\"09:00\" {...register('schedule.windowStart')} />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>End (HH:MM)</Label>\n              <Input placeholder=\"18:00\" {...register('schedule.windowEnd')} />\n            </div>\n          </div>\n           <div className=\"flex items-center space-x-2\">\n            <Checkbox id=\"respectQuietHours\" {...register('schedule.respectQuietHours')} />\n            <Label htmlFor=\"respectQuietHours\">Respect quiet hours</Label>\n          </div>\n          <p className=\"text-xs text-muted-foreground\">Messages outside the window will be sent at the next available time.</p>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6699, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/CampaignTab.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { XIcon } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst CHANNELS = ['whatsapp','sms','email','push','voice','instagram','messenger','webchat','slack','teams','telegram'] as const;\n\nexport default function CampaignTab() {\n  const { register, setValue, watch } = useFormContext();\n  const picks = new Set((watch('campaign.channels') as string[]) || []);\n  const [tagInput, setTagInput] = useState('');\n\n  const toggleChannel = (c: string) => {\n    const arr = Array.from(picks);\n    if (picks.has(c)) setValue('campaign.channels', arr.filter(x => x !== c));\n    else setValue('campaign.channels', [...arr, c]);\n  };\n\n  const tags = (watch('campaign.audienceTags') as string[]) || [];\n  const addTag = () => {\n    const t = tagInput.trim();\n    if (!t || tags.includes(t)) return;\n    setValue('campaign.audienceTags', [...tags, t]);\n    setTagInput('');\n  };\n  const rmTag = (t: string) => setValue('campaign.audienceTags', tags.filter(x => x !== t));\n\n  return (\n    <div className={styles.tabBody}>\n      <Card>\n        <CardHeader><CardTitle>Audience</CardTitle></CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Label>Tags</Label>\n          <div className=\"flex gap-2\">\n            <Input value={tagInput} onChange={e => setTagInput(e.target.value)} placeholder=\"Type and press Add\" />\n            <Button onClick={addTag} type=\"button\">Add</Button>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {tags.map(t => (\n              <Badge key={t} variant=\"secondary\" className=\"flex items-center gap-1\">\n                {t} <XIcon className=\"h-3 w-3 cursor-pointer\" onClick={() => rmTag(t)} />\n              </Badge>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader><CardTitle>Channels</CardTitle></CardHeader>\n        <CardContent className=\"grid grid-cols-2 gap-4\">\n            {CHANNELS.map(c => (\n              <div key={c} className=\"flex items-center space-x-2\">\n                <Checkbox id={`campaign-channel-${c}`} checked={picks.has(c)} onCheckedChange={() => toggleChannel(c)} />\n                <label htmlFor={`campaign-channel-${c}`} className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">{c}</label>\n              </div>\n            ))}\n        </CardContent>\n      </Card>\n      \n      <Card>\n        <CardHeader><CardTitle>Send Rules</CardTitle></CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Frequency Cap</Label>\n              <Input type=\"number\" min={1} max={100} {...register('campaign.frequencyCap.count', { valueAsNumber: true })} />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Per</Label>\n              <Select defaultValue=\"day\" {...register('campaign.frequencyCap.per')}>\n                <SelectTrigger><SelectValue /></SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"day\">Day</SelectItem>\n                  <SelectItem value=\"week\">Week</SelectItem>\n                  <SelectItem value=\"month\">Month</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox id=\"deduplicate\" {...register('campaign.deduplicate')} />\n            <Label htmlFor=\"deduplicate\">Deduplicate recipients</Label>\n          </div>\n           <div className=\"flex items-center space-x-2\">\n            <Checkbox id=\"trackUTM\" {...register('campaign.trackUTM')} />\n            <Label htmlFor=\"trackUTM\">Append UTM parameters</Label>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7123, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/ai/flows/ai-content-enhancement.ts"],"sourcesContent":["// src/ai/flows/ai-content-enhancement.ts\n'use server';\n\n/**\n * @fileOverview An AI-powered content enhancement flow.\n *\n * - aiContentEnhancement - A function that enhances the given content using AI.\n * - AIContentEnhancementInput - The input type for the aiContentEnhancement function.\n * - AIContentEnhancementOutput - The return type for the aiContentEnhancement function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst AIContentEnhancementInputSchema = z.object({\n  content: z.string().describe('The content to be enhanced.'),\n  language: z.string().optional().describe('The target language for translation, if any.'),\n  channel: z.string().optional().describe('The communication channel (e.g., WhatsApp, SMS, email).'),\n  audience: z.string().optional().describe('The intended audience for the content.'),\n});\nexport type AIContentEnhancementInput = z.infer<typeof AIContentEnhancementInputSchema>;\n\nconst AIContentEnhancementOutputSchema = z.object({\n  enhancedContent: z.string().describe('The AI-enhanced content.'),\n});\nexport type AIContentEnhancementOutput = z.infer<typeof AIContentEnhancementOutputSchema>;\n\nexport async function aiContentEnhancement(input: AIContentEnhancementInput): Promise<AIContentEnhancementOutput> {\n  return aiContentEnhancementFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'aiContentEnhancementPrompt',\n  input: {schema: AIContentEnhancementInputSchema},\n  output: {schema: AIContentEnhancementOutputSchema},\n  prompt: `You are an AI assistant designed to enhance the content of messages.\n\n  You will be provided with the original content, the target language (if any), the communication channel, and the intended audience.\n  Based on this information, you will:\n  - Improve grammar and clarity.\n  - Suggest alternative phrasing to better suit the channel and audience.\n  - Translate the message into the specified language, if provided.\n\n  Original Content: {{{content}}}\n  Target Language: {{language}}\n  Channel: {{channel}}\n  Intended Audience: {{audience}}}\n\n  Enhanced Content:`,\n});\n\nconst aiContentEnhancementFlow = ai.defineFlow(\n  {\n    name: 'aiContentEnhancementFlow',\n    inputSchema: AIContentEnhancementInputSchema,\n    outputSchema: AIContentEnhancementOutputSchema,\n  },\n  async input => {\n    const {text} = await prompt(input);\n    return {enhancedContent: text!};\n  }\n);\n\n"],"names":[],"mappings":";;;;;;IA2BsB,uBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 7139, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/ai/flows/ai-flow-suggestions.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview AI-powered flow configuration suggestions.\n *\n * - generateFlowSuggestions - A function that generates AI-driven suggestions for optimizing flow configuration.\n * - GenerateFlowSuggestionsInput - The input type for the generateFlowSuggestions function.\n * - GenerateFlowSuggestionsOutput - The return type for the generateFlowSuggestions function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst GenerateFlowSuggestionsInputSchema = z.object({\n  flowDescription: z.string().describe('A description of the current flow.'),\n  flowData: z.string().describe('The JSON representation of the current flow data.'),\n});\nexport type GenerateFlowSuggestionsInput = z.infer<typeof GenerateFlowSuggestionsInputSchema>;\n\nconst GenerateFlowSuggestionsOutputSchema = z.object({\n  suggestions: z.string().describe('AI-driven suggestions for optimizing the flow configuration.'),\n});\nexport type GenerateFlowSuggestionsOutput = z.infer<typeof GenerateFlowSuggestionsOutputSchema>;\n\nexport async function generateFlowSuggestions(input: GenerateFlowSuggestionsInput): Promise<GenerateFlowSuggestionsOutput> {\n  return generateFlowSuggestionsFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'generateFlowSuggestionsPrompt',\n  input: {schema: GenerateFlowSuggestionsInputSchema},\n  output: {schema: GenerateFlowSuggestionsOutputSchema},\n  prompt: `You are an AI expert in omni-channel flow design. Given the flow description and data, provide suggestions for optimizing the flow configuration, focusing on node sequence, content enhancement, and channel-specific best practices, such as alternative node sequences or content enhancements.\n\nFlow Description: {{{flowDescription}}}\nFlow Data: {{{flowData}}}\n\nSuggestions:`,\n  config: {\n    safetySettings: [\n      {\n        category: 'HARM_CATEGORY_HATE_SPEECH',\n        threshold: 'BLOCK_ONLY_HIGH',\n      },\n      {\n        category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n        threshold: 'BLOCK_NONE',\n      },\n      {\n        category: 'HARM_CATEGORY_HARASSMENT',\n        threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n      },\n      {\n        category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n        threshold: 'BLOCK_LOW_AND_ABOVE',\n      },\n    ],\n  },\n});\n\nconst generateFlowSuggestionsFlow = ai.defineFlow(\n  {\n    name: 'generateFlowSuggestionsFlow',\n    inputSchema: GenerateFlowSuggestionsInputSchema,\n    outputSchema: GenerateFlowSuggestionsOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return {suggestions: output!.suggestions};\n  }\n);\n"],"names":[],"mappings":";;;;;;IAwBsB,0BAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 7155, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/AITab.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { useFlowStore } from '@/store/flow';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { aiContentEnhancement } from '@/ai/flows/ai-content-enhancement';\nimport { generateFlowSuggestions } from '@/ai/flows/ai-flow-suggestions';\nimport { Loader2 } from 'lucide-react';\nimport styles from '../properties-panel.module.css';\n\nexport default function AITab() {\n  const { nodes, edges } = useFlowStore();\n  const [content, setContent] = useState('');\n  const [enhancedContent, setEnhancedContent] = useState('');\n  const [isEnhancing, setIsEnhancing] = useState(false);\n\n  const [flowDescription, setFlowDescription] = useState('');\n  const [suggestions, setSuggestions] = useState('');\n  const [isSuggesting, setIsSuggesting] = useState(false);\n\n  const handleEnhance = async () => {\n    if (!content) return;\n    setIsEnhancing(true);\n    setEnhancedContent('');\n    try {\n      const result = await aiContentEnhancement({ content });\n      setEnhancedContent(result.enhancedContent);\n    } catch (error) {\n      console.error(error);\n      setEnhancedContent('Error enhancing content.');\n    } finally {\n      setIsEnhancing(false);\n    }\n  };\n\n  const handleSuggest = async () => {\n    setIsSuggesting(true);\n    setSuggestions('');\n    try {\n      const flowData = JSON.stringify({ nodes, edges }, null, 2);\n      const result = await generateFlowSuggestions({ flowDescription, flowData });\n      setSuggestions(result.suggestions);\n    } catch (error) {\n      console.error(error);\n      setSuggestions('Error generating suggestions.');\n    } finally {\n      setIsSuggesting(false);\n    }\n  };\n\n  return (\n    <div className={styles.tabBody}>\n      <Card>\n        <CardHeader>\n          <CardTitle>Content Enhancement</CardTitle>\n          <CardDescription>Improve grammar, clarity, and tone with AI.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid w-full gap-1.5\">\n            <Label htmlFor=\"content-to-enhance\">Original Content</Label>\n            <Textarea\n              id=\"content-to-enhance\"\n              placeholder=\"Enter content to enhance...\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n            />\n          </div>\n          <Button onClick={handleEnhance} disabled={isEnhancing || !content}>\n            {isEnhancing && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            Enhance Content\n          </Button>\n          {enhancedContent && (\n            <div className=\"mt-4 rounded-md border bg-muted p-4\">\n              <Label>Enhanced Content</Label>\n              <p className=\"text-sm\">{enhancedContent}</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n      \n      <Card>\n        <CardHeader>\n          <CardTitle>Flow Suggestions</CardTitle>\n          <CardDescription>Get AI-driven recommendations to optimize your flow.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid w-full gap-1.5\">\n            <Label htmlFor=\"flow-description\">Flow Description</Label>\n            <Textarea\n              id=\"flow-description\"\n              placeholder=\"Briefly describe what this flow does...\"\n              value={flowDescription}\n              onChange={(e) => setFlowDescription(e.target.value)}\n            />\n          </div>\n          <Button onClick={handleSuggest} disabled={isSuggesting || !flowDescription}>\n            {isSuggesting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            Get Suggestions\n          </Button>\n          {suggestions && (\n            <div className=\"mt-4 rounded-md border bg-muted p-4\">\n              <Label>Suggestions</Label>\n              <p className=\"text-sm whitespace-pre-wrap\">{suggestions}</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7470, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/HandoffTab.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { XIcon } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nexport default function HandoffTab() {\n  const { register, setValue, watch } = useFormContext();\n  const [tagInput, setTagInput] = useState('');\n  const tags = (watch('handoff.tags') as string[]) || [];\n\n  const addTag = () => {\n    const t = tagInput.trim();\n    if (!t || tags.includes(t)) return;\n    setValue('handoff.tags', [...tags, t]);\n    setTagInput('');\n  };\n  const rmTag = (t: string) => setValue('handoff.tags', tags.filter(x => x !== t));\n\n  return (\n    <div className={styles.tabBody}>\n      <Card>\n        <CardHeader><CardTitle>Routing</CardTitle></CardHeader>\n        <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label>Queue ID</Label>\n            <Input placeholder=\"sales-queue\" {...register('handoff.queueId')} />\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Team ID</Label>\n            <Input placeholder=\"team-apac\" {...register('handoff.teamId')} />\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Priority</Label>\n            <Select defaultValue=\"normal\" onValueChange={(v) => setValue('handoff.priority', v)}>\n              <SelectTrigger><SelectValue /></SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"low\">Low</SelectItem>\n                <SelectItem value=\"normal\">Normal</SelectItem>\n                <SelectItem value=\"high\">High</SelectItem>\n                <SelectItem value=\"urgent\">Urgent</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Assignment</Label>\n            <Select defaultValue=\"round_robin\" onValueChange={(v) => setValue('handoff.assignment', v)}>\n                <SelectTrigger><SelectValue /></SelectTrigger>\n                <SelectContent>\n                    <SelectItem value=\"round_robin\">Round Robin</SelectItem>\n                    <SelectItem value=\"least_busy\">Least Busy</SelectItem>\n                </SelectContent>\n            </Select>\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Timeout</Label>\n            <Input placeholder=\"e.g. 5m\" {...register('handoff.timeout')} />\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Fallback</Label>\n            <Select defaultValue=\"return_to_bot\" onValueChange={(v) => setValue('handoff.fallback', v)}>\n                <SelectTrigger><SelectValue /></SelectTrigger>\n                <SelectContent>\n                    <SelectItem value=\"return_to_bot\">Return to Bot</SelectItem>\n                    <SelectItem value=\"voicemail\">Voicemail</SelectItem>\n                    <SelectItem value=\"end_session\">End Session</SelectItem>\n                </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n      \n      <Card>\n        <CardHeader><CardTitle>Context</CardTitle></CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label>Tags</Label>\n            <div className=\"flex gap-2 mt-2\">\n              <Input value={tagInput} onChange={e => setTagInput(e.target.value)} placeholder=\"Add tag\" />\n              <Button type=\"button\" onClick={addTag}>Add</Button>\n            </div>\n            <div className=\"flex flex-wrap gap-2 mt-2\">\n              {tags.map(t => (\n                <Badge key={t} variant=\"secondary\" className=\"flex items-center gap-1\">\n                  {t} <XIcon className=\"h-3 w-3 cursor-pointer\" onClick={() => rmTag(t)} />\n                </Badge>\n              ))}\n            </div>\n          </div>\n          <div>\n            <Label>Note</Label>\n            <Textarea className=\"mt-2\" rows={3} placeholder=\"Context for the agent…\" {...register('handoff.note')} />\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7970, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/VariableChipAutocomplete/variableChip.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"chip\": \"variableChip-module___jnedW__chip\",\n  \"chips\": \"variableChip-module___jnedW__chips\",\n  \"label\": \"variableChip-module___jnedW__label\",\n  \"muted\": \"variableChip-module___jnedW__muted\",\n  \"root\": \"variableChip-module___jnedW__root\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 7983, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,6JAAA,CAAA,aAAgB,MAGrC,QAA4D;QAA3D,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO;yBAC1D,6LAAC,sKAAA,CAAA,SAAuB;kBACtB,cAAA,6LAAC,sKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8034, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/VariableChipAutocomplete/VariableChipAutocomplete.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport styles from './variableChip.module.css';\nimport { Input } from '../ui/input';\nimport { Button } from '../ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from '../ui/popover';\n\nexport default function VariableChipAutocomplete({\n  variables = [],\n  onInsert,\n  label = 'Insert variable'\n}: {\n  variables: string[];\n  onInsert: (name: string) => void;\n  label?: string;\n}) {\n  const [q, setQ] = useState('');\n  const list = useMemo(\n    () => variables.filter(v => v.toLowerCase().includes(q.toLowerCase())).slice(0, 8),\n    [variables, q]\n  );\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"text-xs\">\n          {`{{...}}`}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80\">\n        <div className={styles.root}>\n          <label className={styles.label}>{label}</label>\n          <Input\n            className={styles.input}\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            placeholder=\"Search vars…\"\n          />\n          <div className={styles.chips}>\n            {list.map(v => (\n              <Button key={v} variant=\"secondary\" size=\"sm\" className={styles.chip} type=\"button\" onClick={() => onInsert(v)}>\n                {v}\n              </Button>\n            ))}\n             {list.length === 0 && <span className={styles.muted}>No matches</span>}\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAEe,SAAS,yBAAyB,KAQhD;QARgD,EAC/C,YAAY,EAAE,EACd,QAAQ,EACR,QAAQ,iBAAiB,EAK1B,GARgD;;IAS/C,MAAM,CAAC,GAAG,KAAK,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3B,MAAM,OAAO,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;kDACjB,IAAM,UAAU,MAAM;0DAAC,CAAA,IAAK,EAAE,WAAW,GAAG,QAAQ,CAAC,EAAE,WAAW;yDAAK,KAAK,CAAC,GAAG;iDAChF;QAAC;QAAW;KAAE;IAGhB,qBACE,6LAAC,sIAAA,CAAA,UAAO;;0BACN,6LAAC,sIAAA,CAAA,iBAAc;gBAAC,OAAO;0BACrB,cAAA,6LAAC,qIAAA,CAAA,SAAM;oBAAC,SAAQ;oBAAU,MAAK;oBAAK,WAAU;8BAC1C;;;;;;;;;;;0BAGN,6LAAC,sIAAA,CAAA,iBAAc;gBAAC,WAAU;0BACxB,cAAA,6LAAC;oBAAI,WAAW,4KAAA,CAAA,UAAM,CAAC,IAAI;;sCACzB,6LAAC;4BAAM,WAAW,4KAAA,CAAA,UAAM,CAAC,KAAK;sCAAG;;;;;;sCACjC,6LAAC,oIAAA,CAAA,QAAK;4BACJ,WAAW,4KAAA,CAAA,UAAM,CAAC,KAAK;4BACvB,OAAO;4BACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;4BACpC,aAAY;;;;;;sCAEd,6LAAC;4BAAI,WAAW,4KAAA,CAAA,UAAM,CAAC,KAAK;;gCACzB,KAAK,GAAG,CAAC,CAAA,kBACR,6LAAC,qIAAA,CAAA,SAAM;wCAAS,SAAQ;wCAAY,MAAK;wCAAK,WAAW,4KAAA,CAAA,UAAM,CAAC,IAAI;wCAAE,MAAK;wCAAS,SAAS,IAAM,SAAS;kDACzG;uCADU;;;;;gCAIb,KAAK,MAAM,KAAK,mBAAK,6LAAC;oCAAK,WAAW,4KAAA,CAAA,UAAM,CAAC,KAAK;8CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlE;GA3CwB;KAAA","debugId":null}},
    {"offset": {"line": 8164, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,6JAAA,CAAA,aAAgB,MAG7B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,qKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;0BAET,6LAAC,qKAAA,CAAA,QAAqB;gBAAC,WAAU;0BAC/B,cAAA,6LAAC,qKAAA,CAAA,QAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,6LAAC,qKAAA,CAAA,QAAqB;gBAAC,WAAU;;;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAoB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8226, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/AnalyticsTab.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormContext, useFieldArray } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport KeyValueEditor from '@/components/KeyValueEditor/KeyValueEditor';\nimport VariableChipAutocomplete from '@/components/VariableChipAutocomplete/VariableChipAutocomplete';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Slider } from '@/components/ui/slider';\nimport { Badge } from '@/components/ui/badge';\n\nexport default function AnalyticsTab({ variables = [] as string[] }) {\n  const { register, control, setValue, watch } = useFormContext();\n  const { fields, append, remove } = useFieldArray({ control, name: 'analytics.properties' });\n  const sampleRate = watch('analytics.sampleRate', 1);\n  const includedVars = watch('analytics.includeVars', []);\n\n  return (\n    <div className={styles.tabBody}>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"eventName\">Event Name</Label>\n        <Input id=\"eventName\" placeholder=\"flow.node.completed\" {...register('analytics.eventName')} />\n      </div>\n\n      <KeyValueEditor\n        label=\"Properties\"\n        items={fields as any[]}\n        onChange={(list) => setValue('analytics.properties', list, { shouldDirty: true })}\n      />\n\n      <div className=\"space-y-2\">\n        <Label>Sample Rate ({sampleRate})</Label>\n        <Slider\n          defaultValue={[sampleRate]}\n          max={1}\n          step={0.05}\n          onValueChange={(val) => setValue('analytics.sampleRate', val[0])}\n        />\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label>Include Variables</Label>\n        <VariableChipAutocomplete\n          variables={variables}\n          onInsert={(name) => {\n            const current: string[] = watch('analytics.includeVars') || [];\n            if (!current.includes(name)) setValue('analytics.includeVars', [...current, name]);\n          }}\n        />\n        <div className=\"flex flex-wrap gap-2 mt-2\">\n            {includedVars.map((v: string) => <Badge key={v} variant=\"secondary\">{v}</Badge>)}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEe,SAAS,aAAa,KAA8B;QAA9B,EAAE,YAAY,EAAE,AAAY,EAAE,GAA9B;;IACnC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,iBAAc,AAAD;IAC5D,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,gBAAa,AAAD,EAAE;QAAE;QAAS,MAAM;IAAuB;IACzF,MAAM,aAAa,MAAM,wBAAwB;IACjD,MAAM,eAAe,MAAM,yBAAyB,EAAE;IAEtD,qBACE,6LAAC;QAAI,WAAW,0KAAA,CAAA,UAAM,CAAC,OAAO;;0BAC5B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,oIAAA,CAAA,QAAK;wBAAC,SAAQ;kCAAY;;;;;;kCAC3B,6LAAC,oIAAA,CAAA,QAAK;wBAAC,IAAG;wBAAY,aAAY;wBAAuB,GAAG,SAAS,sBAAsB;;;;;;;;;;;;0BAG7F,6LAAC,yJAAA,CAAA,UAAc;gBACb,OAAM;gBACN,OAAO;gBACP,UAAU,CAAC,OAAS,SAAS,wBAAwB,MAAM;wBAAE,aAAa;oBAAK;;;;;;0BAGjF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,oIAAA,CAAA,QAAK;;4BAAC;4BAAc;4BAAW;;;;;;;kCAChC,6LAAC,qIAAA,CAAA,SAAM;wBACL,cAAc;4BAAC;yBAAW;wBAC1B,KAAK;wBACL,MAAM;wBACN,eAAe,CAAC,MAAQ,SAAS,wBAAwB,GAAG,CAAC,EAAE;;;;;;;;;;;;0BAInE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,oIAAA,CAAA,QAAK;kCAAC;;;;;;kCACP,6LAAC,6KAAA,CAAA,UAAwB;wBACvB,WAAW;wBACX,UAAU,CAAC;4BACT,MAAM,UAAoB,MAAM,4BAA4B,EAAE;4BAC9D,IAAI,CAAC,QAAQ,QAAQ,CAAC,OAAO,SAAS,yBAAyB;mCAAI;gCAAS;6BAAK;wBACnF;;;;;;kCAEF,6LAAC;wBAAI,WAAU;kCACV,aAAa,GAAG,CAAC,CAAC,kBAAc,6LAAC,oIAAA,CAAA,QAAK;gCAAS,SAAQ;0CAAa;+BAAxB;;;;;;;;;;;;;;;;;;;;;;AAKzD;GA5CwB;;QACyB,iKAAA,CAAA,iBAAc;QAC1B,iKAAA,CAAA,gBAAa;;;KAF1B","debugId":null}},
    {"offset": {"line": 8400, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/tabs/SubflowTab.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormContext, useFieldArray } from 'react-hook-form';\nimport styles from '../properties-panel.module.css';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Trash2 } from 'lucide-react';\n\nconst MappingList = ({ name, title, varLabel, valueLabel }: { name: string; title: string; varLabel: string; valueLabel: string; }) => {\n    const { control } = useFormContext();\n    const { fields, append, remove } = useFieldArray({ control, name });\n\n    return (\n        <Card>\n            <CardHeader>\n                <CardTitle>{title}</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n                {fields.map((field, index) => (\n                    <div key={field.id} className=\"flex items-end gap-2\">\n                        <div className=\"flex-1 space-y-2\">\n                            <Label>{varLabel}</Label>\n                            <Input {...control.register(`${name}.${index}.var`)} />\n                        </div>\n                        <div className=\"flex-1 space-y-2\">\n                            <Label>{valueLabel}</Label>\n                            <Input {...control.register(`${name}.${index}.value`)} />\n                        </div>\n                        <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={() => remove(index)}>\n                            <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                ))}\n                <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => append({ var: '', value: '' })}>+ Add Mapping</Button>\n            </CardContent>\n        </Card>\n    )\n}\n\n\nexport default function SubflowTab({ availableSubflows = [] as { id: string; name: string }[] }) {\n  const { register, setValue } = useFormContext();\n\n  return (\n    <div className={styles.tabBody}>\n        <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n                <Label>Subflow</Label>\n                <Select onValueChange={(v) => setValue('subflow.subflowId', v)}>\n                    <SelectTrigger><SelectValue placeholder=\"— Pick subflow —\" /></SelectTrigger>\n                    <SelectContent>\n                        {availableSubflows.map(sf => (\n                            <SelectItem key={sf.id} value={sf.id}>{sf.name}</SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            </div>\n            <div className=\"space-y-2\">\n                <Label>Mode</Label>\n                <Select defaultValue=\"synchronous\" onValueChange={(v) => setValue('subflow.mode', v)}>\n                    <SelectTrigger><SelectValue /></SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"synchronous\">Synchronous</SelectItem>\n                        <SelectItem value=\"fire_and_forget\">Fire & Forget</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n        </div>\n        \n        <MappingList\n            name=\"subflow.inputMapping\"\n            title=\"Input Mapping (parent → child)\"\n            varLabel=\"Child Variable\"\n            valueLabel=\"Parent Value (e.g. {{email}})\"\n        />\n\n        <MappingList\n            name=\"subflow.returnMapping\"\n            title=\"Return Mapping (child → parent)\"\n            varLabel=\"Parent Variable\"\n            valueLabel=\"Child Value\"\n        />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8728, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,mKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,6JAAA,CAAA,aAAgB,MAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,mKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;;;AAGb,SAAS,WAAW,GAAG,mKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,6JAAA,CAAA,aAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,6JAAA,CAAA,aAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8803, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/PropertiesPanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport styles from './properties-panel.module.css';\nimport { z } from 'zod';\n\nimport { type PropertiesPanelProps, type TabKey, TABS_FOR_NODE_TYPE } from './types';\nimport {\n  generalSchema,\n  messageSchema,\n  apiSchema,\n  logicSchema,\n  scheduleSchema,\n  campaignSchema,\n  aiSchema,\n  handoffSchema,\n  analyticsSchema,\n  subflowSchema,\n} from './schemas';\nimport GeneralTab from './tabs/GeneralTab';\nimport MessageTab from './tabs/MessageTab';\nimport APITab from './tabs/APITab';\nimport LogicTab from './tabs/LogicTab';\nimport ScheduleTab from './tabs/ScheduleTab';\nimport CampaignTab from './tabs/CampaignTab';\nimport AITab from './tabs/AITab';\nimport HandoffTab from './tabs/HandoffTab';\nimport AnalyticsTab from './tabs/AnalyticsTab';\nimport SubflowTab from './tabs/SubflowTab';\nimport { useDebouncedCallback } from '@/hooks/useDebouncedCallback';\nimport { X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\n\nconst TAB_LABEL: Record<TabKey, string> = {\n  general: 'General',\n  message: 'Message',\n  api: 'API/Webhook',\n  logic: 'Logic',\n  schedule: 'Schedule',\n  campaign: 'Campaign',\n  ai: 'AI Assist',\n  handoff: 'Handoff',\n  analytics: 'Analytics',\n  subflow: 'Sub‑flow',\n};\n\nconst TAB_SCHEMA_MAP: Record<TabKey, any> = {\n    general: generalSchema,\n    message: messageSchema('template'), // default context\n    api: apiSchema,\n    logic: logicSchema,\n    schedule: scheduleSchema,\n    campaign: campaignSchema,\n    ai: aiSchema,\n    handoff: handoffSchema,\n    analytics: analyticsSchema,\n    subflow: subflowSchema,\n}\n\nconst TAB_COMPONENTS: Record<TabKey, React.FC<any>> = {\n    general: GeneralTab,\n    message: MessageTab,\n    api: APITab,\n    logic: LogicTab,\n    ai: AITab,\n    schedule: ScheduleTab,\n    campaign: CampaignTab,\n    handoff: HandoffTab,\n    analytics: AnalyticsTab,\n    subflow: SubflowTab,\n};\n\n\nexport default function PropertiesPanel({\n  node,\n  onSave,\n  onClose,\n  waContext = 'template',\n  channels\n}: PropertiesPanelProps) {\n  const nodeType = node?.data?.type || 'end';\n  const availableTabs = TABS_FOR_NODE_TYPE[nodeType] || [];\n  \n  const [activeTab, setActiveTab] = useState<TabKey | undefined>(availableTabs[0]);\n\n  const schema = useMemo(() => {\n    if (!activeTab) return z.object({});\n    if (activeTab === 'message') {\n        return messageSchema(waContext);\n    }\n    return TAB_SCHEMA_MAP[activeTab];\n  }, [activeTab, waContext]);\n\n  const methods = useForm({\n    resolver: zodResolver(schema),\n    defaultValues: (node?.data as any) || {},\n    mode: 'onChange',\n  });\n\n  useEffect(() => {\n    methods.reset((node?.data as any) || {});\n    setActiveTab(availableTabs[0]);\n  }, [node?.id, methods]);\n\n  const debouncedSave = useDebouncedCallback((vals: any) => {\n    if (!node) return;\n    onSave(node.id, vals);\n  }, 400);\n\n  useEffect(() => {\n    const subscription = methods.watch((value) => {\n        debouncedSave(value);\n    });\n    return () => subscription.unsubscribe();\n  }, [methods.watch, debouncedSave]);\n  \n  useEffect(() => {\n    if (!availableTabs.includes(activeTab as TabKey)) {\n        setActiveTab(availableTabs[0]);\n    }\n  }, [availableTabs, activeTab]);\n\n\n  if (!node) return null;\n\n  if (availableTabs.length === 0) {\n    return (\n       <DialogContent className={styles.root}>\n        <DialogHeader>\n            <DialogTitle>Properties: {node?.data?.label ?? node?.id}</DialogTitle>\n            <DialogDescription>\n                This node has no configurable properties.\n            </DialogDescription>\n        </DialogHeader>\n         <DialogFooter>\n            <Button variant=\"outline\" onClick={onClose}>Close</Button>\n        </DialogFooter>\n      </DialogContent>\n    )\n  }\n\n  const TabContent = activeTab ? TAB_COMPONENTS[activeTab] : null;\n  const tabProps = {\n    waContext,\n    channels,\n    // Add other props needed by specific tabs here\n  };\n\n  return (\n    <DialogContent className={styles.root}>\n        <DialogHeader>\n            <DialogTitle>Properties: {node?.data?.label ?? node?.id}</DialogTitle>\n            <DialogDescription>\n                Configure the behavior of this node. Changes are saved automatically.\n            </DialogDescription>\n        </DialogHeader>\n\n      <FormProvider {...methods}>\n        <div className={styles.body}>\n          {availableTabs.length > 1 ? (\n             <Tabs value={activeTab} onValueChange={(val) => setActiveTab(val as TabKey)} className=\"w-full flex flex-col min-h-0\">\n                <TabsList className={`grid w-full grid-cols-${availableTabs.length}`}>\n                    {availableTabs.map((k) => (\n                        <TabsTrigger key={k} value={k}>\n                            {TAB_LABEL[k]}\n                        </TabsTrigger>\n                    ))}\n                </TabsList>\n                {TabContent && (\n                  <TabsContent value={activeTab!} className={styles.tabContent}>\n                      <TabContent {...tabProps} />\n                  </TabsContent>\n                )}\n            </Tabs>\n          ) : (\n             TabContent && <div className={styles.tabContent}><TabContent {...tabProps} /></div>\n          )}\n        </div>\n      </FormProvider>\n\n      <DialogFooter className={styles.footer}>\n        <ValidationSummary errors={methods.formState.errors} />\n        <Button variant=\"outline\" onClick={onClose}>Close</Button>\n      </DialogFooter>\n    </DialogContent>\n  );\n}\n\nfunction ValidationSummary({ errors }: { errors: Record<string, any> }) {\n    const errorMessages = Object.values(errors).map((e: any) => e.message).filter(Boolean);\n    if (errorMessages.length === 0) return <span className={styles.ok}>All good ✓</span>\n    \n    return (\n        <ul className={styles.problems} aria-live=\"polite\">\n        {errorMessages.map((msg, i) => (\n            <li key={i} className={styles.problemItem}>\n            ⚠ {String(msg)}\n            </li>\n        ))}\n        </ul>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAnCA;;;;;;;;;;;;;;;;;;;;;;AAqCA,MAAM,YAAoC;IACxC,SAAS;IACT,SAAS;IACT,KAAK;IACL,OAAO;IACP,UAAU;IACV,UAAU;IACV,IAAI;IACJ,SAAS;IACT,WAAW;IACX,SAAS;AACX;AAEA,MAAM,iBAAsC;IACxC,SAAS,kJAAA,CAAA,gBAAa;IACtB,SAAS,CAAA,GAAA,kJAAA,CAAA,gBAAa,AAAD,EAAE;IACvB,KAAK,kJAAA,CAAA,YAAS;IACd,OAAO,kJAAA,CAAA,cAAW;IAClB,UAAU,kJAAA,CAAA,iBAAc;IACxB,UAAU,kJAAA,CAAA,iBAAc;IACxB,IAAI,kJAAA,CAAA,WAAQ;IACZ,SAAS,kJAAA,CAAA,gBAAa;IACtB,WAAW,kJAAA,CAAA,kBAAe;IAC1B,SAAS,kJAAA,CAAA,gBAAa;AAC1B;AAEA,MAAM,iBAAgD;IAClD,SAAS,8JAAA,CAAA,UAAU;IACnB,SAAS,8JAAA,CAAA,UAAU;IACnB,KAAK,0JAAA,CAAA,UAAM;IACX,OAAO,4JAAA,CAAA,UAAQ;IACf,IAAI,yJAAA,CAAA,UAAK;IACT,UAAU,+JAAA,CAAA,UAAW;IACrB,UAAU,+JAAA,CAAA,UAAW;IACrB,SAAS,8JAAA,CAAA,UAAU;IACnB,WAAW,gKAAA,CAAA,UAAY;IACvB,SAAS,8JAAA,CAAA,UAAU;AACvB;AAGe,SAAS,gBAAgB,KAMjB;QANiB,EACtC,IAAI,EACJ,MAAM,EACN,OAAO,EACP,YAAY,UAAU,EACtB,QAAQ,EACa,GANiB;QAOrB,YAuEmB;;IAvEpC,MAAM,WAAW,CAAA,iBAAA,4BAAA,aAAA,KAAM,IAAI,cAAV,iCAAA,WAAY,IAAI,KAAI;IACrC,MAAM,gBAAgB,gJAAA,CAAA,qBAAkB,CAAC,SAAS,IAAI,EAAE;IAExD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAsB,aAAa,CAAC,EAAE;IAE/E,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;2CAAE;YACrB,IAAI,CAAC,WAAW,OAAO,qKAAA,CAAA,IAAC,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,cAAc,WAAW;gBACzB,OAAO,CAAA,GAAA,kJAAA,CAAA,gBAAa,AAAD,EAAE;YACzB;YACA,OAAO,cAAc,CAAC,UAAU;QAClC;0CAAG;QAAC;QAAW;KAAU;IAEzB,MAAM,UAAU,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;QACtB,UAAU,CAAA,GAAA,iKAAA,CAAA,cAAW,AAAD,EAAE;QACtB,eAAe,CAAC,iBAAA,2BAAA,KAAM,IAAI,AAAO,KAAK,CAAC;QACvC,MAAM;IACR;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,QAAQ,KAAK,CAAC,CAAC,iBAAA,2BAAA,KAAM,IAAI,AAAO,KAAK,CAAC;YACtC,aAAa,aAAa,CAAC,EAAE;QAC/B;oCAAG;QAAC,iBAAA,2BAAA,KAAM,EAAE;QAAE;KAAQ;IAEtB,MAAM,gBAAgB,CAAA,GAAA,uIAAA,CAAA,uBAAoB,AAAD;+DAAE,CAAC;YAC1C,IAAI,CAAC,MAAM;YACX,OAAO,KAAK,EAAE,EAAE;QAClB;8DAAG;IAEH,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,MAAM,eAAe,QAAQ,KAAK;0DAAC,CAAC;oBAChC,cAAc;gBAClB;;YACA;6CAAO,IAAM,aAAa,WAAW;;QACvC;oCAAG;QAAC,QAAQ,KAAK;QAAE;KAAc;IAEjC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,IAAI,CAAC,cAAc,QAAQ,CAAC,YAAsB;gBAC9C,aAAa,aAAa,CAAC,EAAE;YACjC;QACF;oCAAG;QAAC;QAAe;KAAU;IAG7B,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI,cAAc,MAAM,KAAK,GAAG;YAII;YAAA;QAHlC,qBACG,6LAAC,qIAAA,CAAA,gBAAa;YAAC,WAAW,0KAAA,CAAA,UAAM,CAAC,IAAI;;8BACpC,6LAAC,qIAAA,CAAA,eAAY;;sCACT,6LAAC,qIAAA,CAAA,cAAW;;gCAAC;gCAAa,CAAA,mBAAA,iBAAA,4BAAA,cAAA,KAAM,IAAI,cAAV,kCAAA,YAAY,KAAK,cAAjB,8BAAA,mBAAqB,iBAAA,2BAAA,KAAM,EAAE;;;;;;;sCACvD,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAItB,6LAAC,qIAAA,CAAA,eAAY;8BACV,cAAA,6LAAC,qIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAU,SAAS;kCAAS;;;;;;;;;;;;;;;;;IAItD;IAEA,MAAM,aAAa,YAAY,cAAc,CAAC,UAAU,GAAG;IAC3D,MAAM,WAAW;QACf;QACA;IAEF;QAKoC;IAHpC,qBACE,6LAAC,qIAAA,CAAA,gBAAa;QAAC,WAAW,0KAAA,CAAA,UAAM,CAAC,IAAI;;0BACjC,6LAAC,qIAAA,CAAA,eAAY;;kCACT,6LAAC,qIAAA,CAAA,cAAW;;4BAAC;4BAAa,CAAA,oBAAA,iBAAA,4BAAA,cAAA,KAAM,IAAI,cAAV,kCAAA,YAAY,KAAK,cAAjB,+BAAA,oBAAqB,iBAAA,2BAAA,KAAM,EAAE;;;;;;;kCACvD,6LAAC,qIAAA,CAAA,oBAAiB;kCAAC;;;;;;;;;;;;0BAKzB,6LAAC,iKAAA,CAAA,eAAY;gBAAE,GAAG,OAAO;0BACvB,cAAA,6LAAC;oBAAI,WAAW,0KAAA,CAAA,UAAM,CAAC,IAAI;8BACxB,cAAc,MAAM,GAAG,kBACrB,6LAAC,mIAAA,CAAA,OAAI;wBAAC,OAAO;wBAAW,eAAe,CAAC,MAAQ,aAAa;wBAAgB,WAAU;;0CACpF,6LAAC,mIAAA,CAAA,WAAQ;gCAAC,WAAW,AAAC,yBAA6C,OAArB,cAAc,MAAM;0CAC7D,cAAc,GAAG,CAAC,CAAC,kBAChB,6LAAC,mIAAA,CAAA,cAAW;wCAAS,OAAO;kDACvB,SAAS,CAAC,EAAE;uCADC;;;;;;;;;;4BAKzB,4BACC,6LAAC,mIAAA,CAAA,cAAW;gCAAC,OAAO;gCAAY,WAAW,0KAAA,CAAA,UAAM,CAAC,UAAU;0CACxD,cAAA,6LAAC;oCAAY,GAAG,QAAQ;;;;;;;;;;;;;;;;+BAKjC,4BAAc,6LAAC;wBAAI,WAAW,0KAAA,CAAA,UAAM,CAAC,UAAU;kCAAE,cAAA,6LAAC;4BAAY,GAAG,QAAQ;;;;;;;;;;;;;;;;;;;;;0BAKhF,6LAAC,qIAAA,CAAA,eAAY;gBAAC,WAAW,0KAAA,CAAA,UAAM,CAAC,MAAM;;kCACpC,6LAAC;wBAAkB,QAAQ,QAAQ,SAAS,CAAC,MAAM;;;;;;kCACnD,6LAAC,qIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAU,SAAS;kCAAS;;;;;;;;;;;;;;;;;;AAIpD;GAjHwB;;QAoBN,iKAAA,CAAA,UAAO;QAWD,uIAAA,CAAA,uBAAoB;;;KA/BpB;AAmHxB,SAAS,kBAAkB,KAA2C;QAA3C,EAAE,MAAM,EAAmC,GAA3C;IACvB,MAAM,gBAAgB,OAAO,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAW,EAAE,OAAO,EAAE,MAAM,CAAC;IAC9E,IAAI,cAAc,MAAM,KAAK,GAAG,qBAAO,6LAAC;QAAK,WAAW,0KAAA,CAAA,UAAM,CAAC,EAAE;kBAAE;;;;;;IAEnE,qBACI,6LAAC;QAAG,WAAW,0KAAA,CAAA,UAAM,CAAC,QAAQ;QAAE,aAAU;kBACzC,cAAc,GAAG,CAAC,CAAC,KAAK,kBACrB,6LAAC;gBAAW,WAAW,0KAAA,CAAA,UAAM,CAAC,WAAW;;oBAAE;oBACxC,OAAO;;eADD;;;;;;;;;;AAMrB;MAbS","debugId":null}},
    {"offset": {"line": 9191, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/PropertiesPanel/index.ts"],"sourcesContent":["export { default } from './PropertiesPanel';\nexport type { PropertiesPanelProps, TabKey } from './types';\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 9207, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/TestConsole/test-console.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actionRow\": \"test-console-module__CHttTW__actionRow\",\n  \"attChip\": \"test-console-module__CHttTW__attChip\",\n  \"attRow\": \"test-console-module__CHttTW__attRow\",\n  \"badge\": \"test-console-module__CHttTW__badge\",\n  \"badgeGreen\": \"test-console-module__CHttTW__badgeGreen\",\n  \"badgeOrange\": \"test-console-module__CHttTW__badgeOrange\",\n  \"body\": \"test-console-module__CHttTW__body\",\n  \"bot\": \"test-console-module__CHttTW__bot\",\n  \"btn\": \"test-console-module__CHttTW__btn\",\n  \"bubble\": \"test-console-module__CHttTW__bubble\",\n  \"bubbleText\": \"test-console-module__CHttTW__bubbleText\",\n  \"chatRoot\": \"test-console-module__CHttTW__chatRoot\",\n  \"chatScroll\": \"test-console-module__CHttTW__chatScroll\",\n  \"closeBtn\": \"test-console-module__CHttTW__closeBtn\",\n  \"contextPanel\": \"test-console-module__CHttTW__contextPanel\",\n  \"ctaChip\": \"test-console-module__CHttTW__ctaChip\",\n  \"ctxActions\": \"test-console-module__CHttTW__ctxActions\",\n  \"ctxRoot\": \"test-console-module__CHttTW__ctxRoot\",\n  \"ctxText\": \"test-console-module__CHttTW__ctxText\",\n  \"group\": \"test-console-module__CHttTW__group\",\n  \"header\": \"test-console-module__CHttTW__header\",\n  \"headerRight\": \"test-console-module__CHttTW__headerRight\",\n  \"inline\": \"test-console-module__CHttTW__inline\",\n  \"input\": \"test-console-module__CHttTW__input\",\n  \"inputRow\": \"test-console-module__CHttTW__inputRow\",\n  \"label\": \"test-console-module__CHttTW__label\",\n  \"qrBtn\": \"test-console-module__CHttTW__qrBtn\",\n  \"qrChip\": \"test-console-module__CHttTW__qrChip\",\n  \"qrRow\": \"test-console-module__CHttTW__qrRow\",\n  \"resizer\": \"test-console-module__CHttTW__resizer\",\n  \"root\": \"test-console-module__CHttTW__root\",\n  \"select\": \"test-console-module__CHttTW__select\",\n  \"sendBtn\": \"test-console-module__CHttTW__sendBtn\",\n  \"system\": \"test-console-module__CHttTW__system\",\n  \"theme_sms\": \"test-console-module__CHttTW__theme_sms\",\n  \"theme_whatsapp\": \"test-console-module__CHttTW__theme_whatsapp\",\n  \"title\": \"test-console-module__CHttTW__title\",\n  \"toolbar\": \"test-console-module__CHttTW__toolbar\",\n  \"traceError\": \"test-console-module__CHttTW__traceError\",\n  \"traceLine\": \"test-console-module__CHttTW__traceLine\",\n  \"traceNode\": \"test-console-module__CHttTW__traceNode\",\n  \"tracePanel\": \"test-console-module__CHttTW__tracePanel\",\n  \"traceRoot\": \"test-console-module__CHttTW__traceRoot\",\n  \"traceScroll\": \"test-console-module__CHttTW__traceScroll\",\n  \"traceToolbar\": \"test-console-module__CHttTW__traceToolbar\",\n  \"traceTs\": \"test-console-module__CHttTW__traceTs\",\n  \"traceType\": \"test-console-module__CHttTW__traceType\",\n  \"user\": \"test-console-module__CHttTW__user\",\n  \"voiceControls\": \"test-console-module__CHttTW__voiceControls\",\n  \"voiceRoot\": \"test-console-module__CHttTW__voiceRoot\",\n  \"warn\": \"test-console-module__CHttTW__warn\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 9266, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/parts/Toolbar.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport styles from '../test-console.module.css';\nimport type { Channel, EngineStatus } from '../types';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Play, Pause, Square, SkipForward, RotateCcw, FileText, Eraser, Binary } from 'lucide-react';\n\nfunction cn(...xs: Array<string | false | null | undefined>) { return xs.filter(Boolean).join(' '); }\n\nexport default function Toolbar({\n  channel, setChannel,\n  status,\n  onPlay, onPause, onStep, onRestart,\n  onClearChat, onClearTrace,\n  onToggleContext, onExportTrace,\n}: {\n  channel: Channel;\n  setChannel: (c: Channel) => void;\n  status: EngineStatus;\n  onPlay: () => void;\n  onPause: () => void;\n  onStep: () => void;\n  onRestart: () => void;\n  onClearChat: () => void;\n  onClearTrace: () => void;\n  onToggleContext: () => void;\n  onExportTrace: () => void;\n}) {\n  const CHANNELS: Channel[] = ['whatsapp','sms','email','push','voice','slack','teams','telegram'];\n  const busy = status === 'running';\n\n  return (\n    <div className={styles.toolbar}>\n      <div className={styles.group}>\n        <Select value={channel} onValueChange={(v: Channel) => setChannel(v)}>\n            <SelectTrigger className=\"w-[120px] h-8\">\n                <SelectValue/>\n            </SelectTrigger>\n            <SelectContent>\n                {CHANNELS.map(ch => <SelectItem key={ch} value={ch}>{ch.toUpperCase()}</SelectItem>)}\n            </SelectContent>\n        </Select>\n      </div>\n\n      <div className={styles.group}>\n        {status !== 'running' ? (\n          <Button size=\"sm\" variant=\"outline\" onClick={onPlay} disabled={busy}><Play className=\"h-4 w-4 mr-1\"/> Play</Button>\n        ) : (\n          <Button size=\"sm\" variant=\"outline\" onClick={onPause} disabled={!busy}><Pause className=\"h-4 w-4 mr-1\"/> Pause</Button>\n        )}\n        <Button size=\"sm\" variant=\"outline\" onClick={onStep} disabled={busy}><SkipForward className=\"h-4 w-4 mr-1\"/> Step</Button>\n        <Button size=\"sm\" variant=\"outline\" onClick={onRestart}><RotateCcw className=\"h-4 w-4 mr-1\"/> Restart</Button>\n      </div>\n\n      <div className={styles.group}>\n        <Button size=\"sm\" variant=\"outline\" onClick={onToggleContext}><Binary className=\"h-4 w-4 mr-1\"/> Context</Button>\n        <Button size=\"sm\" variant=\"outline\" onClick={onExportTrace}><FileText className=\"h-4 w-4 mr-1\"/> Export</Button>\n        <Button size=\"sm\" variant=\"outline\" onClick={onClearChat}><Eraser className=\"h-4 w-4 mr-1\"/> Chat</Button>\n        <Button size=\"sm\" variant=\"outline\" onClick={onClearTrace}><Eraser className=\"h-4 w-4 mr-1\"/> Trace</Button>\n      </div>\n\n      <span className={cn(styles.badge, status === 'running' && styles.badgeGreen, status === 'paused' && styles.badgeOrange)}>\n        {status.toUpperCase()}\n      </span>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9550, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/parts/ChatPreview.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport styles from '../test-console.module.css';\nimport type { Channel, ChatMessage, QuickReply } from '../types';\nimport { smsSegments } from '../utils/sms';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\n\nfunction cn(...xs: Array<string | false | null | undefined>) { return xs.filter(Boolean).join(' '); }\n\nexport default function ChatPreview({\n  messages,\n  channel,\n  onUserReply,\n  autoScroll = true\n}: {\n  messages: ChatMessage[];\n  channel: Channel;\n  onUserReply: (text: string) => void;\n  autoScroll?: boolean;\n}) {\n  const scrollRef = useRef<HTMLDivElement | null>(null);\n  const [text, setText] = useState('');\n\n  const quickReplies: QuickReply[] = useMemo(() => {\n    const lastBot = [...messages].reverse().find(m => m.from === 'bot');\n    return lastBot?.actions?.buttons ?? [];\n  }, [messages]);\n\n  useEffect(() => {\n    if (!autoScroll || !scrollRef.current) return;\n    scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n  }, [messages, autoScroll]);\n\n  function send() {\n    const val = text.trim();\n    if (!val) return;\n    onUserReply(val);\n    setText('');\n  }\n\n  return (\n    <div className={styles.chatRoot}>\n      <div ref={scrollRef} className={cn(styles.chatScroll, styles[`theme_${channel}`])}>\n        {messages.map((msg) => (\n          <div key={msg.id} className={cn(styles.bubble, msg.from === 'user' ? styles.user : msg.from === 'bot' ? styles.bot : styles.system)}>\n            {msg.text && <div className={styles.bubbleText}>{msg.text}</div>}\n            \n            {msg.actions?.buttons && msg.actions.buttons.length > 0 && (\n              <div className={styles.actionRow}>\n                {(msg.actions.buttons ?? []).map(b => <button key={b.id} className={styles.qrBtn} onClick={() => onUserReply(b.label)}>{b.label}</button>)}\n              </div>\n            )}\n\n            {msg.attachments && msg.attachments.length > 0 && (\n              <div className={styles.attRow}>\n                {msg.attachments.map(a => <span key={a.id} className={styles.attChip}>{a.type.toUpperCase()}</span>)}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {channel !== 'voice' && (\n        <div className={styles.inputRow}>\n          <Input\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); } }}\n            placeholder=\"Type a reply…\"\n          />\n          <Button onClick={send}>Send</Button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9720, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/parts/VoicePreview.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport styles from '../test-console.module.css';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\n\nexport default function VoicePreview({ ttsText }: { ttsText?: string }) {\n  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);\n  const [voiceIdx, setVoiceIdx] = useState<number>(0);\n  const [rate, setRate] = useState(1);\n  const [pitch, setPitch] = useState(1);\n  \n  useEffect(() => {\n    if (typeof window === 'undefined' || !('speechSynthesis' in window)) return;\n    function populate() {\n      const availableVoices = window.speechSynthesis.getVoices();\n      setVoices(availableVoices);\n      const defaultVoiceIndex = availableVoices.findIndex(v => v.default);\n      setVoiceIdx(defaultVoiceIndex > -1 ? defaultVoiceIndex : 0);\n    }\n    populate();\n    window.speechSynthesis.onvoiceschanged = populate;\n    return () => { window.speechSynthesis.onvoiceschanged = null; };\n  }, []);\n\n  useEffect(() => {\n    if (!ttsText || typeof window === 'undefined' || !('speechSynthesis' in window) || voices.length === 0) return;\n    const u = new SpeechSynthesisUtterance(ttsText);\n    u.voice = voices[voiceIdx];\n    u.rate = rate;\n    u.pitch = pitch;\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(u);\n  }, [ttsText, voices, voiceIdx, rate, pitch]);\n\n  const canSpeak = useMemo(() => typeof window !== 'undefined' && 'speechSynthesis' in window, []);\n\n  if (!canSpeak) {\n      return <div className={styles.muted}>Web Speech not supported in this browser.</div>\n  }\n  \n  return (\n    <div className={styles.voiceRoot}>\n        <div className={styles.voiceControls}>\n          <div className=\"space-y-2\">\n            <Label>Voice</Label>\n            <Select value={String(voiceIdx)} onValueChange={(v) => setVoiceIdx(Number(v))}>\n                <SelectTrigger><SelectValue/></SelectTrigger>\n                <SelectContent>\n                    {voices.map((v, i) => <SelectItem key={v.name + i} value={String(i)}>{v.name} ({v.lang})</SelectItem>)}\n                </SelectContent>\n            </Select>\n          </div>\n          <div className=\"space-y-2\">\n            <Label>Rate ({rate.toFixed(1)})</Label>\n            <Slider defaultValue={[rate]} min={0.5} max={1.5} step={0.1} onValueChange={(v) => setRate(v[0])} />\n          </div>\n           <div className=\"space-y-2\">\n            <Label>Pitch ({pitch.toFixed(1)})</Label>\n            <Slider defaultValue={[pitch]} min={0.5} max={1.5} step={0.1} onValueChange={(v) => setPitch(v[0])} />\n          </div>\n        </div>\n        <div className={styles.muted}>Last bot message is spoken automatically.</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAOe,SAAS,aAAa,KAAiC;QAAjC,EAAE,OAAO,EAAwB,GAAjC;;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA0B,EAAE;IAC/D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,aAAkB,eAAe,CAAC,CAAC,qBAAqB,MAAM,GAAG;YACrE,SAAS;gBACP,MAAM,kBAAkB,OAAO,eAAe,CAAC,SAAS;gBACxD,UAAU;gBACV,MAAM,oBAAoB,gBAAgB,SAAS;yEAAC,CAAA,IAAK,EAAE,OAAO;;gBAClE,YAAY,oBAAoB,CAAC,IAAI,oBAAoB;YAC3D;YACA;YACA,OAAO,eAAe,CAAC,eAAe,GAAG;YACzC;0CAAO;oBAAQ,OAAO,eAAe,CAAC,eAAe,GAAG;gBAAM;;QAChE;iCAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,WAAW,aAAkB,eAAe,CAAC,CAAC,qBAAqB,MAAM,KAAK,OAAO,MAAM,KAAK,GAAG;YACxG,MAAM,IAAI,IAAI,yBAAyB;YACvC,EAAE,KAAK,GAAG,MAAM,CAAC,SAAS;YAC1B,EAAE,IAAI,GAAG;YACT,EAAE,KAAK,GAAG;YACV,OAAO,eAAe,CAAC,MAAM;YAC7B,OAAO,eAAe,CAAC,KAAK,CAAC;QAC/B;iCAAG;QAAC;QAAS;QAAQ;QAAU;QAAM;KAAM;IAE3C,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;0CAAE,IAAM,aAAkB,eAAe,qBAAqB;yCAAQ,EAAE;IAE/F,IAAI,CAAC,UAAU;QACX,qBAAO,6LAAC;YAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,KAAK;sBAAE;;;;;;IACzC;IAEA,qBACE,6LAAC;QAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,SAAS;;0BAC5B,6LAAC;gBAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,aAAa;;kCAClC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,oIAAA,CAAA,QAAK;0CAAC;;;;;;0CACP,6LAAC,qIAAA,CAAA,SAAM;gCAAC,OAAO,OAAO;gCAAW,eAAe,CAAC,IAAM,YAAY,OAAO;;kDACtE,6LAAC,qIAAA,CAAA,gBAAa;kDAAC,cAAA,6LAAC,qIAAA,CAAA,cAAW;;;;;;;;;;kDAC3B,6LAAC,qIAAA,CAAA,gBAAa;kDACT,OAAO,GAAG,CAAC,CAAC,GAAG,kBAAM,6LAAC,qIAAA,CAAA,aAAU;gDAAkB,OAAO,OAAO;;oDAAK,EAAE,IAAI;oDAAC;oDAAG,EAAE,IAAI;oDAAC;;+CAAhD,EAAE,IAAI,GAAG;;;;;;;;;;;;;;;;;;;;;;kCAI1D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,oIAAA,CAAA,QAAK;;oCAAC;oCAAO,KAAK,OAAO,CAAC;oCAAG;;;;;;;0CAC9B,6LAAC,qIAAA,CAAA,SAAM;gCAAC,cAAc;oCAAC;iCAAK;gCAAE,KAAK;gCAAK,KAAK;gCAAK,MAAM;gCAAK,eAAe,CAAC,IAAM,QAAQ,CAAC,CAAC,EAAE;;;;;;;;;;;;kCAEhG,6LAAC;wBAAI,WAAU;;0CACd,6LAAC,oIAAA,CAAA,QAAK;;oCAAC;oCAAQ,MAAM,OAAO,CAAC;oCAAG;;;;;;;0CAChC,6LAAC,qIAAA,CAAA,SAAM;gCAAC,cAAc;oCAAC;iCAAM;gCAAE,KAAK;gCAAK,KAAK;gCAAK,MAAM;gCAAK,eAAe,CAAC,IAAM,SAAS,CAAC,CAAC,EAAE;;;;;;;;;;;;;;;;;;0BAGrG,6LAAC;gBAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,KAAK;0BAAE;;;;;;;;;;;;AAGtC;GA3DwB;KAAA","debugId":null}},
    {"offset": {"line": 9956, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/parts/TracePanel.tsx"],"sourcesContent":["'use client';\nimport React, { useMemo, useState } from 'react';\nimport styles from '../test-console.module.css';\nimport type { TraceEvent } from '../types';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\nfunction cn(...xs: Array<string | false | null | undefined>) { return xs.filter(Boolean).join(' '); }\n\nexport default function TracePanel({\n  trace, onClear\n}: {\n  trace: TraceEvent[];\n  onClear: () => void;\n}) {\n  const [q, setQ] = useState('');\n  const [typeFilter, setTypeFilter] = useState<string>('');\n\n  const types = useMemo(() => {\n    const s = new Set(trace.map(t => t.type).filter(Boolean));\n    return ['', ...Array.from(s)];\n  }, [trace]);\n\n  const filtered = useMemo(() => trace.filter(t => {\n    if (typeFilter && t.type !== typeFilter) return false;\n    if (!q) return true;\n    const line = `${t.type} ${t.nodeId ?? ''} ${t.nodeLabel ?? ''} ${t.result ?? ''} ${JSON.stringify(t.data ?? {})}`.toLowerCase();\n    return line.includes(q.toLowerCase());\n  }), [trace, q, typeFilter]);\n\n  return (\n    <div className={styles.traceRoot}>\n      <div className={styles.traceToolbar}>\n        <Input className=\"h-8\" placeholder=\"Search trace…\" value={q} onChange={(e) => setQ(e.target.value)} />\n        <Select value={typeFilter} onValueChange={setTypeFilter}>\n            <SelectTrigger className=\"w-[120px] h-8 text-xs\"><SelectValue placeholder=\"All types\"/></SelectTrigger>\n            <SelectContent>\n                {types.map(t => <SelectItem key={t || 'all'} value={t}>{t || 'All types'}</SelectItem>)}\n            </SelectContent>\n        </Select>\n      </div>\n\n      <div className={styles.traceScroll}>\n        {filtered.length === 0 && <div className={styles.muted}>No trace events.</div>}\n        {filtered.map((line, idx) => (\n          <div key={idx} className={cn(styles.traceLine, line.type === 'error' && styles.traceError)}>\n            <span className={styles.traceTs}>{new Date(line.ts).toLocaleTimeString()}</span>\n            {line.nodeId && <span className={styles.traceNode}>[{line.nodeId}{line.nodeLabel ? ` • ${line.nodeLabel}` : ''}]</span>}\n            <span className={styles.traceType}>{line.type}</span>\n            {line.result && <span className={styles.traceMsg}>— {line.result}</span>}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10156, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/parts/ContextEditor.tsx"],"sourcesContent":["'use client';\nimport React, { useMemo, useState } from 'react';\nimport styles from '../test-console.module.css';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Button } from '@/components/ui/button';\n\nexport default function ContextEditor({\n  initial,\n  onApply\n}: {\n  initial?: Record<string, unknown>;\n  onApply: (ctx: Record<string, unknown>) => void;\n}) {\n  const [text, setText] = useState(() => JSON.stringify(initial ?? {}, null, 2));\n  const [err, setErr] = useState<string | null>(null);\n\n  const valid = useMemo(() => {\n    try { JSON.parse(text); return true; } catch { return false; }\n  }, [text]);\n\n  function apply() {\n    try {\n      const json = JSON.parse(text);\n      onApply(json);\n      setErr(null);\n    } catch (e: any) {\n      setErr(e?.message || 'Invalid JSON');\n    }\n  }\n\n  return (\n    <div className={styles.ctxRoot}>\n      <Textarea className={styles.ctxText} value={text} onChange={(e) => setText(e.target.value)} />\n      <div className={styles.ctxActions}>\n        <Button size=\"sm\" onClick={apply} disabled={!valid}>Apply</Button>\n        <span className={err ? styles.warn : styles.muted}>{err ? `Error: ${err}` : 'Context affects evaluation of conditions & variables.'}</span>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS,cAAc,KAMrC;QANqC,EACpC,OAAO,EACP,OAAO,EAIR,GANqC;;IAOpC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD;kCAAE,IAAM,KAAK,SAAS,CAAC,oBAAA,qBAAA,UAAW,CAAC,GAAG,MAAM;;IAC3E,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAE9C,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;wCAAE;YACpB,IAAI;gBAAE,KAAK,KAAK,CAAC;gBAAO,OAAO;YAAM,EAAE,UAAM;gBAAE,OAAO;YAAO;QAC/D;uCAAG;QAAC;KAAK;IAET,SAAS;QACP,IAAI;YACF,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,QAAQ;YACR,OAAO;QACT,EAAE,OAAO,GAAQ;YACf,OAAO,CAAA,cAAA,wBAAA,EAAG,OAAO,KAAI;QACvB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,OAAO;;0BAC5B,6LAAC,uIAAA,CAAA,WAAQ;gBAAC,WAAW,kKAAA,CAAA,UAAM,CAAC,OAAO;gBAAE,OAAO;gBAAM,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;0BACzF,6LAAC;gBAAI,WAAW,kKAAA,CAAA,UAAM,CAAC,UAAU;;kCAC/B,6LAAC,qIAAA,CAAA,SAAM;wBAAC,MAAK;wBAAK,SAAS;wBAAO,UAAU,CAAC;kCAAO;;;;;;kCACpD,6LAAC;wBAAK,WAAW,MAAM,kKAAA,CAAA,UAAM,CAAC,IAAI,GAAG,kKAAA,CAAA,UAAM,CAAC,KAAK;kCAAG,MAAM,AAAC,UAAa,OAAJ,OAAQ;;;;;;;;;;;;;;;;;;AAIpF;GAjCwB;KAAA","debugId":null}},
    {"offset": {"line": 10258, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/TestConsole.tsx"],"sourcesContent":["'use client';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport styles from './test-console.module.css';\nimport type { Channel, ChatMessage, TestConsoleProps, TraceEvent, EngineStatus } from './types';\nimport Toolbar from './parts/Toolbar';\nimport ChatPreview from './parts/ChatPreview';\nimport VoicePreview from './parts/VoicePreview';\nimport TracePanel from './parts/TracePanel';\nimport ContextEditor from './parts/ContextEditor';\nimport { X, PanelLeftOpen, PanelRightOpen, ChevronsUpDown } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Label } from '@/components/ui/label';\n\nfunction cn(...xs: Array<string | false | null | undefined>) { return xs.filter(Boolean).join(' '); }\n\nconst DEFAULT_CHANNEL: Channel = 'whatsapp';\n\nexport default function TestConsole({\n  isOpen,\n  onClose,\n  engine,\n  initialChannel = DEFAULT_CHANNEL,\n  initialContext,\n  flowId,\n  className\n}: TestConsoleProps) {\n  const [channel, setChannel] = useState<Channel>(initialChannel);\n  const [status, setStatus] = useState<EngineStatus>('idle');\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [trace, setTrace] = useState<TraceEvent[]>([]);\n  const [showContext, setShowContext] = useState(false);\n  const [autoScroll, setAutoScroll] = useState(true);\n  const panelRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (!engine) return;\n    const onBot = (msg: any) => setMessages((m) => m.concat({ ...msg, id: msg.id || crypto.randomUUID(), from: 'bot' }));\n    const onTrace = (evt: any) => setTrace((t) => t.concat(evt));\n    const onStatus = (st: any) => setStatus(st);\n\n    const unsubBot = engine.on('botMessage', onBot);\n    const unsubTrace = engine.on('trace', onTrace);\n    const unsubStatus = engine.on('status', onStatus);\n\n    if (isOpen) {\n      engine.start(flowId);\n    } else {\n        engine.stop();\n    }\n\n    return () => {\n      unsubBot();\n      unsubTrace();\n      unsubStatus();\n    };\n  }, [engine, flowId, isOpen]);\n\n  useEffect(() => {\n    if (engine) engine.configure({ channel });\n  }, [channel, engine]);\n  \n  const lastBotText = useMemo(() => {\n    const b = [...messages].reverse().find(m => m.from === 'bot');\n    return b?.text;\n  }, [messages]);\n\n  function sendUserReply(text: string) {\n    const msg: ChatMessage = { id: crypto.randomUUID(), from: 'user', text };\n    setMessages((m) => m.concat(msg));\n    engine?.pushUserInput(text);\n  }\n\n  const onRestart = () => {\n    engine?.reset?.();\n    engine?.start(flowId);\n    setMessages([]);\n    setTrace([]);\n  };\n\n  const onExportTrace = () => {\n    const blob = new Blob([JSON.stringify(trace, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'trace.json';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <aside ref={panelRef} className={cn(styles.root, className)} aria-label=\"Test Console\">\n      <div className={styles.header}>\n        <h2 className={styles.title}>Test Console</h2>\n        <div className={styles.headerRight}>\n          <div className={styles.inline}>\n            <Checkbox id=\"autoscroll\" checked={autoScroll} onCheckedChange={(c) => setAutoScroll(!!c)} />\n            <Label htmlFor=\"autoscroll\" className=\"text-xs\">Auto-scroll</Label>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} aria-label=\"Close\">\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <Toolbar\n        channel={channel}\n        setChannel={setChannel}\n        status={status}\n        onPlay={() => engine.start()}\n        onPause={() => engine.stop()} // Simple pause/play\n        onStep={() => {}} // Not implemented in this engine version\n        onRestart={onRestart}\n        onClearChat={() => setMessages([])}\n        onClearTrace={() => setTrace([])}\n        onToggleContext={() => setShowContext((v) => !v)}\n        onExportTrace={onExportTrace}\n      />\n\n      <div className={styles.body}>\n        {channel === 'voice' ? (\n          <VoicePreview ttsText={lastBotText} />\n        ) : (\n          <ChatPreview messages={messages} channel={channel} onUserReply={sendUserReply} autoScroll={autoScroll} />\n        )}\n\n        {showContext && (\n          <div className={styles.contextPanel}>\n            <ContextEditor\n              initial={initialContext}\n              onApply={(ctx) => {\n                engine.reset();\n                engine.configure({ channel, ...ctx });\n                engine.start(flowId);\n              }}\n            />\n          </div>\n        )}\n\n        <div className={styles.tracePanel}>\n          <TracePanel trace={trace} onClear={() => setTrace([])} />\n        </div>\n      </div>\n    </aside>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10571, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/engine/EventBus.ts"],"sourcesContent":["export class EventBus<T extends Record<string, any>> {\n  private map = new Map<keyof T, Set<(p: any) => void>>();\n\n  on<K extends keyof T>(event: K, fn: (payload: T[K]) => void) {\n    if (!this.map.has(event)) this.map.set(event, new Set());\n    this.map.get(event)!.add(fn as any);\n    return () => this.off(event, fn);\n  }\n\n  off<K extends keyof T>(event: K, fn: (payload: T[K]) => void) {\n    this.map.get(event)?.delete(fn as any);\n  }\n\n  emit<K extends keyof T>(event: K, payload: T[K]) {\n    this.map.get(event)?.forEach((fn) => (fn as any)(payload));\n  }\n\n  clear() {\n    this.map.clear();\n  }\n}\n"],"names":[],"mappings":";;;;;AAAO,MAAM;IAGX,GAAsB,KAAQ,EAAE,EAA2B,EAAE;QAC3D,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,IAAI;QAClD,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAQ,GAAG,CAAC;QACzB,OAAO,IAAM,IAAI,CAAC,GAAG,CAAC,OAAO;IAC/B;IAEA,IAAuB,KAAQ,EAAE,EAA2B,EAAE;YAC5D;SAAA,gBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAb,oCAAA,cAAqB,MAAM,CAAC;IAC9B;IAEA,KAAwB,KAAQ,EAAE,OAAa,EAAE;YAC/C;SAAA,gBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAb,oCAAA,cAAqB,OAAO,CAAC,CAAC,KAAO,AAAC,GAAW;IACnD;IAEA,QAAQ;QACN,IAAI,CAAC,GAAG,CAAC,KAAK;IAChB;;QAlBA,+KAAQ,OAAM,IAAI;;AAmBpB","debugId":null}},
    {"offset": {"line": 10606, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/engine/clock.ts"],"sourcesContent":["export interface IClock {\n  set(fn: () => void, ms: number): number;\n  clear(id: number): void;\n  flush?(ms?: number): void; // mock-only: advance virtual time\n}\n\nexport class RealClock implements IClock {\n  set(fn: () => void, ms: number) { return (setTimeout(fn, ms) as unknown) as number; }\n  clear(id: number) { clearTimeout(id as unknown as number); }\n}\n\ntype Task = { id: number; at: number; fn: () => void };\nexport class MockClock implements IClock {\n  private now = 0;\n  private q: Task[] = [];\n  private seq = 1;\n  set(fn: () => void, ms: number) {\n    const id = this.seq++;\n    this.q.push({ id, at: this.now + ms, fn });\n    this.q.sort((a, b) => a.at - b.at);\n    return id;\n  }\n  clear(id: number) { this.q = this.q.filter(t => t.id !== id); }\n  flush(ms?: number) {\n    const end = ms == null ? Number.POSITIVE_INFINITY : this.now + ms;\n    while (this.q.length && this.q[0].at <= end) {\n      const t = this.q.shift()!;\n      this.now = t.at;\n      t.fn();\n    }\n    this.now = Math.min(this.now, end);\n  }\n}\n"],"names":[],"mappings":";;;;;;AAMO,MAAM;IACX,IAAI,EAAc,EAAE,EAAU,EAAE;QAAE,OAAQ,WAAW,IAAI;IAA2B;IACpF,MAAM,EAAU,EAAE;QAAE,aAAa;IAA0B;AAC7D;AAGO,MAAM;IAIX,IAAI,EAAc,EAAE,EAAU,EAAE;QAC9B,MAAM,KAAK,IAAI,CAAC,GAAG;QACnB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAAE;YAAI,IAAI,IAAI,CAAC,GAAG,GAAG;YAAI;QAAG;QACxC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,EAAE,GAAG,EAAE,EAAE;QACjC,OAAO;IACT;IACA,MAAM,EAAU,EAAE;QAAE,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAAK;IAC9D,MAAM,EAAW,EAAE;QACjB,MAAM,MAAM,MAAM,OAAO,OAAO,iBAAiB,GAAG,IAAI,CAAC,GAAG,GAAG;QAC/D,MAAO,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,IAAK;YAC3C,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK;YACtB,IAAI,CAAC,GAAG,GAAG,EAAE,EAAE;YACf,EAAE,EAAE;QACN;QACA,IAAI,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE;IAChC;;QAlBA,+KAAQ,OAAM;QACd,+KAAQ,KAAY,EAAE;QACtB,+KAAQ,OAAM;;AAiBhB","debugId":null}},
    {"offset": {"line": 10658, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/engine/evaluator.ts"],"sourcesContent":["/** Very small mustache-like variable expansion: \"Hello {{name}}!\" */\nexport function renderTemplate(tpl: string, vars: Record<string, any>) {\n  return tpl.replace(/{{\\s*([\\w.]+)\\s*}}/g, (_, key) => {\n    try {\n        const val = key.split('.').reduce((o, k) => (o ? o[k] : undefined), vars as any);\n        return val == null ? '' : String(val);\n    } catch {\n        return '';\n    }\n  });\n}\n\n/**\n * Expression evaluator used by Condition nodes.\n * Supports JS expressions referencing `vars` (e.g., `vars.age > 18 && vars.country === \"US\"`).\n * NOTE: for test/dev usage only; do not use for untrusted user expressions in production.\n */\nexport function evalExpression(expr: string, vars: Record<string, any>) {\n  try {\n    const f = new Function('vars', `\"use strict\"; return (${expr});`);\n    return !!f(vars);\n  } catch {\n    return false;\n  }\n}\n\n/** Parses delay strings like \"30 m\", \"5s\", \"1200ms\", or numeric milliseconds. */\nexport function parseDelay(input: string | number | undefined): number {\n  if (typeof input === 'number' && isFinite(input)) return Math.max(0, input);\n  if (!input || typeof input !== 'string') return 0;\n  const s = String(input).trim().toLowerCase();\n  const m = s.match(/^(\\d+(?:\\.\\d+)?)(\\s*(ms|s|m|h))?$/);\n  if (!m) return 0;\n  const n = parseFloat(m[1]);\n  const unit = (m[3] || 'ms') as 'ms' | 's' | 'm' | 'h';\n  const mult = unit === 'ms' ? 1 : unit === 's' ? 1000 : unit === 'm' ? 60000 : 3600000;\n  return Math.round(n * mult);\n}\n"],"names":[],"mappings":"AAAA,mEAAmE;;;;;AAC5D,SAAS,eAAe,GAAW,EAAE,IAAyB;IACnE,OAAO,IAAI,OAAO,CAAC,uBAAuB,CAAC,GAAG;QAC5C,IAAI;YACA,MAAM,MAAM,IAAI,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC,GAAG,IAAO,IAAI,CAAC,CAAC,EAAE,GAAG,WAAY;YACpE,OAAO,OAAO,OAAO,KAAK,OAAO;QACrC,EAAE,UAAM;YACJ,OAAO;QACX;IACF;AACF;AAOO,SAAS,eAAe,IAAY,EAAE,IAAyB;IACpE,IAAI;QACF,MAAM,IAAI,IAAI,SAAS,QAAQ,AAAC,yBAA6B,OAAL,MAAK;QAC7D,OAAO,CAAC,CAAC,EAAE;IACb,EAAE,UAAM;QACN,OAAO;IACT;AACF;AAGO,SAAS,WAAW,KAAkC;IAC3D,IAAI,OAAO,UAAU,YAAY,SAAS,QAAQ,OAAO,KAAK,GAAG,CAAC,GAAG;IACrE,IAAI,CAAC,SAAS,OAAO,UAAU,UAAU,OAAO;IAChD,MAAM,IAAI,OAAO,OAAO,IAAI,GAAG,WAAW;IAC1C,MAAM,IAAI,EAAE,KAAK,CAAC;IAClB,IAAI,CAAC,GAAG,OAAO;IACf,MAAM,IAAI,WAAW,CAAC,CAAC,EAAE;IACzB,MAAM,OAAQ,CAAC,CAAC,EAAE,IAAI;IACtB,MAAM,OAAO,SAAS,OAAO,IAAI,SAAS,MAAM,OAAO,SAAS,MAAM,QAAQ;IAC9E,OAAO,KAAK,KAAK,CAAC,IAAI;AACxB","debugId":null}},
    {"offset": {"line": 10701, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/engine/FlowCompiler.ts"],"sourcesContent":["import type { Edge, Node } from 'reactflow';\n\nexport type RTNode = {\n  id: string;\n  kind: 'message' | 'ask' | 'condition' | 'delay' | 'api' | 'unknown';\n  data: any;\n};\nexport type OutEdge = { to: string; branch?: string; label?: string };\n\nexport type Compiled = {\n  nodes: Map<string, RTNode>;\n  next: Map<string, OutEdge[]>;\n  starts: string[];\n};\n\nfunction normKind(n: Node): RTNode['kind'] {\n  const t = (n.type || '').toLowerCase();\n  const k = (n.data?.kind || n.data?.label || '').toLowerCase();\n  const key = t || k;\n  \n  if (['message', 'sms', 'email', 'push', 'voice', 'chattemplate', 'carousel'].some(term => key.includes(term))) return 'message';\n  if (['ask', 'askquestion', 'input'].some(term => key.includes(term))) return 'ask';\n  if (['condition', 'logic', 'branch'].some(term => key.includes(term))) return 'condition';\n  if (['delay', 'wait', 'timer', 'timing'].some(term => key.includes(term))) return 'delay';\n  if (['webhook', 'api', 'apicall', 'apicallout'].some(term => key.includes(term))) return 'api';\n  if (['get started'].some(term => key.includes(term))) return 'message'; // Treat start as a message\n  \n  return 'unknown';\n}\n\n\nexport function compile(nodes: Node[], edges: Edge[]): Compiled {\n  const nmap = new Map<string, Node>();\n  nodes.forEach(n => nmap.set(n.id, n));\n\n  const rtNodes = new Map<string, RTNode>();\n  nodes.forEach(n => rtNodes.set(n.id, { id: n.id, kind: normKind(n), data: n.data || {} }));\n\n  const next = new Map<string, OutEdge[]>();\n  const incoming = new Map<string, number>();\n  edges.forEach((e) => {\n    const arr = next.get(e.source) || [];\n    arr.push({ to: e.target, branch: (e.data as any)?.branch, label: (e as any).label });\n    next.set(e.source, arr);\n    incoming.set(e.target, (incoming.get(e.target) || 0) + 1);\n  });\n\n  const starts: string[] = [];\n  // Prefer explicit “getStarted” trigger, else nodes with no incoming edges.\n  for (const n of nodes) {\n    const isTrigger = (n.type || '').toLowerCase() === 'getstarted' || (n.data?.trigger === true) || n.id === 'start';\n    const indeg = incoming.get(n.id) || 0;\n    if (isTrigger || indeg === 0) {\n        if (!starts.includes(n.id)) starts.push(n.id);\n    }\n  }\n\n  return { nodes: rtNodes, next, starts };\n}\n"],"names":[],"mappings":";;;AAeA,SAAS,SAAS,CAAO;QAEZ,SAAgB;IAD3B,MAAM,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,WAAW;IACpC,MAAM,IAAI,CAAC,EAAA,UAAA,EAAE,IAAI,cAAN,8BAAA,QAAQ,IAAI,OAAI,WAAA,EAAE,IAAI,cAAN,+BAAA,SAAQ,KAAK,KAAI,EAAE,EAAE,WAAW;IAC3D,MAAM,MAAM,KAAK;IAEjB,IAAI;QAAC;QAAW;QAAO;QAAS;QAAQ;QAAS;QAAgB;KAAW,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO;IACtH,IAAI;QAAC;QAAO;QAAe;KAAQ,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO;IAC7E,IAAI;QAAC;QAAa;QAAS;KAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO;IAC9E,IAAI;QAAC;QAAS;QAAQ;QAAS;KAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO;IAClF,IAAI;QAAC;QAAW;QAAO;QAAW;KAAa,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO;IACzF,IAAI;QAAC;KAAc,CAAC,IAAI,CAAC,CAAA,OAAQ,IAAI,QAAQ,CAAC,QAAQ,OAAO,WAAW,2BAA2B;IAEnG,OAAO;AACT;AAGO,SAAS,QAAQ,KAAa,EAAE,KAAa;IAClD,MAAM,OAAO,IAAI;IACjB,MAAM,OAAO,CAAC,CAAA,IAAK,KAAK,GAAG,CAAC,EAAE,EAAE,EAAE;IAElC,MAAM,UAAU,IAAI;IACpB,MAAM,OAAO,CAAC,CAAA,IAAK,QAAQ,GAAG,CAAC,EAAE,EAAE,EAAE;YAAE,IAAI,EAAE,EAAE;YAAE,MAAM,SAAS;YAAI,MAAM,EAAE,IAAI,IAAI,CAAC;QAAE;IAEvF,MAAM,OAAO,IAAI;IACjB,MAAM,WAAW,IAAI;IACrB,MAAM,OAAO,CAAC,CAAC;YAEoB;QADjC,MAAM,MAAM,KAAK,GAAG,CAAC,EAAE,MAAM,KAAK,EAAE;QACpC,IAAI,IAAI,CAAC;YAAE,IAAI,EAAE,MAAM;YAAE,MAAM,GAAE,QAAC,EAAE,IAAI,cAAP,4BAAA,MAAiB,MAAM;YAAE,OAAO,AAAC,EAAU,KAAK;QAAC;QAClF,KAAK,GAAG,CAAC,EAAE,MAAM,EAAE;QACnB,SAAS,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,SAAS,GAAG,CAAC,EAAE,MAAM,KAAK,CAAC,IAAI;IACzD;IAEA,MAAM,SAAmB,EAAE;IAC3B,2EAA2E;IAC3E,KAAK,MAAM,KAAK,MAAO;YAC+C;QAApE,MAAM,YAAY,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,WAAW,OAAO,gBAAiB,EAAA,UAAA,EAAE,IAAI,cAAN,8BAAA,QAAQ,OAAO,MAAK,QAAS,EAAE,EAAE,KAAK;QAC1G,MAAM,QAAQ,SAAS,GAAG,CAAC,EAAE,EAAE,KAAK;QACpC,IAAI,aAAa,UAAU,GAAG;YAC1B,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,EAAE,GAAG,OAAO,IAAI,CAAC,EAAE,EAAE;QAChD;IACF;IAEA,OAAO;QAAE,OAAO;QAAS;QAAM;IAAO;AACxC","debugId":null}},
    {"offset": {"line": 10792, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/engine/FlowEngine.ts"],"sourcesContent":["import { EventBus } from './EventBus';\nimport { RealClock, MockClock, IClock } from './clock';\nimport { evalExpression, parseDelay, renderTemplate } from './evaluator';\nimport { compile, Compiled, RTNode } from './FlowCompiler';\nimport type { EngineEventMap, EngineOptions, FlowState, Channel, EngineStatus } from './types';\nimport { sendTestRequest } from '@/api/mockServer';\nimport { useFlowStore } from '@/store/flow';\n\nexport class FlowEngine {\n  private bus = new EventBus<EngineEventMap>();\n  private opts: Required<EngineOptions> = { channel: 'whatsapp', clock: 'real' };\n  private clock: IClock = new RealClock();\n  private compiled: Compiled | null = null;\n  private status: EngineStatus = 'idle';\n  private queue: string[] = [];\n  private timers = new Set<number>();\n  private waiting: { nodeId: string; varName: string } | null = null;\n  private vars: Record<string, any> = {};\n\n  constructor(opts?: EngineOptions) {\n    if (opts) this.configure(opts);\n  }\n\n  configure(opts: EngineOptions) {\n    this.opts = { ...this.opts, ...opts };\n    this.clock = this.opts.clock === 'mock' ? new MockClock() : new RealClock();\n  }\n\n  setFlow(nodes: any[], edges: any[]) {\n    this.compiled = compile(nodes, edges);\n  }\n\n  reset() {\n    this.queue = [];\n    this.waiting = null;\n    this.vars = {};\n    this.timers.forEach((t) => this.clock.clear(t));\n    this.timers.clear();\n    this.setStatus('idle');\n  }\n\n  start(nodeId?: string) {\n    if (!this.compiled) throw new Error('FlowEngine: setFlow() first');\n    this.reset();\n    const startNodeIdFromStore = useFlowStore.getState().startNodeId;\n    const start = nodeId || startNodeIdFromStore || this.compiled.starts[0];\n    if (!start) return;\n    this.queue.push(start);\n    this.setStatus('running');\n    this.drain();\n  }\n\n  startFrom(nodeId: string) { this.start(nodeId); }\n\n  stop() {\n    this.setStatus('stopped');\n    this.timers.forEach((t) => this.clock.clear(t));\n    this.timers.clear();\n    this.queue = [];\n    this.waiting = null;\n    this.bus.emit('done', { reason: 'stopped' });\n  }\n\n  pushUserInput(text: string) {\n    this.vars.last_user_message = text;\n    if (this.waiting) {\n      const { nodeId, varName } = this.waiting;\n      this.vars[varName] = text;\n      this.waiting = null;\n      this.setStatus('running');\n      const next = this.next(nodeId);\n      if (next) { this.queue.push(next); }\n      this.drain();\n    }\n  }\n\n  on<K extends keyof EngineEventMap>(ev: K, fn: (p: EngineEventMap[K]) => void) { return this.bus.on(ev, fn); }\n  off<K extends keyof EngineEventMap>(ev: K, fn: (p: EngineEventMap[K]) => void) { return this.bus.off(ev, fn); }\n\n  getVariables() { return { ...this.vars }; }\n\n  advanceMock(ms?: number) { (this.clock as any).flush?.(ms); }\n\n  private setStatus(s: EngineStatus) {\n    this.status = s;\n    this.bus.emit('status', s);\n  }\n\n  private next(fromId: string): string | null {\n    const n = this.compiled!.next.get(fromId) || [];\n    if (n.length === 0) return null;\n    return n[0].to;\n  }\n\n  private chooseBranch(fromId: string, truthy: boolean): string | null {\n    const outs = this.compiled!.next.get(fromId) || [];\n    const want = truthy ? ['true','yes','1'] : ['false','no','0','else','default'];\n    const e = outs.find(o => (o.branch && want.includes(String(o.branch).toLowerCase())) ||\n                             (o.label && want.includes(String(o.label).toLowerCase())))\n           || outs[truthy ? 0 : 1];\n    return e ? e.to : null;\n  }\n\n  private drain() {\n    while (this.queue.length && this.status === 'running') {\n      const nodeId = this.queue.shift()!;\n      const node = this.compiled!.nodes.get(nodeId);\n      if (!node) continue;\n      try {\n        const proceed = this.execute(node);\n        if (proceed === 'async' || proceed === 'wait') break;\n      } catch (e: any) {\n        this.bus.emit('error', { nodeId, message: e?.message || String(e) });\n      }\n    }\n    if (this.status === 'running' && this.queue.length === 0) {\n      this.setStatus('completed');\n      this.bus.emit('done', { reason: 'completed' });\n    }\n  }\n\n  private execute(n: RTNode): 'sync' | 'async' | 'wait' {\n    switch (n.kind) {\n      case 'message': {\n        const text = this.pickMessage(n);\n        const rendered = renderTemplate(text, this.vars);\n        this.emitBot(rendered, n.data.quickReplies);\n        this.trace(n.id, `message(\"${trunc(text)}\")`);\n        const nx = this.next(n.id);\n        if (nx) this.queue.push(nx);\n        return 'sync';\n      }\n      case 'ask': {\n        const varName = n.data?.varName || 'answer';\n        const prompt = n.data?.prompt ? renderTemplate(String(n.data.prompt), this.vars) : null;\n        if (prompt) this.emitBot(prompt);\n        this.waiting = { nodeId: n.id, varName };\n        this.setStatus('waiting');\n        this.bus.emit('waitingForInput', { nodeId: n.id, varName });\n        this.trace(n.id, `ask(\"${varName}\")`);\n        return 'wait';\n      }\n      case 'condition': {\n        const expr = String(n.data?.expression || '');\n        const res = evalExpression(expr, { ...this.vars });\n        const tgt = this.chooseBranch(n.id, !!res);\n        this.trace(n.id, `condition(${res ? 'true' : 'false'})`);\n        if (tgt) this.queue.push(tgt);\n        return 'sync';\n      }\n      case 'delay': {\n        const ms = parseDelay(n.data?.delay || n.data?.waitMs);\n        const id = this.clock.set(() => {\n          this.trace(n.id, `delay ${ms}ms`);\n          const nx = this.next(n.id);\n          if (nx) this.queue.push(nx);\n          this.timers.delete(id);\n          if (this.status === 'running') this.drain();\n        }, ms);\n        this.timers.add(id);\n        return 'async';\n      }\n      case 'api': {\n        const req = this.buildApiRequest(n);\n        sendTestRequest(req as any).then((res) => {\n          this.vars.last_api_response = res;\n          if (n.data?.assignTo) this.vars[n.data.assignTo] = res;\n          this.trace(n.id, `api ${req.method} ${req.url} → ${res.statusCode}`);\n          const nx = this.next(n.id);\n          if (nx) this.queue.push(nx);\n          if (this.status === 'running') this.drain();\n        }).catch((err) => {\n          this.trace(n.id, `api error: ${err?.message || err}`);\n        });\n        return 'async';\n      }\n      default: {\n        this.trace(n.id, 'noop');\n        const nx = this.next(n.id);\n        if (nx) this.queue.push(nx);\n        return 'sync';\n      }\n    }\n  }\n\n  private pickMessage(n: RTNode): string {\n    const d = n.data || {};\n    if (typeof d.text === 'string') return d.text;\n    return d.label || '...';\n  }\n\n  private buildApiRequest(n: RTNode) {\n    const d = n.data?.api || n.data || {};\n    const url = renderTemplate(String(d.url || ''), this.vars);\n    const method = String(d.method || 'POST').toUpperCase();\n    const headers = Array.isArray(d.headers) ? d.headers.map((h: any) => ({\n      key: h.key, value: renderTemplate(String(h.value), this.vars)\n    })) : [];\n    let body = d.body;\n    if (typeof body === 'string') body = renderTemplate(body, this.vars);\n    return { url, method, headers, body };\n  }\n\n  private emitBot(text: string, buttons?: { label: string }[]) {\n    this.bus.emit('botMessage', {\n      id: String(Date.now()) + Math.random().toString(36).slice(2, 6),\n      text,\n      channel: this.opts.channel as Channel,\n      actions: { buttons }\n    });\n  }\n\n  private trace(nodeId: string, result: string) {\n    this.bus.emit('trace', { ts: Date.now(), nodeId, result });\n  }\n}\n\nfunction trunc(s: string, n = 40) {\n  return s.length > n ? s.slice(0, n) + '…' : s;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11077, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/TestConsole/index.ts"],"sourcesContent":["export { default } from './TestConsole';\nexport type { TestConsoleProps, ChatMessage, TraceEvent, Channel } from './types';\nexport { FlowEngine } from '@/engine/FlowEngine';\nexport type { EngineEventMap } from '@/engine/types';\n"],"names":[],"mappings":";AAAA;AAEA","debugId":null}},
    {"offset": {"line": 11099, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/store/ui.ts"],"sourcesContent":["import { create } from 'zustand'\n\ninterface UIState {\n  isTestConsoleOpen: boolean\n  toggleTestConsole: () => void\n}\n\nexport const useUIStore = create<UIState>((set, get) => ({\n  isTestConsoleOpen: false,\n  toggleTestConsole: () => set({ isTestConsoleOpen: !get().isTestConsoleOpen }),\n}))\n"],"names":[],"mappings":";;;AAAA;;AAOO,MAAM,aAAa,CAAA,GAAA,2JAAA,CAAA,SAAM,AAAD,EAAW,CAAC,KAAK,MAAQ,CAAC;QACvD,mBAAmB;QACnB,mBAAmB,IAAM,IAAI;gBAAE,mBAAmB,CAAC,MAAM,iBAAiB;YAAC;IAC7E,CAAC","debugId":null}},
    {"offset": {"line": 11119, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/components/Presence/PublishBanner.tsx"],"sourcesContent":["'use client'\nimport React, { useCallback } from 'react'\nimport styles from './presence.module.css'\nimport { useAwarenessStates } from '@/presence/PresenceProvider'\nimport type { AwarenessState } from '@/presence/types'\n\nexport default function PublishBanner() {\n  const mapFn = useCallback((s: AwarenessState) => (s.publishInProgress ? s : null), []);\n  const states = useAwarenessStates(mapFn);\n  \n  if (states.length === 0) return null;\n\n  const names = states.map((s) => s.user?.name).filter(Boolean) as string[]\n  const label = names.length === 1 ? `${names[0]} is publishing… 🕒` : `${names[0]} and ${names.length - 1} more are publishing… 🕒`\n  return <div className={styles.banner}>{label}</div>\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAMe,SAAS;;IACtB,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;4CAAE,CAAC,IAAuB,EAAE,iBAAiB,GAAG,IAAI;2CAAO,EAAE;IACrF,MAAM,SAAS,CAAA,GAAA,uIAAA,CAAA,qBAAkB,AAAD,EAAE;IAElC,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;IAEhC,MAAM,QAAQ,OAAO,GAAG,CAAC,CAAC;YAAM;gBAAA,UAAA,EAAE,IAAI,cAAN,8BAAA,QAAQ,IAAI;OAAE,MAAM,CAAC;IACrD,MAAM,QAAQ,MAAM,MAAM,KAAK,IAAI,AAAC,GAAW,OAAT,KAAK,CAAC,EAAE,EAAC,wBAAsB,AAAC,GAAkB,OAAhB,KAAK,CAAC,EAAE,EAAC,SAAwB,OAAjB,MAAM,MAAM,GAAG,GAAE;IACzG,qBAAO,6LAAC;QAAI,WAAW,wJAAA,CAAA,UAAM,CAAC,MAAM;kBAAG;;;;;;AACzC;GATwB;;QAEP,uIAAA,CAAA,qBAAkB;;;KAFX","debugId":null}},
    {"offset": {"line": 11170, "column": 0}, "map": {"version":3,"sources":["file:///home/dev28/Desktop/projects/ominflow-studio/src/app/studio-client-page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useMemo } from 'react';\nimport type { Node } from 'reactflow';\nimport { ReactFlowProvider, useReactFlow } from 'reactflow';\nimport { nanoid } from 'nanoid';\n\nimport HeaderBar from '@/components/HeaderBar';\nimport SidebarPalette, { PaletteItemPayload } from '@/components/SidebarPalette';\nimport CanvasWithLayoutWorker from '@/components/CanvasWithLayoutWorker';\nimport PropertiesPanel from '@/components/PropertiesPanel';\nimport { useFlowStore, useFlowMetaStore, undo, redo } from '@/store/flow';\nimport TestConsole from '@/components/TestConsole';\nimport { useUIStore } from '@/store/ui';\nimport PublishBanner from '@/components/Presence/PublishBanner';\nimport { FlowEngine } from '@/engine/FlowEngine';\nimport { useHistoryStore } from '@/store/history';\nimport { Dialog } from '@/components/ui/dialog';\n\nfunction StudioPageContent() {\n  const { nodes, edges, addNode, setNodes, onNodesChange, onEdgesChange, onConnect } = useFlowStore();\n  const { meta, setTitle, setChannels, setPublished, setWaContext } = useFlowMetaStore();\n\n  const [selectedNode, setSelectedNode] = useState<Node | null>(null);\n  const { isTestConsoleOpen, toggleTestConsole } = useUIStore();\n  const { canUndo, canRedo } = useHistoryStore();\n\n  const engine = useMemo(() => new FlowEngine({ channel: meta.channels[0], clock: 'real' }), [meta.channels]);\n  const { project } = useReactFlow();\n\n  engine.setFlow(nodes, edges);\n\n  const handleNodeDoubleClick = useCallback((_event: React.MouseEvent, node: Node) => {\n    // Don't open properties for message nodes as they have inline controls\n    if (node.data?.type === 'messaging') {\n      setSelectedNode(null);\n      return;\n    }\n    setSelectedNode(node);\n  }, []);\n\n  const handleSaveNode = (nodeId: string, data: Record<string, any>) => {\n    setNodes(\n      nodes.map((n) => (n.id === nodeId ? { ...n, data: { ...n.data, ...data } } : n))\n    );\n  };\n\n  const handleDragStart = (_e: React.DragEvent, item: PaletteItemPayload) => {\n    // This is handled by ReactFlow's onDrop, but you could add logic here\n  };\n\n  const handleClickAdd = (item: PaletteItemPayload) => {\n    const { x, y } = project({ x: window.innerWidth / 2, y: window.innerHeight / 2 });\n    const newNode: Node = {\n      id: nanoid(),\n      type: 'base',\n      position: { x: x - 200, y: y - 100 }, // Center it\n      data: { \n        label: item.label, \n        icon: item.icon,\n        color: item.color,\n        description: item.description,\n        type: item.type,\n      },\n    };\n    addNode(newNode);\n  };\n\n  return (\n    <div className=\"h-screen w-screen grid grid-rows-[56px_1fr] md:grid-cols-[280px_1fr] bg-background text-foreground relative overflow-hidden\">\n      <PublishBanner />\n      <div className=\"col-span-full row-start-1 z-10\">\n        <HeaderBar\n            title={meta.title}\n            onSave={setTitle}\n            channels={meta.channels}\n            onChannelsChange={setChannels}\n            waContext={meta.waMessageContext}\n            onWaContextChange={setWaContext}\n            isPublished={meta.published}\n            onPublishToggle={setPublished}\n            onUndo={undo}\n            onRedo={redo}\n            canUndo={canUndo}\n            canRedo={canRedo}\n            onTest={toggleTestConsole}\n            onSaveClick={() => console.log('Save clicked!', { meta, nodes, edges })}\n        />\n      </div>\n      <aside className=\"hidden md:block col-start-1 row-start-2 overflow-y-auto border-r border-border z-10 bg-background\">\n        <div className=\"p-4 sidebar-scroll\">\n            <SidebarPalette onDragStart={handleDragStart} onItemClick={handleClickAdd} filterChannels={meta.channels} />\n        </div>\n      </aside>\n      <main className=\"md:col-start-2 row-start-2 col-start-1 relative overflow-hidden bg-background\">\n        <CanvasWithLayoutWorker\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          setNodes={setNodes}\n          onNodeDoubleClick={handleNodeDoubleClick}\n          viewportKey=\"flow-editor-viewport\"\n        />\n      </main>\n      <Dialog open={!!selectedNode} onOpenChange={(isOpen) => !isOpen && setSelectedNode(null)}>\n        <PropertiesPanel\n          node={selectedNode}\n          onClose={() => setSelectedNode(null)}\n          onSave={handleSaveNode}\n          waContext={meta.waMessageContext}\n          channels={meta.channels}\n        />\n      </Dialog>\n      <TestConsole isOpen={isTestConsoleOpen} onClose={toggleTestConsole} engine={engine} flowId={meta.id} />\n    </div>\n  );\n}\n\n\nexport default function StudioClientPage() {\n    return (\n        <ReactFlowProvider>\n            <StudioPageContent />\n        </ReactFlowProvider>\n    )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}